{"ast":null,"code":"!function t(e, r) {\n  if (\"object\" == typeof exports && \"object\" == typeof module) module.exports = r();else if (\"function\" == typeof define && define.amd) define([], r);else {\n    var n = r();\n\n    for (var i in n) (\"object\" == typeof exports ? exports : e)[i] = n[i];\n  }\n}(this, function () {\n  return function (t) {\n    var e = {};\n\n    function r(n) {\n      if (e[n]) return e[n].exports;\n      var i = e[n] = {\n        i: n,\n        l: !1,\n        exports: {}\n      };\n      return t[n].call(i.exports, i, i.exports, r), i.l = !0, i.exports;\n    }\n\n    return r.m = t, r.c = e, r.d = function (t, e, n) {\n      r.o(t, e) || Object.defineProperty(t, e, {\n        enumerable: !0,\n        get: n\n      });\n    }, r.r = function (t) {\n      \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, {\n        value: \"Module\"\n      }), Object.defineProperty(t, \"__esModule\", {\n        value: !0\n      });\n    }, r.t = function (t, e) {\n      if (1 & e && (t = r(t)), 8 & e) return t;\n      if (4 & e && \"object\" == typeof t && t && t.__esModule) return t;\n      var n = Object.create(null);\n      if (r.r(n), Object.defineProperty(n, \"default\", {\n        enumerable: !0,\n        value: t\n      }), 2 & e && \"string\" != typeof t) for (var i in t) r.d(n, i, function (e) {\n        return t[e];\n      }.bind(null, i));\n      return n;\n    }, r.n = function (t) {\n      var e = t && t.__esModule ? function e() {\n        return t.default;\n      } : function e() {\n        return t;\n      };\n      return r.d(e, \"a\", e), e;\n    }, r.o = function (t, e) {\n      return Object.prototype.hasOwnProperty.call(t, e);\n    }, r.p = \"\", r(r.s = 22);\n  }([function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    });\n\n    var n = function () {\n      function t(t, e) {\n        for (var r = 0; r < e.length; r++) {\n          var n = e[r];\n          n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(t, n.key, n);\n        }\n      }\n\n      return function (e, r, n) {\n        return r && t(e.prototype, r), n && t(e, n), e;\n      };\n    }();\n\n    var i = {\n      debug: function t() {},\n      info: function t() {},\n      warn: function t() {},\n      error: function t() {}\n    },\n        o = void 0,\n        s = void 0;\n    (e.Log = function () {\n      function t() {\n        !function e(t, r) {\n          if (!(t instanceof r)) throw new TypeError(\"Cannot call a class as a function\");\n        }(this, t);\n      }\n\n      return t.reset = function t() {\n        s = 3, o = i;\n      }, t.debug = function t() {\n        if (s >= 4) {\n          for (var e = arguments.length, r = Array(e), n = 0; n < e; n++) r[n] = arguments[n];\n\n          o.debug.apply(o, Array.from(r));\n        }\n      }, t.info = function t() {\n        if (s >= 3) {\n          for (var e = arguments.length, r = Array(e), n = 0; n < e; n++) r[n] = arguments[n];\n\n          o.info.apply(o, Array.from(r));\n        }\n      }, t.warn = function t() {\n        if (s >= 2) {\n          for (var e = arguments.length, r = Array(e), n = 0; n < e; n++) r[n] = arguments[n];\n\n          o.warn.apply(o, Array.from(r));\n        }\n      }, t.error = function t() {\n        if (s >= 1) {\n          for (var e = arguments.length, r = Array(e), n = 0; n < e; n++) r[n] = arguments[n];\n\n          o.error.apply(o, Array.from(r));\n        }\n      }, n(t, null, [{\n        key: \"NONE\",\n        get: function t() {\n          return 0;\n        }\n      }, {\n        key: \"ERROR\",\n        get: function t() {\n          return 1;\n        }\n      }, {\n        key: \"WARN\",\n        get: function t() {\n          return 2;\n        }\n      }, {\n        key: \"INFO\",\n        get: function t() {\n          return 3;\n        }\n      }, {\n        key: \"DEBUG\",\n        get: function t() {\n          return 4;\n        }\n      }, {\n        key: \"level\",\n        get: function t() {\n          return s;\n        },\n        set: function t(e) {\n          if (!(0 <= e && e <= 4)) throw new Error(\"Invalid log level\");\n          s = e;\n        }\n      }, {\n        key: \"logger\",\n        get: function t() {\n          return o;\n        },\n        set: function t(e) {\n          if (!e.debug && e.info && (e.debug = e.info), !(e.debug && e.info && e.warn && e.error)) throw new Error(\"Invalid logger\");\n          o = e;\n        }\n      }]), t;\n    }()).reset();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    });\n\n    var n = function () {\n      function t(t, e) {\n        for (var r = 0; r < e.length; r++) {\n          var n = e[r];\n          n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(t, n.key, n);\n        }\n      }\n\n      return function (e, r, n) {\n        return r && t(e.prototype, r), n && t(e, n), e;\n      };\n    }();\n\n    var i = {\n      setInterval: function (t) {\n        function e(e, r) {\n          return t.apply(this, arguments);\n        }\n\n        return e.toString = function () {\n          return t.toString();\n        }, e;\n      }(function (t, e) {\n        return setInterval(t, e);\n      }),\n      clearInterval: function (t) {\n        function e(e) {\n          return t.apply(this, arguments);\n        }\n\n        return e.toString = function () {\n          return t.toString();\n        }, e;\n      }(function (t) {\n        return clearInterval(t);\n      })\n    },\n        o = !1,\n        s = null;\n\n    e.Global = function () {\n      function t() {\n        !function e(t, r) {\n          if (!(t instanceof r)) throw new TypeError(\"Cannot call a class as a function\");\n        }(this, t);\n      }\n\n      return t._testing = function t() {\n        o = !0;\n      }, t.setXMLHttpRequest = function t(e) {\n        s = e;\n      }, n(t, null, [{\n        key: \"location\",\n        get: function t() {\n          if (!o) return location;\n        }\n      }, {\n        key: \"localStorage\",\n        get: function t() {\n          if (!o && \"undefined\" != typeof window) return localStorage;\n        }\n      }, {\n        key: \"sessionStorage\",\n        get: function t() {\n          if (!o && \"undefined\" != typeof window) return sessionStorage;\n        }\n      }, {\n        key: \"XMLHttpRequest\",\n        get: function t() {\n          if (!o && \"undefined\" != typeof window) return s || XMLHttpRequest;\n        }\n      }, {\n        key: \"timer\",\n        get: function t() {\n          if (!o) return i;\n        }\n      }]), t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.MetadataService = void 0;\n\n    var n = function () {\n      function t(t, e) {\n        for (var r = 0; r < e.length; r++) {\n          var n = e[r];\n          n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(t, n.key, n);\n        }\n      }\n\n      return function (e, r, n) {\n        return r && t(e.prototype, r), n && t(e, n), e;\n      };\n    }(),\n        i = r(0),\n        o = r(7);\n\n    function s(t, e) {\n      if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n    }\n\n    var a = \".well-known/openid-configuration\";\n\n    e.MetadataService = function () {\n      function t(e) {\n        var r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : o.JsonService;\n        if (s(this, t), !e) throw i.Log.error(\"MetadataService: No settings passed to MetadataService\"), new Error(\"settings\");\n        this._settings = e, this._jsonService = new r([\"application/jwk-set+json\"]);\n      }\n\n      return t.prototype.resetSigningKeys = function t() {\n        this._settings = this._settings || {}, this._settings.signingKeys = void 0;\n      }, t.prototype.getMetadata = function t() {\n        var e = this;\n        return this._settings.metadata ? (i.Log.debug(\"MetadataService.getMetadata: Returning metadata from settings\"), Promise.resolve(this._settings.metadata)) : this.metadataUrl ? (i.Log.debug(\"MetadataService.getMetadata: getting metadata from\", this.metadataUrl), this._jsonService.getJson(this.metadataUrl).then(function (t) {\n          i.Log.debug(\"MetadataService.getMetadata: json received\");\n          var r = e._settings.metadataSeed || {};\n          return e._settings.metadata = Object.assign({}, r, t), e._settings.metadata;\n        })) : (i.Log.error(\"MetadataService.getMetadata: No authority or metadataUrl configured on settings\"), Promise.reject(new Error(\"No authority or metadataUrl configured on settings\")));\n      }, t.prototype.getIssuer = function t() {\n        return this._getMetadataProperty(\"issuer\");\n      }, t.prototype.getAuthorizationEndpoint = function t() {\n        return this._getMetadataProperty(\"authorization_endpoint\");\n      }, t.prototype.getUserInfoEndpoint = function t() {\n        return this._getMetadataProperty(\"userinfo_endpoint\");\n      }, t.prototype.getTokenEndpoint = function t() {\n        var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];\n        return this._getMetadataProperty(\"token_endpoint\", e);\n      }, t.prototype.getCheckSessionIframe = function t() {\n        return this._getMetadataProperty(\"check_session_iframe\", !0);\n      }, t.prototype.getEndSessionEndpoint = function t() {\n        return this._getMetadataProperty(\"end_session_endpoint\", !0);\n      }, t.prototype.getRevocationEndpoint = function t() {\n        return this._getMetadataProperty(\"revocation_endpoint\", !0);\n      }, t.prototype.getKeysEndpoint = function t() {\n        return this._getMetadataProperty(\"jwks_uri\", !0);\n      }, t.prototype._getMetadataProperty = function t(e) {\n        var r = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];\n        return i.Log.debug(\"MetadataService.getMetadataProperty for: \" + e), this.getMetadata().then(function (t) {\n          if (i.Log.debug(\"MetadataService.getMetadataProperty: metadata recieved\"), void 0 === t[e]) {\n            if (!0 === r) return void i.Log.warn(\"MetadataService.getMetadataProperty: Metadata does not contain optional property \" + e);\n            throw i.Log.error(\"MetadataService.getMetadataProperty: Metadata does not contain property \" + e), new Error(\"Metadata does not contain property \" + e);\n          }\n\n          return t[e];\n        });\n      }, t.prototype.getSigningKeys = function t() {\n        var e = this;\n        return this._settings.signingKeys ? (i.Log.debug(\"MetadataService.getSigningKeys: Returning signingKeys from settings\"), Promise.resolve(this._settings.signingKeys)) : this._getMetadataProperty(\"jwks_uri\").then(function (t) {\n          return i.Log.debug(\"MetadataService.getSigningKeys: jwks_uri received\", t), e._jsonService.getJson(t).then(function (t) {\n            if (i.Log.debug(\"MetadataService.getSigningKeys: key set received\", t), !t.keys) throw i.Log.error(\"MetadataService.getSigningKeys: Missing keys on keyset\"), new Error(\"Missing keys on keyset\");\n            return e._settings.signingKeys = t.keys, e._settings.signingKeys;\n          });\n        });\n      }, n(t, [{\n        key: \"metadataUrl\",\n        get: function t() {\n          return this._metadataUrl || (this._settings.metadataUrl ? this._metadataUrl = this._settings.metadataUrl : (this._metadataUrl = this._settings.authority, this._metadataUrl && this._metadataUrl.indexOf(a) < 0 && (\"/\" !== this._metadataUrl[this._metadataUrl.length - 1] && (this._metadataUrl += \"/\"), this._metadataUrl += a))), this._metadataUrl;\n        }\n      }]), t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.UrlUtility = void 0;\n    var n = r(0),\n        i = r(1);\n\n    e.UrlUtility = function () {\n      function t() {\n        !function e(t, r) {\n          if (!(t instanceof r)) throw new TypeError(\"Cannot call a class as a function\");\n        }(this, t);\n      }\n\n      return t.addQueryParam = function t(e, r, n) {\n        return e.indexOf(\"?\") < 0 && (e += \"?\"), \"?\" !== e[e.length - 1] && (e += \"&\"), e += encodeURIComponent(r), e += \"=\", e += encodeURIComponent(n);\n      }, t.parseUrlFragment = function t(e) {\n        var r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : \"#\",\n            o = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : i.Global;\n        \"string\" != typeof e && (e = o.location.href);\n        var s = e.lastIndexOf(r);\n        s >= 0 && (e = e.substr(s + 1)), \"?\" === r && (s = e.indexOf(\"#\")) >= 0 && (e = e.substr(0, s));\n\n        for (var a, u = {}, c = /([^&=]+)=([^&]*)/g, h = 0; a = c.exec(e);) if (u[decodeURIComponent(a[1])] = decodeURIComponent(a[2].replace(/\\+/g, \" \")), h++ > 50) return n.Log.error(\"UrlUtility.parseUrlFragment: response exceeded expected number of parameters\", e), {\n          error: \"Response exceeded expected number of parameters\"\n        };\n\n        for (var l in u) return u;\n\n        return {};\n      }, t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.JoseUtil = void 0;\n\n    var n = r(26),\n        i = function o(t) {\n      return t && t.__esModule ? t : {\n        default: t\n      };\n    }(r(33));\n\n    e.JoseUtil = (0, i.default)({\n      jws: n.jws,\n      KeyUtil: n.KeyUtil,\n      X509: n.X509,\n      crypto: n.crypto,\n      hextob64u: n.hextob64u,\n      b64tohex: n.b64tohex,\n      AllowedSigningAlgs: n.AllowedSigningAlgs\n    });\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.OidcClientSettings = void 0;\n\n    var n = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (t) {\n      return typeof t;\n    } : function (t) {\n      return t && \"function\" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? \"symbol\" : typeof t;\n    },\n        i = function () {\n      function t(t, e) {\n        for (var r = 0; r < e.length; r++) {\n          var n = e[r];\n          n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(t, n.key, n);\n        }\n      }\n\n      return function (e, r, n) {\n        return r && t(e.prototype, r), n && t(e, n), e;\n      };\n    }(),\n        o = r(0),\n        s = r(23),\n        a = r(6),\n        u = r(24),\n        c = r(2);\n\n    function h(t, e) {\n      if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n    }\n\n    var l = \".well-known/openid-configuration\",\n        f = \"id_token\",\n        g = \"openid\",\n        d = \"client_secret_post\";\n\n    e.OidcClientSettings = function () {\n      function t() {\n        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n            r = e.authority,\n            i = e.metadataUrl,\n            o = e.metadata,\n            l = e.signingKeys,\n            p = e.metadataSeed,\n            v = e.client_id,\n            y = e.client_secret,\n            m = e.response_type,\n            _ = void 0 === m ? f : m,\n            S = e.scope,\n            b = void 0 === S ? g : S,\n            w = e.redirect_uri,\n            F = e.post_logout_redirect_uri,\n            E = e.client_authentication,\n            x = void 0 === E ? d : E,\n            A = e.prompt,\n            k = e.display,\n            P = e.max_age,\n            C = e.ui_locales,\n            T = e.acr_values,\n            R = e.resource,\n            I = e.response_mode,\n            D = e.filterProtocolClaims,\n            L = void 0 === D || D,\n            N = e.loadUserInfo,\n            U = void 0 === N || N,\n            B = e.staleStateAge,\n            O = void 0 === B ? 900 : B,\n            j = e.clockSkew,\n            M = void 0 === j ? 300 : j,\n            H = e.clockService,\n            V = void 0 === H ? new s.ClockService() : H,\n            K = e.userInfoJwtIssuer,\n            q = void 0 === K ? \"OP\" : K,\n            J = e.mergeClaims,\n            W = void 0 !== J && J,\n            z = e.stateStore,\n            Y = void 0 === z ? new a.WebStorageStateStore() : z,\n            G = e.ResponseValidatorCtor,\n            X = void 0 === G ? u.ResponseValidator : G,\n            $ = e.MetadataServiceCtor,\n            Q = void 0 === $ ? c.MetadataService : $,\n            Z = e.extraQueryParams,\n            tt = void 0 === Z ? {} : Z,\n            et = e.extraTokenParams,\n            rt = void 0 === et ? {} : et;\n\n        h(this, t), this._authority = r, this._metadataUrl = i, this._metadata = o, this._metadataSeed = p, this._signingKeys = l, this._client_id = v, this._client_secret = y, this._response_type = _, this._scope = b, this._redirect_uri = w, this._post_logout_redirect_uri = F, this._client_authentication = x, this._prompt = A, this._display = k, this._max_age = P, this._ui_locales = C, this._acr_values = T, this._resource = R, this._response_mode = I, this._filterProtocolClaims = !!L, this._loadUserInfo = !!U, this._staleStateAge = O, this._clockSkew = M, this._clockService = V, this._userInfoJwtIssuer = q, this._mergeClaims = !!W, this._stateStore = Y, this._validator = new X(this), this._metadataService = new Q(this), this._extraQueryParams = \"object\" === (void 0 === tt ? \"undefined\" : n(tt)) ? tt : {}, this._extraTokenParams = \"object\" === (void 0 === rt ? \"undefined\" : n(rt)) ? rt : {};\n      }\n\n      return t.prototype.getEpochTime = function t() {\n        return this._clockService.getEpochTime();\n      }, i(t, [{\n        key: \"client_id\",\n        get: function t() {\n          return this._client_id;\n        },\n        set: function t(e) {\n          if (this._client_id) throw o.Log.error(\"OidcClientSettings.set_client_id: client_id has already been assigned.\"), new Error(\"client_id has already been assigned.\");\n          this._client_id = e;\n        }\n      }, {\n        key: \"client_secret\",\n        get: function t() {\n          return this._client_secret;\n        }\n      }, {\n        key: \"response_type\",\n        get: function t() {\n          return this._response_type;\n        }\n      }, {\n        key: \"scope\",\n        get: function t() {\n          return this._scope;\n        }\n      }, {\n        key: \"redirect_uri\",\n        get: function t() {\n          return this._redirect_uri;\n        }\n      }, {\n        key: \"post_logout_redirect_uri\",\n        get: function t() {\n          return this._post_logout_redirect_uri;\n        }\n      }, {\n        key: \"client_authentication\",\n        get: function t() {\n          return this._client_authentication;\n        }\n      }, {\n        key: \"prompt\",\n        get: function t() {\n          return this._prompt;\n        }\n      }, {\n        key: \"display\",\n        get: function t() {\n          return this._display;\n        }\n      }, {\n        key: \"max_age\",\n        get: function t() {\n          return this._max_age;\n        }\n      }, {\n        key: \"ui_locales\",\n        get: function t() {\n          return this._ui_locales;\n        }\n      }, {\n        key: \"acr_values\",\n        get: function t() {\n          return this._acr_values;\n        }\n      }, {\n        key: \"resource\",\n        get: function t() {\n          return this._resource;\n        }\n      }, {\n        key: \"response_mode\",\n        get: function t() {\n          return this._response_mode;\n        }\n      }, {\n        key: \"authority\",\n        get: function t() {\n          return this._authority;\n        },\n        set: function t(e) {\n          if (this._authority) throw o.Log.error(\"OidcClientSettings.set_authority: authority has already been assigned.\"), new Error(\"authority has already been assigned.\");\n          this._authority = e;\n        }\n      }, {\n        key: \"metadataUrl\",\n        get: function t() {\n          return this._metadataUrl || (this._metadataUrl = this.authority, this._metadataUrl && this._metadataUrl.indexOf(l) < 0 && (\"/\" !== this._metadataUrl[this._metadataUrl.length - 1] && (this._metadataUrl += \"/\"), this._metadataUrl += l)), this._metadataUrl;\n        }\n      }, {\n        key: \"metadata\",\n        get: function t() {\n          return this._metadata;\n        },\n        set: function t(e) {\n          this._metadata = e;\n        }\n      }, {\n        key: \"metadataSeed\",\n        get: function t() {\n          return this._metadataSeed;\n        },\n        set: function t(e) {\n          this._metadataSeed = e;\n        }\n      }, {\n        key: \"signingKeys\",\n        get: function t() {\n          return this._signingKeys;\n        },\n        set: function t(e) {\n          this._signingKeys = e;\n        }\n      }, {\n        key: \"filterProtocolClaims\",\n        get: function t() {\n          return this._filterProtocolClaims;\n        }\n      }, {\n        key: \"loadUserInfo\",\n        get: function t() {\n          return this._loadUserInfo;\n        }\n      }, {\n        key: \"staleStateAge\",\n        get: function t() {\n          return this._staleStateAge;\n        }\n      }, {\n        key: \"clockSkew\",\n        get: function t() {\n          return this._clockSkew;\n        }\n      }, {\n        key: \"userInfoJwtIssuer\",\n        get: function t() {\n          return this._userInfoJwtIssuer;\n        }\n      }, {\n        key: \"mergeClaims\",\n        get: function t() {\n          return this._mergeClaims;\n        }\n      }, {\n        key: \"stateStore\",\n        get: function t() {\n          return this._stateStore;\n        }\n      }, {\n        key: \"validator\",\n        get: function t() {\n          return this._validator;\n        }\n      }, {\n        key: \"metadataService\",\n        get: function t() {\n          return this._metadataService;\n        }\n      }, {\n        key: \"extraQueryParams\",\n        get: function t() {\n          return this._extraQueryParams;\n        },\n        set: function t(e) {\n          \"object\" === (void 0 === e ? \"undefined\" : n(e)) ? this._extraQueryParams = e : this._extraQueryParams = {};\n        }\n      }, {\n        key: \"extraTokenParams\",\n        get: function t() {\n          return this._extraTokenParams;\n        },\n        set: function t(e) {\n          \"object\" === (void 0 === e ? \"undefined\" : n(e)) ? this._extraTokenParams = e : this._extraTokenParams = {};\n        }\n      }]), t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.WebStorageStateStore = void 0;\n    var n = r(0),\n        i = r(1);\n\n    function o(t, e) {\n      if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n    }\n\n    e.WebStorageStateStore = function () {\n      function t() {\n        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n            r = e.prefix,\n            n = void 0 === r ? \"oidc.\" : r,\n            s = e.store,\n            a = void 0 === s ? i.Global.localStorage : s;\n        o(this, t), this._store = a, this._prefix = n;\n      }\n\n      return t.prototype.set = function t(e, r) {\n        return n.Log.debug(\"WebStorageStateStore.set\", e), e = this._prefix + e, this._store.setItem(e, r), Promise.resolve();\n      }, t.prototype.get = function t(e) {\n        n.Log.debug(\"WebStorageStateStore.get\", e), e = this._prefix + e;\n\n        var r = this._store.getItem(e);\n\n        return Promise.resolve(r);\n      }, t.prototype.remove = function t(e) {\n        n.Log.debug(\"WebStorageStateStore.remove\", e), e = this._prefix + e;\n\n        var r = this._store.getItem(e);\n\n        return this._store.removeItem(e), Promise.resolve(r);\n      }, t.prototype.getAllKeys = function t() {\n        n.Log.debug(\"WebStorageStateStore.getAllKeys\");\n\n        for (var e = [], r = 0; r < this._store.length; r++) {\n          var i = this._store.key(r);\n\n          0 === i.indexOf(this._prefix) && e.push(i.substr(this._prefix.length));\n        }\n\n        return Promise.resolve(e);\n      }, t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.JsonService = void 0;\n    var n = r(0),\n        i = r(1);\n\n    function o(t, e) {\n      if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n    }\n\n    e.JsonService = function () {\n      function t() {\n        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null,\n            r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : i.Global.XMLHttpRequest,\n            n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null;\n        o(this, t), e && Array.isArray(e) ? this._contentTypes = e.slice() : this._contentTypes = [], this._contentTypes.push(\"application/json\"), n && this._contentTypes.push(\"application/jwt\"), this._XMLHttpRequest = r, this._jwtHandler = n;\n      }\n\n      return t.prototype.getJson = function t(e, r) {\n        var i = this;\n        if (!e) throw n.Log.error(\"JsonService.getJson: No url passed\"), new Error(\"url\");\n        return n.Log.debug(\"JsonService.getJson, url: \", e), new Promise(function (t, o) {\n          var s = new i._XMLHttpRequest();\n          s.open(\"GET\", e);\n          var a = i._contentTypes,\n              u = i._jwtHandler;\n          s.onload = function () {\n            if (n.Log.debug(\"JsonService.getJson: HTTP response received, status\", s.status), 200 === s.status) {\n              var r = s.getResponseHeader(\"Content-Type\");\n\n              if (r) {\n                var i = a.find(function (t) {\n                  if (r.startsWith(t)) return !0;\n                });\n                if (\"application/jwt\" == i) return void u(s).then(t, o);\n                if (i) try {\n                  return void t(JSON.parse(s.responseText));\n                } catch (t) {\n                  return n.Log.error(\"JsonService.getJson: Error parsing JSON response\", t.message), void o(t);\n                }\n              }\n\n              o(Error(\"Invalid response Content-Type: \" + r + \", from URL: \" + e));\n            } else o(Error(s.statusText + \" (\" + s.status + \")\"));\n          }, s.onerror = function () {\n            n.Log.error(\"JsonService.getJson: network error\"), o(Error(\"Network Error\"));\n          }, r && (n.Log.debug(\"JsonService.getJson: token passed, setting Authorization header\"), s.setRequestHeader(\"Authorization\", \"Bearer \" + r)), s.send();\n        });\n      }, t.prototype.postForm = function t(e, r, i) {\n        var o = this;\n        if (!e) throw n.Log.error(\"JsonService.postForm: No url passed\"), new Error(\"url\");\n        return n.Log.debug(\"JsonService.postForm, url: \", e), new Promise(function (t, s) {\n          var a = new o._XMLHttpRequest();\n          a.open(\"POST\", e);\n          var u = o._contentTypes;\n          a.onload = function () {\n            if (n.Log.debug(\"JsonService.postForm: HTTP response received, status\", a.status), 200 !== a.status) {\n              if (400 === a.status) if (i = a.getResponseHeader(\"Content-Type\")) if (u.find(function (t) {\n                if (i.startsWith(t)) return !0;\n              })) try {\n                var r = JSON.parse(a.responseText);\n                if (r && r.error) return n.Log.error(\"JsonService.postForm: Error from server: \", r.error), void s(new Error(r.error));\n              } catch (t) {\n                return n.Log.error(\"JsonService.postForm: Error parsing JSON response\", t.message), void s(t);\n              }\n              s(Error(a.statusText + \" (\" + a.status + \")\"));\n            } else {\n              var i;\n              if ((i = a.getResponseHeader(\"Content-Type\")) && u.find(function (t) {\n                if (i.startsWith(t)) return !0;\n              })) try {\n                return void t(JSON.parse(a.responseText));\n              } catch (t) {\n                return n.Log.error(\"JsonService.postForm: Error parsing JSON response\", t.message), void s(t);\n              }\n              s(Error(\"Invalid response Content-Type: \" + i + \", from URL: \" + e));\n            }\n          }, a.onerror = function () {\n            n.Log.error(\"JsonService.postForm: network error\"), s(Error(\"Network Error\"));\n          };\n          var c = \"\";\n\n          for (var h in r) {\n            var l = r[h];\n            l && (c.length > 0 && (c += \"&\"), c += encodeURIComponent(h), c += \"=\", c += encodeURIComponent(l));\n          }\n\n          a.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\"), void 0 !== i && a.setRequestHeader(\"Authorization\", \"Basic \" + btoa(i)), a.send(c);\n        });\n      }, t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.SigninRequest = void 0;\n    var n = r(0),\n        i = r(3),\n        o = r(13);\n\n    e.SigninRequest = function () {\n      function t(e) {\n        var r = e.url,\n            s = e.client_id,\n            a = e.redirect_uri,\n            u = e.response_type,\n            c = e.scope,\n            h = e.authority,\n            l = e.data,\n            f = e.prompt,\n            g = e.display,\n            d = e.max_age,\n            p = e.ui_locales,\n            v = e.id_token_hint,\n            y = e.login_hint,\n            m = e.acr_values,\n            _ = e.resource,\n            S = e.response_mode,\n            b = e.request,\n            w = e.request_uri,\n            F = e.extraQueryParams,\n            E = e.request_type,\n            x = e.client_secret,\n            A = e.extraTokenParams,\n            k = e.skipUserInfo;\n        if (function P(t, e) {\n          if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n        }(this, t), !r) throw n.Log.error(\"SigninRequest.ctor: No url passed\"), new Error(\"url\");\n        if (!s) throw n.Log.error(\"SigninRequest.ctor: No client_id passed\"), new Error(\"client_id\");\n        if (!a) throw n.Log.error(\"SigninRequest.ctor: No redirect_uri passed\"), new Error(\"redirect_uri\");\n        if (!u) throw n.Log.error(\"SigninRequest.ctor: No response_type passed\"), new Error(\"response_type\");\n        if (!c) throw n.Log.error(\"SigninRequest.ctor: No scope passed\"), new Error(\"scope\");\n        if (!h) throw n.Log.error(\"SigninRequest.ctor: No authority passed\"), new Error(\"authority\");\n        var C = t.isOidc(u),\n            T = t.isCode(u);\n        S || (S = t.isCode(u) ? \"query\" : null), this.state = new o.SigninState({\n          nonce: C,\n          data: l,\n          client_id: s,\n          authority: h,\n          redirect_uri: a,\n          code_verifier: T,\n          request_type: E,\n          response_mode: S,\n          client_secret: x,\n          scope: c,\n          extraTokenParams: A,\n          skipUserInfo: k\n        }), r = i.UrlUtility.addQueryParam(r, \"client_id\", s), r = i.UrlUtility.addQueryParam(r, \"redirect_uri\", a), r = i.UrlUtility.addQueryParam(r, \"response_type\", u), r = i.UrlUtility.addQueryParam(r, \"scope\", c), r = i.UrlUtility.addQueryParam(r, \"state\", this.state.id), C && (r = i.UrlUtility.addQueryParam(r, \"nonce\", this.state.nonce)), T && (r = i.UrlUtility.addQueryParam(r, \"code_challenge\", this.state.code_challenge), r = i.UrlUtility.addQueryParam(r, \"code_challenge_method\", \"S256\"));\n        var R = {\n          prompt: f,\n          display: g,\n          max_age: d,\n          ui_locales: p,\n          id_token_hint: v,\n          login_hint: y,\n          acr_values: m,\n          resource: _,\n          request: b,\n          request_uri: w,\n          response_mode: S\n        };\n\n        for (var I in R) R[I] && (r = i.UrlUtility.addQueryParam(r, I, R[I]));\n\n        for (var D in F) r = i.UrlUtility.addQueryParam(r, D, F[D]);\n\n        this.url = r;\n      }\n\n      return t.isOidc = function t(e) {\n        return !!e.split(/\\s+/g).filter(function (t) {\n          return \"id_token\" === t;\n        })[0];\n      }, t.isOAuth = function t(e) {\n        return !!e.split(/\\s+/g).filter(function (t) {\n          return \"token\" === t;\n        })[0];\n      }, t.isCode = function t(e) {\n        return !!e.split(/\\s+/g).filter(function (t) {\n          return \"code\" === t;\n        })[0];\n      }, t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.State = void 0;\n\n    var n = function () {\n      function t(t, e) {\n        for (var r = 0; r < e.length; r++) {\n          var n = e[r];\n          n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(t, n.key, n);\n        }\n      }\n\n      return function (e, r, n) {\n        return r && t(e.prototype, r), n && t(e, n), e;\n      };\n    }(),\n        i = r(0),\n        o = function s(t) {\n      return t && t.__esModule ? t : {\n        default: t\n      };\n    }(r(14));\n\n    function a(t, e) {\n      if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n    }\n\n    e.State = function () {\n      function t() {\n        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n            r = e.id,\n            n = e.data,\n            i = e.created,\n            s = e.request_type;\n        a(this, t), this._id = r || (0, o.default)(), this._data = n, this._created = \"number\" == typeof i && i > 0 ? i : parseInt(Date.now() / 1e3), this._request_type = s;\n      }\n\n      return t.prototype.toStorageString = function t() {\n        return i.Log.debug(\"State.toStorageString\"), JSON.stringify({\n          id: this.id,\n          data: this.data,\n          created: this.created,\n          request_type: this.request_type\n        });\n      }, t.fromStorageString = function e(r) {\n        return i.Log.debug(\"State.fromStorageString\"), new t(JSON.parse(r));\n      }, t.clearStaleState = function e(r, n) {\n        var o = Date.now() / 1e3 - n;\n        return r.getAllKeys().then(function (e) {\n          i.Log.debug(\"State.clearStaleState: got keys\", e);\n\n          for (var n = [], s = function s(a) {\n            var c = e[a];\n            u = r.get(c).then(function (e) {\n              var n = !1;\n              if (e) try {\n                var s = t.fromStorageString(e);\n                i.Log.debug(\"State.clearStaleState: got item from key: \", c, s.created), s.created <= o && (n = !0);\n              } catch (t) {\n                i.Log.error(\"State.clearStaleState: Error parsing state for key\", c, t.message), n = !0;\n              } else i.Log.debug(\"State.clearStaleState: no item in storage for key: \", c), n = !0;\n              if (n) return i.Log.debug(\"State.clearStaleState: removed item for key: \", c), r.remove(c);\n            }), n.push(u);\n          }, a = 0; a < e.length; a++) {\n            var u;\n            s(a);\n          }\n\n          return i.Log.debug(\"State.clearStaleState: waiting on promise count:\", n.length), Promise.all(n);\n        });\n      }, n(t, [{\n        key: \"id\",\n        get: function t() {\n          return this._id;\n        }\n      }, {\n        key: \"data\",\n        get: function t() {\n          return this._data;\n        }\n      }, {\n        key: \"created\",\n        get: function t() {\n          return this._created;\n        }\n      }, {\n        key: \"request_type\",\n        get: function t() {\n          return this._request_type;\n        }\n      }]), t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.OidcClient = void 0;\n\n    var n = function () {\n      function t(t, e) {\n        for (var r = 0; r < e.length; r++) {\n          var n = e[r];\n          n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(t, n.key, n);\n        }\n      }\n\n      return function (e, r, n) {\n        return r && t(e.prototype, r), n && t(e, n), e;\n      };\n    }(),\n        i = r(0),\n        o = r(5),\n        s = r(12),\n        a = r(8),\n        u = r(34),\n        c = r(35),\n        h = r(36),\n        l = r(13),\n        f = r(9);\n\n    function g(t, e) {\n      if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n    }\n\n    e.OidcClient = function () {\n      function t() {\n        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};\n        g(this, t), e instanceof o.OidcClientSettings ? this._settings = e : this._settings = new o.OidcClientSettings(e);\n      }\n\n      return t.prototype.createSigninRequest = function t() {\n        var e = this,\n            r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n            n = r.response_type,\n            o = r.scope,\n            s = r.redirect_uri,\n            u = r.data,\n            c = r.state,\n            h = r.prompt,\n            l = r.display,\n            f = r.max_age,\n            g = r.ui_locales,\n            d = r.id_token_hint,\n            p = r.login_hint,\n            v = r.acr_values,\n            y = r.resource,\n            m = r.request,\n            _ = r.request_uri,\n            S = r.response_mode,\n            b = r.extraQueryParams,\n            w = r.extraTokenParams,\n            F = r.request_type,\n            E = r.skipUserInfo,\n            x = arguments[1];\n        i.Log.debug(\"OidcClient.createSigninRequest\");\n        var A = this._settings.client_id;\n        n = n || this._settings.response_type, o = o || this._settings.scope, s = s || this._settings.redirect_uri, h = h || this._settings.prompt, l = l || this._settings.display, f = f || this._settings.max_age, g = g || this._settings.ui_locales, v = v || this._settings.acr_values, y = y || this._settings.resource, S = S || this._settings.response_mode, b = b || this._settings.extraQueryParams, w = w || this._settings.extraTokenParams;\n        var k = this._settings.authority;\n        return a.SigninRequest.isCode(n) && \"code\" !== n ? Promise.reject(new Error(\"OpenID Connect hybrid flow is not supported\")) : this._metadataService.getAuthorizationEndpoint().then(function (t) {\n          i.Log.debug(\"OidcClient.createSigninRequest: Received authorization endpoint\", t);\n          var r = new a.SigninRequest({\n            url: t,\n            client_id: A,\n            redirect_uri: s,\n            response_type: n,\n            scope: o,\n            data: u || c,\n            authority: k,\n            prompt: h,\n            display: l,\n            max_age: f,\n            ui_locales: g,\n            id_token_hint: d,\n            login_hint: p,\n            acr_values: v,\n            resource: y,\n            request: m,\n            request_uri: _,\n            extraQueryParams: b,\n            extraTokenParams: w,\n            request_type: F,\n            response_mode: S,\n            client_secret: e._settings.client_secret,\n            skipUserInfo: E\n          }),\n              P = r.state;\n          return (x = x || e._stateStore).set(P.id, P.toStorageString()).then(function () {\n            return r;\n          });\n        });\n      }, t.prototype.readSigninResponseState = function t(e, r) {\n        var n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];\n        i.Log.debug(\"OidcClient.readSigninResponseState\");\n        var o = \"query\" === this._settings.response_mode || !this._settings.response_mode && a.SigninRequest.isCode(this._settings.response_type),\n            s = o ? \"?\" : \"#\",\n            c = new u.SigninResponse(e, s);\n        if (!c.state) return i.Log.error(\"OidcClient.readSigninResponseState: No state in response\"), Promise.reject(new Error(\"No state in response\"));\n        r = r || this._stateStore;\n        var h = n ? r.remove.bind(r) : r.get.bind(r);\n        return h(c.state).then(function (t) {\n          if (!t) throw i.Log.error(\"OidcClient.readSigninResponseState: No matching state found in storage\"), new Error(\"No matching state found in storage\");\n          return {\n            state: l.SigninState.fromStorageString(t),\n            response: c\n          };\n        });\n      }, t.prototype.processSigninResponse = function t(e, r) {\n        var n = this;\n        return i.Log.debug(\"OidcClient.processSigninResponse\"), this.readSigninResponseState(e, r, !0).then(function (t) {\n          var e = t.state,\n              r = t.response;\n          return i.Log.debug(\"OidcClient.processSigninResponse: Received state from storage; validating response\"), n._validator.validateSigninResponse(e, r);\n        });\n      }, t.prototype.createSignoutRequest = function t() {\n        var e = this,\n            r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n            n = r.id_token_hint,\n            o = r.data,\n            s = r.state,\n            a = r.post_logout_redirect_uri,\n            u = r.extraQueryParams,\n            h = r.request_type,\n            l = arguments[1];\n        return i.Log.debug(\"OidcClient.createSignoutRequest\"), a = a || this._settings.post_logout_redirect_uri, u = u || this._settings.extraQueryParams, this._metadataService.getEndSessionEndpoint().then(function (t) {\n          if (!t) throw i.Log.error(\"OidcClient.createSignoutRequest: No end session endpoint url returned\"), new Error(\"no end session endpoint\");\n          i.Log.debug(\"OidcClient.createSignoutRequest: Received end session endpoint\", t);\n          var r = new c.SignoutRequest({\n            url: t,\n            id_token_hint: n,\n            post_logout_redirect_uri: a,\n            data: o || s,\n            extraQueryParams: u,\n            request_type: h\n          }),\n              f = r.state;\n          return f && (i.Log.debug(\"OidcClient.createSignoutRequest: Signout request has state to persist\"), (l = l || e._stateStore).set(f.id, f.toStorageString())), r;\n        });\n      }, t.prototype.readSignoutResponseState = function t(e, r) {\n        var n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];\n        i.Log.debug(\"OidcClient.readSignoutResponseState\");\n        var o = new h.SignoutResponse(e);\n        if (!o.state) return i.Log.debug(\"OidcClient.readSignoutResponseState: No state in response\"), o.error ? (i.Log.warn(\"OidcClient.readSignoutResponseState: Response was error: \", o.error), Promise.reject(new s.ErrorResponse(o))) : Promise.resolve({\n          state: void 0,\n          response: o\n        });\n        var a = o.state;\n        r = r || this._stateStore;\n        var u = n ? r.remove.bind(r) : r.get.bind(r);\n        return u(a).then(function (t) {\n          if (!t) throw i.Log.error(\"OidcClient.readSignoutResponseState: No matching state found in storage\"), new Error(\"No matching state found in storage\");\n          return {\n            state: f.State.fromStorageString(t),\n            response: o\n          };\n        });\n      }, t.prototype.processSignoutResponse = function t(e, r) {\n        var n = this;\n        return i.Log.debug(\"OidcClient.processSignoutResponse\"), this.readSignoutResponseState(e, r, !0).then(function (t) {\n          var e = t.state,\n              r = t.response;\n          return e ? (i.Log.debug(\"OidcClient.processSignoutResponse: Received state from storage; validating response\"), n._validator.validateSignoutResponse(e, r)) : (i.Log.debug(\"OidcClient.processSignoutResponse: No state from storage; skipping validating response\"), r);\n        });\n      }, t.prototype.clearStaleState = function t(e) {\n        return i.Log.debug(\"OidcClient.clearStaleState\"), e = e || this._stateStore, f.State.clearStaleState(e, this.settings.staleStateAge);\n      }, n(t, [{\n        key: \"_stateStore\",\n        get: function t() {\n          return this.settings.stateStore;\n        }\n      }, {\n        key: \"_validator\",\n        get: function t() {\n          return this.settings.validator;\n        }\n      }, {\n        key: \"_metadataService\",\n        get: function t() {\n          return this.settings.metadataService;\n        }\n      }, {\n        key: \"settings\",\n        get: function t() {\n          return this._settings;\n        }\n      }, {\n        key: \"metadataService\",\n        get: function t() {\n          return this._metadataService;\n        }\n      }]), t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.TokenClient = void 0;\n    var n = r(7),\n        i = r(2),\n        o = r(0);\n\n    function s(t, e) {\n      if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n    }\n\n    e.TokenClient = function () {\n      function t(e) {\n        var r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : n.JsonService,\n            a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : i.MetadataService;\n        if (s(this, t), !e) throw o.Log.error(\"TokenClient.ctor: No settings passed\"), new Error(\"settings\");\n        this._settings = e, this._jsonService = new r(), this._metadataService = new a(this._settings);\n      }\n\n      return t.prototype.exchangeCode = function t() {\n        var e = this,\n            r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};\n        (r = Object.assign({}, r)).grant_type = r.grant_type || \"authorization_code\", r.client_id = r.client_id || this._settings.client_id, r.client_secret = r.client_secret || this._settings.client_secret, r.redirect_uri = r.redirect_uri || this._settings.redirect_uri;\n        var n = void 0,\n            i = r._client_authentication || this._settings._client_authentication;\n        return delete r._client_authentication, r.code ? r.redirect_uri ? r.code_verifier ? r.client_id ? r.client_secret || \"client_secret_basic\" != i ? (\"client_secret_basic\" == i && (n = r.client_id + \":\" + r.client_secret, delete r.client_id, delete r.client_secret), this._metadataService.getTokenEndpoint(!1).then(function (t) {\n          return o.Log.debug(\"TokenClient.exchangeCode: Received token endpoint\"), e._jsonService.postForm(t, r, n).then(function (t) {\n            return o.Log.debug(\"TokenClient.exchangeCode: response received\"), t;\n          });\n        })) : (o.Log.error(\"TokenClient.exchangeCode: No client_secret passed\"), Promise.reject(new Error(\"A client_secret is required\"))) : (o.Log.error(\"TokenClient.exchangeCode: No client_id passed\"), Promise.reject(new Error(\"A client_id is required\"))) : (o.Log.error(\"TokenClient.exchangeCode: No code_verifier passed\"), Promise.reject(new Error(\"A code_verifier is required\"))) : (o.Log.error(\"TokenClient.exchangeCode: No redirect_uri passed\"), Promise.reject(new Error(\"A redirect_uri is required\"))) : (o.Log.error(\"TokenClient.exchangeCode: No code passed\"), Promise.reject(new Error(\"A code is required\")));\n      }, t.prototype.exchangeRefreshToken = function t() {\n        var e = this,\n            r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};\n        (r = Object.assign({}, r)).grant_type = r.grant_type || \"refresh_token\", r.client_id = r.client_id || this._settings.client_id, r.client_secret = r.client_secret || this._settings.client_secret;\n        var n = void 0,\n            i = r._client_authentication || this._settings._client_authentication;\n        return delete r._client_authentication, r.refresh_token ? r.client_id ? (\"client_secret_basic\" == i && (n = r.client_id + \":\" + r.client_secret, delete r.client_id, delete r.client_secret), this._metadataService.getTokenEndpoint(!1).then(function (t) {\n          return o.Log.debug(\"TokenClient.exchangeRefreshToken: Received token endpoint\"), e._jsonService.postForm(t, r, n).then(function (t) {\n            return o.Log.debug(\"TokenClient.exchangeRefreshToken: response received\"), t;\n          });\n        })) : (o.Log.error(\"TokenClient.exchangeRefreshToken: No client_id passed\"), Promise.reject(new Error(\"A client_id is required\"))) : (o.Log.error(\"TokenClient.exchangeRefreshToken: No refresh_token passed\"), Promise.reject(new Error(\"A refresh_token is required\")));\n      }, t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.ErrorResponse = void 0;\n    var n = r(0);\n\n    function i(t, e) {\n      if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n    }\n\n    function o(t, e) {\n      if (!t) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      return !e || \"object\" != typeof e && \"function\" != typeof e ? t : e;\n    }\n\n    e.ErrorResponse = function (t) {\n      function e() {\n        var r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n            s = r.error,\n            a = r.error_description,\n            u = r.error_uri,\n            c = r.state,\n            h = r.session_state;\n        if (i(this, e), !s) throw n.Log.error(\"No error passed to ErrorResponse\"), new Error(\"error\");\n        var l = o(this, t.call(this, a || s));\n        return l.name = \"ErrorResponse\", l.error = s, l.error_description = a, l.error_uri = u, l.state = c, l.session_state = h, l;\n      }\n\n      return function r(t, e) {\n        if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof e);\n        t.prototype = Object.create(e && e.prototype, {\n          constructor: {\n            value: t,\n            enumerable: !1,\n            writable: !0,\n            configurable: !0\n          }\n        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);\n      }(e, t), e;\n    }(Error);\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.SigninState = void 0;\n\n    var n = function () {\n      function t(t, e) {\n        for (var r = 0; r < e.length; r++) {\n          var n = e[r];\n          n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(t, n.key, n);\n        }\n      }\n\n      return function (e, r, n) {\n        return r && t(e.prototype, r), n && t(e, n), e;\n      };\n    }(),\n        i = r(0),\n        o = r(9),\n        s = r(4),\n        a = function u(t) {\n      return t && t.__esModule ? t : {\n        default: t\n      };\n    }(r(14));\n\n    function c(t, e) {\n      if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n    }\n\n    function h(t, e) {\n      if (!t) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      return !e || \"object\" != typeof e && \"function\" != typeof e ? t : e;\n    }\n\n    e.SigninState = function (t) {\n      function e() {\n        var r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n            n = r.nonce,\n            i = r.authority,\n            o = r.client_id,\n            u = r.redirect_uri,\n            l = r.code_verifier,\n            f = r.response_mode,\n            g = r.client_secret,\n            d = r.scope,\n            p = r.extraTokenParams,\n            v = r.skipUserInfo;\n        c(this, e);\n        var y = h(this, t.call(this, arguments[0]));\n\n        if (!0 === n ? y._nonce = (0, a.default)() : n && (y._nonce = n), !0 === l ? y._code_verifier = (0, a.default)() + (0, a.default)() + (0, a.default)() : l && (y._code_verifier = l), y.code_verifier) {\n          var m = s.JoseUtil.hashString(y.code_verifier, \"SHA256\");\n          y._code_challenge = s.JoseUtil.hexToBase64Url(m);\n        }\n\n        return y._redirect_uri = u, y._authority = i, y._client_id = o, y._response_mode = f, y._client_secret = g, y._scope = d, y._extraTokenParams = p, y._skipUserInfo = v, y;\n      }\n\n      return function r(t, e) {\n        if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof e);\n        t.prototype = Object.create(e && e.prototype, {\n          constructor: {\n            value: t,\n            enumerable: !1,\n            writable: !0,\n            configurable: !0\n          }\n        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);\n      }(e, t), e.prototype.toStorageString = function t() {\n        return i.Log.debug(\"SigninState.toStorageString\"), JSON.stringify({\n          id: this.id,\n          data: this.data,\n          created: this.created,\n          request_type: this.request_type,\n          nonce: this.nonce,\n          code_verifier: this.code_verifier,\n          redirect_uri: this.redirect_uri,\n          authority: this.authority,\n          client_id: this.client_id,\n          response_mode: this.response_mode,\n          client_secret: this.client_secret,\n          scope: this.scope,\n          extraTokenParams: this.extraTokenParams,\n          skipUserInfo: this.skipUserInfo\n        });\n      }, e.fromStorageString = function t(r) {\n        return i.Log.debug(\"SigninState.fromStorageString\"), new e(JSON.parse(r));\n      }, n(e, [{\n        key: \"nonce\",\n        get: function t() {\n          return this._nonce;\n        }\n      }, {\n        key: \"authority\",\n        get: function t() {\n          return this._authority;\n        }\n      }, {\n        key: \"client_id\",\n        get: function t() {\n          return this._client_id;\n        }\n      }, {\n        key: \"redirect_uri\",\n        get: function t() {\n          return this._redirect_uri;\n        }\n      }, {\n        key: \"code_verifier\",\n        get: function t() {\n          return this._code_verifier;\n        }\n      }, {\n        key: \"code_challenge\",\n        get: function t() {\n          return this._code_challenge;\n        }\n      }, {\n        key: \"response_mode\",\n        get: function t() {\n          return this._response_mode;\n        }\n      }, {\n        key: \"client_secret\",\n        get: function t() {\n          return this._client_secret;\n        }\n      }, {\n        key: \"scope\",\n        get: function t() {\n          return this._scope;\n        }\n      }, {\n        key: \"extraTokenParams\",\n        get: function t() {\n          return this._extraTokenParams;\n        }\n      }, {\n        key: \"skipUserInfo\",\n        get: function t() {\n          return this._skipUserInfo;\n        }\n      }]), e;\n    }(o.State);\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.default = function n() {\n      return (\"undefined\" != i && null !== i && void 0 !== i.getRandomValues ? o : s)().replace(/-/g, \"\");\n    };\n    var i = \"undefined\" != typeof window ? window.crypto || window.msCrypto : null;\n\n    function o() {\n      return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, function (t) {\n        return (t ^ i.getRandomValues(new Uint8Array(1))[0] & 15 >> t / 4).toString(16);\n      });\n    }\n\n    function s() {\n      return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, function (t) {\n        return (t ^ 16 * Math.random() >> t / 4).toString(16);\n      });\n    }\n\n    t.exports = e.default;\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.User = void 0;\n\n    var n = function () {\n      function t(t, e) {\n        for (var r = 0; r < e.length; r++) {\n          var n = e[r];\n          n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(t, n.key, n);\n        }\n      }\n\n      return function (e, r, n) {\n        return r && t(e.prototype, r), n && t(e, n), e;\n      };\n    }(),\n        i = r(0);\n\n    e.User = function () {\n      function t(e) {\n        var r = e.id_token,\n            n = e.session_state,\n            i = e.access_token,\n            o = e.refresh_token,\n            s = e.token_type,\n            a = e.scope,\n            u = e.profile,\n            c = e.expires_at,\n            h = e.state;\n        !function l(t, e) {\n          if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n        }(this, t), this.id_token = r, this.session_state = n, this.access_token = i, this.refresh_token = o, this.token_type = s, this.scope = a, this.profile = u, this.expires_at = c, this.state = h;\n      }\n\n      return t.prototype.toStorageString = function t() {\n        return i.Log.debug(\"User.toStorageString\"), JSON.stringify({\n          id_token: this.id_token,\n          session_state: this.session_state,\n          access_token: this.access_token,\n          refresh_token: this.refresh_token,\n          token_type: this.token_type,\n          scope: this.scope,\n          profile: this.profile,\n          expires_at: this.expires_at\n        });\n      }, t.fromStorageString = function e(r) {\n        return i.Log.debug(\"User.fromStorageString\"), new t(JSON.parse(r));\n      }, n(t, [{\n        key: \"expires_in\",\n        get: function t() {\n          if (this.expires_at) {\n            var e = parseInt(Date.now() / 1e3);\n            return this.expires_at - e;\n          }\n        },\n        set: function t(e) {\n          var r = parseInt(e);\n\n          if (\"number\" == typeof r && r > 0) {\n            var n = parseInt(Date.now() / 1e3);\n            this.expires_at = n + r;\n          }\n        }\n      }, {\n        key: \"expired\",\n        get: function t() {\n          var e = this.expires_in;\n          if (void 0 !== e) return e <= 0;\n        }\n      }, {\n        key: \"scopes\",\n        get: function t() {\n          return (this.scope || \"\").split(\" \");\n        }\n      }]), t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.AccessTokenEvents = void 0;\n    var n = r(0),\n        i = r(46);\n\n    function o(t, e) {\n      if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n    }\n\n    e.AccessTokenEvents = function () {\n      function t() {\n        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n            r = e.accessTokenExpiringNotificationTime,\n            n = void 0 === r ? 60 : r,\n            s = e.accessTokenExpiringTimer,\n            a = void 0 === s ? new i.Timer(\"Access token expiring\") : s,\n            u = e.accessTokenExpiredTimer,\n            c = void 0 === u ? new i.Timer(\"Access token expired\") : u;\n        o(this, t), this._accessTokenExpiringNotificationTime = n, this._accessTokenExpiring = a, this._accessTokenExpired = c;\n      }\n\n      return t.prototype.load = function t(e) {\n        if (e.access_token && void 0 !== e.expires_in) {\n          var r = e.expires_in;\n\n          if (n.Log.debug(\"AccessTokenEvents.load: access token present, remaining duration:\", r), r > 0) {\n            var i = r - this._accessTokenExpiringNotificationTime;\n            i <= 0 && (i = 1), n.Log.debug(\"AccessTokenEvents.load: registering expiring timer in:\", i), this._accessTokenExpiring.init(i);\n          } else n.Log.debug(\"AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration.\"), this._accessTokenExpiring.cancel();\n\n          var o = r + 1;\n          n.Log.debug(\"AccessTokenEvents.load: registering expired timer in:\", o), this._accessTokenExpired.init(o);\n        } else this._accessTokenExpiring.cancel(), this._accessTokenExpired.cancel();\n      }, t.prototype.unload = function t() {\n        n.Log.debug(\"AccessTokenEvents.unload: canceling existing access token timers\"), this._accessTokenExpiring.cancel(), this._accessTokenExpired.cancel();\n      }, t.prototype.addAccessTokenExpiring = function t(e) {\n        this._accessTokenExpiring.addHandler(e);\n      }, t.prototype.removeAccessTokenExpiring = function t(e) {\n        this._accessTokenExpiring.removeHandler(e);\n      }, t.prototype.addAccessTokenExpired = function t(e) {\n        this._accessTokenExpired.addHandler(e);\n      }, t.prototype.removeAccessTokenExpired = function t(e) {\n        this._accessTokenExpired.removeHandler(e);\n      }, t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.Event = void 0;\n    var n = r(0);\n\n    e.Event = function () {\n      function t(e) {\n        !function r(t, e) {\n          if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n        }(this, t), this._name = e, this._callbacks = [];\n      }\n\n      return t.prototype.addHandler = function t(e) {\n        this._callbacks.push(e);\n      }, t.prototype.removeHandler = function t(e) {\n        var r = this._callbacks.findIndex(function (t) {\n          return t === e;\n        });\n\n        r >= 0 && this._callbacks.splice(r, 1);\n      }, t.prototype.raise = function t() {\n        n.Log.debug(\"Event: Raising event: \" + this._name);\n\n        for (var e = 0; e < this._callbacks.length; e++) {\n          var r;\n\n          (r = this._callbacks)[e].apply(r, arguments);\n        }\n      }, t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.SessionMonitor = void 0;\n\n    var n = function () {\n      function t(t, e) {\n        for (var r = 0; r < e.length; r++) {\n          var n = e[r];\n          n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(t, n.key, n);\n        }\n      }\n\n      return function (e, r, n) {\n        return r && t(e.prototype, r), n && t(e, n), e;\n      };\n    }(),\n        i = r(0),\n        o = r(19),\n        s = r(1);\n\n    function a(t, e) {\n      if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n    }\n\n    e.SessionMonitor = function () {\n      function t(e) {\n        var r = this,\n            n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : o.CheckSessionIFrame,\n            u = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : s.Global.timer;\n        if (a(this, t), !e) throw i.Log.error(\"SessionMonitor.ctor: No user manager passed to SessionMonitor\"), new Error(\"userManager\");\n        this._userManager = e, this._CheckSessionIFrameCtor = n, this._timer = u, this._userManager.events.addUserLoaded(this._start.bind(this)), this._userManager.events.addUserUnloaded(this._stop.bind(this)), Promise.resolve(this._userManager.getUser().then(function (t) {\n          t ? r._start(t) : r._settings.monitorAnonymousSession && r._userManager.querySessionStatus().then(function (t) {\n            var e = {\n              session_state: t.session_state\n            };\n            t.sub && t.sid && (e.profile = {\n              sub: t.sub,\n              sid: t.sid\n            }), r._start(e);\n          }).catch(function (t) {\n            i.Log.error(\"SessionMonitor ctor: error from querySessionStatus:\", t.message);\n          });\n        }).catch(function (t) {\n          i.Log.error(\"SessionMonitor ctor: error from getUser:\", t.message);\n        }));\n      }\n\n      return t.prototype._start = function t(e) {\n        var r = this,\n            n = e.session_state;\n        n && (e.profile ? (this._sub = e.profile.sub, this._sid = e.profile.sid, i.Log.debug(\"SessionMonitor._start: session_state:\", n, \", sub:\", this._sub)) : (this._sub = void 0, this._sid = void 0, i.Log.debug(\"SessionMonitor._start: session_state:\", n, \", anonymous user\")), this._checkSessionIFrame ? this._checkSessionIFrame.start(n) : this._metadataService.getCheckSessionIframe().then(function (t) {\n          if (t) {\n            i.Log.debug(\"SessionMonitor._start: Initializing check session iframe\");\n            var e = r._client_id,\n                o = r._checkSessionInterval,\n                s = r._stopCheckSessionOnError;\n            r._checkSessionIFrame = new r._CheckSessionIFrameCtor(r._callback.bind(r), e, t, o, s), r._checkSessionIFrame.load().then(function () {\n              r._checkSessionIFrame.start(n);\n            });\n          } else i.Log.warn(\"SessionMonitor._start: No check session iframe found in the metadata\");\n        }).catch(function (t) {\n          i.Log.error(\"SessionMonitor._start: Error from getCheckSessionIframe:\", t.message);\n        }));\n      }, t.prototype._stop = function t() {\n        var e = this;\n        if (this._sub = void 0, this._sid = void 0, this._checkSessionIFrame && (i.Log.debug(\"SessionMonitor._stop\"), this._checkSessionIFrame.stop()), this._settings.monitorAnonymousSession) var r = this._timer.setInterval(function () {\n          e._timer.clearInterval(r), e._userManager.querySessionStatus().then(function (t) {\n            var r = {\n              session_state: t.session_state\n            };\n            t.sub && t.sid && (r.profile = {\n              sub: t.sub,\n              sid: t.sid\n            }), e._start(r);\n          }).catch(function (t) {\n            i.Log.error(\"SessionMonitor: error from querySessionStatus:\", t.message);\n          });\n        }, 1e3);\n      }, t.prototype._callback = function t() {\n        var e = this;\n\n        this._userManager.querySessionStatus().then(function (t) {\n          var r = !0;\n          t ? t.sub === e._sub ? (r = !1, e._checkSessionIFrame.start(t.session_state), t.sid === e._sid ? i.Log.debug(\"SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:\", t.session_state) : (i.Log.debug(\"SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:\", t.session_state), e._userManager.events._raiseUserSessionChanged())) : i.Log.debug(\"SessionMonitor._callback: Different subject signed into OP:\", t.sub) : i.Log.debug(\"SessionMonitor._callback: Subject no longer signed into OP\"), r && (e._sub ? (i.Log.debug(\"SessionMonitor._callback: SessionMonitor._callback; raising signed out event\"), e._userManager.events._raiseUserSignedOut()) : (i.Log.debug(\"SessionMonitor._callback: SessionMonitor._callback; raising signed in event\"), e._userManager.events._raiseUserSignedIn()));\n        }).catch(function (t) {\n          e._sub && (i.Log.debug(\"SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event\", t.message), e._userManager.events._raiseUserSignedOut());\n        });\n      }, n(t, [{\n        key: \"_settings\",\n        get: function t() {\n          return this._userManager.settings;\n        }\n      }, {\n        key: \"_metadataService\",\n        get: function t() {\n          return this._userManager.metadataService;\n        }\n      }, {\n        key: \"_client_id\",\n        get: function t() {\n          return this._settings.client_id;\n        }\n      }, {\n        key: \"_checkSessionInterval\",\n        get: function t() {\n          return this._settings.checkSessionInterval;\n        }\n      }, {\n        key: \"_stopCheckSessionOnError\",\n        get: function t() {\n          return this._settings.stopCheckSessionOnError;\n        }\n      }]), t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.CheckSessionIFrame = void 0;\n    var n = r(0);\n\n    function i(t, e) {\n      if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n    }\n\n    e.CheckSessionIFrame = function () {\n      function t(e, r, n, o) {\n        var s = !(arguments.length > 4 && void 0 !== arguments[4]) || arguments[4];\n        i(this, t), this._callback = e, this._client_id = r, this._url = n, this._interval = o || 2e3, this._stopOnError = s;\n        var a = n.indexOf(\"/\", n.indexOf(\"//\") + 2);\n        this._frame_origin = n.substr(0, a), this._frame = window.document.createElement(\"iframe\"), this._frame.style.visibility = \"hidden\", this._frame.style.position = \"absolute\", this._frame.style.display = \"none\", this._frame.width = 0, this._frame.height = 0, this._frame.src = n;\n      }\n\n      return t.prototype.load = function t() {\n        var e = this;\n        return new Promise(function (t) {\n          e._frame.onload = function () {\n            t();\n          }, window.document.body.appendChild(e._frame), e._boundMessageEvent = e._message.bind(e), window.addEventListener(\"message\", e._boundMessageEvent, !1);\n        });\n      }, t.prototype._message = function t(e) {\n        e.origin === this._frame_origin && e.source === this._frame.contentWindow && (\"error\" === e.data ? (n.Log.error(\"CheckSessionIFrame: error message from check session op iframe\"), this._stopOnError && this.stop()) : \"changed\" === e.data ? (n.Log.debug(\"CheckSessionIFrame: changed message from check session op iframe\"), this.stop(), this._callback()) : n.Log.debug(\"CheckSessionIFrame: \" + e.data + \" message from check session op iframe\"));\n      }, t.prototype.start = function t(e) {\n        var r = this;\n\n        if (this._session_state !== e) {\n          n.Log.debug(\"CheckSessionIFrame.start\"), this.stop(), this._session_state = e;\n\n          var i = function t() {\n            r._frame.contentWindow.postMessage(r._client_id + \" \" + r._session_state, r._frame_origin);\n          };\n\n          i(), this._timer = window.setInterval(i, this._interval);\n        }\n      }, t.prototype.stop = function t() {\n        this._session_state = null, this._timer && (n.Log.debug(\"CheckSessionIFrame.stop\"), window.clearInterval(this._timer), this._timer = null);\n      }, t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.TokenRevocationClient = void 0;\n    var n = r(0),\n        i = r(2),\n        o = r(1);\n\n    function s(t, e) {\n      if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n    }\n\n    var a = \"access_token\",\n        u = \"refresh_token\";\n\n    e.TokenRevocationClient = function () {\n      function t(e) {\n        var r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : o.Global.XMLHttpRequest,\n            a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : i.MetadataService;\n        if (s(this, t), !e) throw n.Log.error(\"TokenRevocationClient.ctor: No settings provided\"), new Error(\"No settings provided.\");\n        this._settings = e, this._XMLHttpRequestCtor = r, this._metadataService = new a(this._settings);\n      }\n\n      return t.prototype.revoke = function t(e, r) {\n        var i = this,\n            o = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : \"access_token\";\n        if (!e) throw n.Log.error(\"TokenRevocationClient.revoke: No token provided\"), new Error(\"No token provided.\");\n        if (o !== a && o != u) throw n.Log.error(\"TokenRevocationClient.revoke: Invalid token type\"), new Error(\"Invalid token type.\");\n        return this._metadataService.getRevocationEndpoint().then(function (t) {\n          if (t) {\n            n.Log.debug(\"TokenRevocationClient.revoke: Revoking \" + o);\n            var s = i._settings.client_id,\n                a = i._settings.client_secret;\n            return i._revoke(t, s, a, e, o);\n          }\n\n          if (r) throw n.Log.error(\"TokenRevocationClient.revoke: Revocation not supported\"), new Error(\"Revocation not supported\");\n        });\n      }, t.prototype._revoke = function t(e, r, i, o, s) {\n        var a = this;\n        return new Promise(function (t, u) {\n          var c = new a._XMLHttpRequestCtor();\n          c.open(\"POST\", e), c.onload = function () {\n            n.Log.debug(\"TokenRevocationClient.revoke: HTTP response received, status\", c.status), 200 === c.status ? t() : u(Error(c.statusText + \" (\" + c.status + \")\"));\n          }, c.onerror = function () {\n            n.Log.debug(\"TokenRevocationClient.revoke: Network Error.\"), u(\"Network Error\");\n          };\n          var h = \"client_id=\" + encodeURIComponent(r);\n          i && (h += \"&client_secret=\" + encodeURIComponent(i)), h += \"&token_type_hint=\" + encodeURIComponent(s), h += \"&token=\" + encodeURIComponent(o), c.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\"), c.send(h);\n        });\n      }, t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.CordovaPopupWindow = void 0;\n\n    var n = function () {\n      function t(t, e) {\n        for (var r = 0; r < e.length; r++) {\n          var n = e[r];\n          n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(t, n.key, n);\n        }\n      }\n\n      return function (e, r, n) {\n        return r && t(e.prototype, r), n && t(e, n), e;\n      };\n    }(),\n        i = r(0);\n\n    e.CordovaPopupWindow = function () {\n      function t(e) {\n        var r = this;\n        !function n(t, e) {\n          if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n        }(this, t), this._promise = new Promise(function (t, e) {\n          r._resolve = t, r._reject = e;\n        }), this.features = e.popupWindowFeatures || \"location=no,toolbar=no,zoom=no\", this.target = e.popupWindowTarget || \"_blank\", this.redirect_uri = e.startUrl, i.Log.debug(\"CordovaPopupWindow.ctor: redirect_uri: \" + this.redirect_uri);\n      }\n\n      return t.prototype._isInAppBrowserInstalled = function t(e) {\n        return [\"cordova-plugin-inappbrowser\", \"cordova-plugin-inappbrowser.inappbrowser\", \"org.apache.cordova.inappbrowser\"].some(function (t) {\n          return e.hasOwnProperty(t);\n        });\n      }, t.prototype.navigate = function t(e) {\n        if (e && e.url) {\n          if (!window.cordova) return this._error(\"cordova is undefined\");\n\n          var r = window.cordova.require(\"cordova/plugin_list\").metadata;\n\n          if (!1 === this._isInAppBrowserInstalled(r)) return this._error(\"InAppBrowser plugin not found\");\n          this._popup = cordova.InAppBrowser.open(e.url, this.target, this.features), this._popup ? (i.Log.debug(\"CordovaPopupWindow.navigate: popup successfully created\"), this._exitCallbackEvent = this._exitCallback.bind(this), this._loadStartCallbackEvent = this._loadStartCallback.bind(this), this._popup.addEventListener(\"exit\", this._exitCallbackEvent, !1), this._popup.addEventListener(\"loadstart\", this._loadStartCallbackEvent, !1)) : this._error(\"Error opening popup window\");\n        } else this._error(\"No url provided\");\n\n        return this.promise;\n      }, t.prototype._loadStartCallback = function t(e) {\n        0 === e.url.indexOf(this.redirect_uri) && this._success({\n          url: e.url\n        });\n      }, t.prototype._exitCallback = function t(e) {\n        this._error(e);\n      }, t.prototype._success = function t(e) {\n        this._cleanup(), i.Log.debug(\"CordovaPopupWindow: Successful response from cordova popup window\"), this._resolve(e);\n      }, t.prototype._error = function t(e) {\n        this._cleanup(), i.Log.error(e), this._reject(new Error(e));\n      }, t.prototype.close = function t() {\n        this._cleanup();\n      }, t.prototype._cleanup = function t() {\n        this._popup && (i.Log.debug(\"CordovaPopupWindow: cleaning up popup\"), this._popup.removeEventListener(\"exit\", this._exitCallbackEvent, !1), this._popup.removeEventListener(\"loadstart\", this._loadStartCallbackEvent, !1), this._popup.close()), this._popup = null;\n      }, n(t, [{\n        key: \"promise\",\n        get: function t() {\n          return this._promise;\n        }\n      }]), t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    });\n    var n = r(0),\n        i = r(10),\n        o = r(5),\n        s = r(6),\n        a = r(37),\n        u = r(38),\n        c = r(16),\n        h = r(2),\n        l = r(48),\n        f = r(49),\n        g = r(19),\n        d = r(20),\n        p = r(18),\n        v = r(1),\n        y = r(15),\n        m = r(50);\n    e.default = {\n      Version: m.Version,\n      Log: n.Log,\n      OidcClient: i.OidcClient,\n      OidcClientSettings: o.OidcClientSettings,\n      WebStorageStateStore: s.WebStorageStateStore,\n      InMemoryWebStorage: a.InMemoryWebStorage,\n      UserManager: u.UserManager,\n      AccessTokenEvents: c.AccessTokenEvents,\n      MetadataService: h.MetadataService,\n      CordovaPopupNavigator: l.CordovaPopupNavigator,\n      CordovaIFrameNavigator: f.CordovaIFrameNavigator,\n      CheckSessionIFrame: g.CheckSessionIFrame,\n      TokenRevocationClient: d.TokenRevocationClient,\n      SessionMonitor: p.SessionMonitor,\n      Global: v.Global,\n      User: y.User\n    }, t.exports = e.default;\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    });\n\n    e.ClockService = function () {\n      function t() {\n        !function e(t, r) {\n          if (!(t instanceof r)) throw new TypeError(\"Cannot call a class as a function\");\n        }(this, t);\n      }\n\n      return t.prototype.getEpochTime = function t() {\n        return Promise.resolve(Date.now() / 1e3 | 0);\n      }, t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.ResponseValidator = void 0;\n    var n = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (t) {\n      return typeof t;\n    } : function (t) {\n      return t && \"function\" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? \"symbol\" : typeof t;\n    },\n        i = r(0),\n        o = r(2),\n        s = r(25),\n        a = r(11),\n        u = r(12),\n        c = r(4);\n\n    function h(t, e) {\n      if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n    }\n\n    var l = [\"nonce\", \"at_hash\", \"iat\", \"nbf\", \"exp\", \"aud\", \"iss\", \"c_hash\"];\n\n    e.ResponseValidator = function () {\n      function t(e) {\n        var r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : o.MetadataService,\n            n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : s.UserInfoService,\n            u = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : c.JoseUtil,\n            l = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : a.TokenClient;\n        if (h(this, t), !e) throw i.Log.error(\"ResponseValidator.ctor: No settings passed to ResponseValidator\"), new Error(\"settings\");\n        this._settings = e, this._metadataService = new r(this._settings), this._userInfoService = new n(this._settings), this._joseUtil = u, this._tokenClient = new l(this._settings);\n      }\n\n      return t.prototype.validateSigninResponse = function t(e, r) {\n        var n = this;\n        return i.Log.debug(\"ResponseValidator.validateSigninResponse\"), this._processSigninParams(e, r).then(function (t) {\n          return i.Log.debug(\"ResponseValidator.validateSigninResponse: state processed\"), n._validateTokens(e, t).then(function (t) {\n            return i.Log.debug(\"ResponseValidator.validateSigninResponse: tokens validated\"), n._processClaims(e, t).then(function (t) {\n              return i.Log.debug(\"ResponseValidator.validateSigninResponse: claims processed\"), t;\n            });\n          });\n        });\n      }, t.prototype.validateSignoutResponse = function t(e, r) {\n        return e.id !== r.state ? (i.Log.error(\"ResponseValidator.validateSignoutResponse: State does not match\"), Promise.reject(new Error(\"State does not match\"))) : (i.Log.debug(\"ResponseValidator.validateSignoutResponse: state validated\"), r.state = e.data, r.error ? (i.Log.warn(\"ResponseValidator.validateSignoutResponse: Response was error\", r.error), Promise.reject(new u.ErrorResponse(r))) : Promise.resolve(r));\n      }, t.prototype._processSigninParams = function t(e, r) {\n        if (e.id !== r.state) return i.Log.error(\"ResponseValidator._processSigninParams: State does not match\"), Promise.reject(new Error(\"State does not match\"));\n        if (!e.client_id) return i.Log.error(\"ResponseValidator._processSigninParams: No client_id on state\"), Promise.reject(new Error(\"No client_id on state\"));\n        if (!e.authority) return i.Log.error(\"ResponseValidator._processSigninParams: No authority on state\"), Promise.reject(new Error(\"No authority on state\"));\n\n        if (this._settings.authority) {\n          if (this._settings.authority && this._settings.authority !== e.authority) return i.Log.error(\"ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state\"), Promise.reject(new Error(\"authority mismatch on settings vs. signin state\"));\n        } else this._settings.authority = e.authority;\n\n        if (this._settings.client_id) {\n          if (this._settings.client_id && this._settings.client_id !== e.client_id) return i.Log.error(\"ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state\"), Promise.reject(new Error(\"client_id mismatch on settings vs. signin state\"));\n        } else this._settings.client_id = e.client_id;\n\n        return i.Log.debug(\"ResponseValidator._processSigninParams: state validated\"), r.state = e.data, r.error ? (i.Log.warn(\"ResponseValidator._processSigninParams: Response was error\", r.error), Promise.reject(new u.ErrorResponse(r))) : e.nonce && !r.id_token ? (i.Log.error(\"ResponseValidator._processSigninParams: Expecting id_token in response\"), Promise.reject(new Error(\"No id_token in response\"))) : !e.nonce && r.id_token ? (i.Log.error(\"ResponseValidator._processSigninParams: Not expecting id_token in response\"), Promise.reject(new Error(\"Unexpected id_token in response\"))) : e.code_verifier && !r.code ? (i.Log.error(\"ResponseValidator._processSigninParams: Expecting code in response\"), Promise.reject(new Error(\"No code in response\"))) : !e.code_verifier && r.code ? (i.Log.error(\"ResponseValidator._processSigninParams: Not expecting code in response\"), Promise.reject(new Error(\"Unexpected code in response\"))) : (r.scope || (r.scope = e.scope), Promise.resolve(r));\n      }, t.prototype._processClaims = function t(e, r) {\n        var n = this;\n\n        if (r.isOpenIdConnect) {\n          if (i.Log.debug(\"ResponseValidator._processClaims: response is OIDC, processing claims\"), r.profile = this._filterProtocolClaims(r.profile), !0 !== e.skipUserInfo && this._settings.loadUserInfo && r.access_token) return i.Log.debug(\"ResponseValidator._processClaims: loading user info\"), this._userInfoService.getClaims(r.access_token).then(function (t) {\n            return i.Log.debug(\"ResponseValidator._processClaims: user info claims received from user info endpoint\"), t.sub !== r.profile.sub ? (i.Log.error(\"ResponseValidator._processClaims: sub from user info endpoint does not match sub in id_token\"), Promise.reject(new Error(\"sub from user info endpoint does not match sub in id_token\"))) : (r.profile = n._mergeClaims(r.profile, t), i.Log.debug(\"ResponseValidator._processClaims: user info claims received, updated profile:\", r.profile), r);\n          });\n          i.Log.debug(\"ResponseValidator._processClaims: not loading user info\");\n        } else i.Log.debug(\"ResponseValidator._processClaims: response is not OIDC, not processing claims\");\n\n        return Promise.resolve(r);\n      }, t.prototype._mergeClaims = function t(e, r) {\n        var i = Object.assign({}, e);\n\n        for (var o in r) {\n          var s = r[o];\n          Array.isArray(s) || (s = [s]);\n\n          for (var a = 0; a < s.length; a++) {\n            var u = s[a];\n            i[o] ? Array.isArray(i[o]) ? i[o].indexOf(u) < 0 && i[o].push(u) : i[o] !== u && (\"object\" === (void 0 === u ? \"undefined\" : n(u)) && this._settings.mergeClaims ? i[o] = this._mergeClaims(i[o], u) : i[o] = [i[o], u]) : i[o] = u;\n          }\n        }\n\n        return i;\n      }, t.prototype._filterProtocolClaims = function t(e) {\n        i.Log.debug(\"ResponseValidator._filterProtocolClaims, incoming claims:\", e);\n        var r = Object.assign({}, e);\n        return this._settings._filterProtocolClaims ? (l.forEach(function (t) {\n          delete r[t];\n        }), i.Log.debug(\"ResponseValidator._filterProtocolClaims: protocol claims filtered\", r)) : i.Log.debug(\"ResponseValidator._filterProtocolClaims: protocol claims not filtered\"), r;\n      }, t.prototype._validateTokens = function t(e, r) {\n        return r.code ? (i.Log.debug(\"ResponseValidator._validateTokens: Validating code\"), this._processCode(e, r)) : r.id_token ? r.access_token ? (i.Log.debug(\"ResponseValidator._validateTokens: Validating id_token and access_token\"), this._validateIdTokenAndAccessToken(e, r)) : (i.Log.debug(\"ResponseValidator._validateTokens: Validating id_token\"), this._validateIdToken(e, r)) : (i.Log.debug(\"ResponseValidator._validateTokens: No code to process or id_token to validate\"), Promise.resolve(r));\n      }, t.prototype._processCode = function t(e, r) {\n        var o = this,\n            s = {\n          client_id: e.client_id,\n          client_secret: e.client_secret,\n          code: r.code,\n          redirect_uri: e.redirect_uri,\n          code_verifier: e.code_verifier\n        };\n        return e.extraTokenParams && \"object\" === n(e.extraTokenParams) && Object.assign(s, e.extraTokenParams), this._tokenClient.exchangeCode(s).then(function (t) {\n          for (var n in t) r[n] = t[n];\n\n          return r.id_token ? (i.Log.debug(\"ResponseValidator._processCode: token response successful, processing id_token\"), o._validateIdTokenAttributes(e, r)) : (i.Log.debug(\"ResponseValidator._processCode: token response successful, returning response\"), r);\n        });\n      }, t.prototype._validateIdTokenAttributes = function t(e, r) {\n        var n = this;\n        return this._metadataService.getIssuer().then(function (t) {\n          var o = e.client_id,\n              s = n._settings.clockSkew;\n          return i.Log.debug(\"ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: \", s), n._settings.getEpochTime().then(function (a) {\n            return n._joseUtil.validateJwtAttributes(r.id_token, t, o, s, a).then(function (t) {\n              return e.nonce && e.nonce !== t.nonce ? (i.Log.error(\"ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token\"), Promise.reject(new Error(\"Invalid nonce in id_token\"))) : t.sub ? (r.profile = t, r) : (i.Log.error(\"ResponseValidator._validateIdTokenAttributes: No sub present in id_token\"), Promise.reject(new Error(\"No sub present in id_token\")));\n            });\n          });\n        });\n      }, t.prototype._validateIdTokenAndAccessToken = function t(e, r) {\n        var n = this;\n        return this._validateIdToken(e, r).then(function (t) {\n          return n._validateAccessToken(t);\n        });\n      }, t.prototype._getSigningKeyForJwt = function t(e) {\n        var r = this;\n        return this._metadataService.getSigningKeys().then(function (t) {\n          var n = e.header.kid;\n          if (!t) return i.Log.error(\"ResponseValidator._validateIdToken: No signing keys from metadata\"), Promise.reject(new Error(\"No signing keys from metadata\"));\n          i.Log.debug(\"ResponseValidator._validateIdToken: Received signing keys\");\n          var o = void 0;\n          if (n) o = t.filter(function (t) {\n            return t.kid === n;\n          })[0];else {\n            if ((t = r._filterByAlg(t, e.header.alg)).length > 1) return i.Log.error(\"ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata\"), Promise.reject(new Error(\"No kid found in id_token and more than one key found in metadata\"));\n            o = t[0];\n          }\n          return Promise.resolve(o);\n        });\n      }, t.prototype._getSigningKeyForJwtWithSingleRetry = function t(e) {\n        var r = this;\n        return this._getSigningKeyForJwt(e).then(function (t) {\n          return t ? Promise.resolve(t) : (r._metadataService.resetSigningKeys(), r._getSigningKeyForJwt(e));\n        });\n      }, t.prototype._validateIdToken = function t(e, r) {\n        var n = this;\n        if (!e.nonce) return i.Log.error(\"ResponseValidator._validateIdToken: No nonce on state\"), Promise.reject(new Error(\"No nonce on state\"));\n\n        var o = this._joseUtil.parseJwt(r.id_token);\n\n        return o && o.header && o.payload ? e.nonce !== o.payload.nonce ? (i.Log.error(\"ResponseValidator._validateIdToken: Invalid nonce in id_token\"), Promise.reject(new Error(\"Invalid nonce in id_token\"))) : this._metadataService.getIssuer().then(function (t) {\n          return i.Log.debug(\"ResponseValidator._validateIdToken: Received issuer\"), n._getSigningKeyForJwtWithSingleRetry(o).then(function (s) {\n            if (!s) return i.Log.error(\"ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys\"), Promise.reject(new Error(\"No key matching kid or alg found in signing keys\"));\n            var a = e.client_id,\n                u = n._settings.clockSkew;\n            return i.Log.debug(\"ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: \", u), n._joseUtil.validateJwt(r.id_token, s, t, a, u).then(function () {\n              return i.Log.debug(\"ResponseValidator._validateIdToken: JWT validation successful\"), o.payload.sub ? (r.profile = o.payload, r) : (i.Log.error(\"ResponseValidator._validateIdToken: No sub present in id_token\"), Promise.reject(new Error(\"No sub present in id_token\")));\n            });\n          });\n        }) : (i.Log.error(\"ResponseValidator._validateIdToken: Failed to parse id_token\", o), Promise.reject(new Error(\"Failed to parse id_token\")));\n      }, t.prototype._filterByAlg = function t(e, r) {\n        var n = null;\n        if (r.startsWith(\"RS\")) n = \"RSA\";else if (r.startsWith(\"PS\")) n = \"PS\";else {\n          if (!r.startsWith(\"ES\")) return i.Log.debug(\"ResponseValidator._filterByAlg: alg not supported: \", r), [];\n          n = \"EC\";\n        }\n        return i.Log.debug(\"ResponseValidator._filterByAlg: Looking for keys that match kty: \", n), e = e.filter(function (t) {\n          return t.kty === n;\n        }), i.Log.debug(\"ResponseValidator._filterByAlg: Number of keys that match kty: \", n, e.length), e;\n      }, t.prototype._validateAccessToken = function t(e) {\n        if (!e.profile) return i.Log.error(\"ResponseValidator._validateAccessToken: No profile loaded from id_token\"), Promise.reject(new Error(\"No profile loaded from id_token\"));\n        if (!e.profile.at_hash) return i.Log.error(\"ResponseValidator._validateAccessToken: No at_hash in id_token\"), Promise.reject(new Error(\"No at_hash in id_token\"));\n        if (!e.id_token) return i.Log.error(\"ResponseValidator._validateAccessToken: No id_token\"), Promise.reject(new Error(\"No id_token\"));\n\n        var r = this._joseUtil.parseJwt(e.id_token);\n\n        if (!r || !r.header) return i.Log.error(\"ResponseValidator._validateAccessToken: Failed to parse id_token\", r), Promise.reject(new Error(\"Failed to parse id_token\"));\n        var n = r.header.alg;\n        if (!n || 5 !== n.length) return i.Log.error(\"ResponseValidator._validateAccessToken: Unsupported alg:\", n), Promise.reject(new Error(\"Unsupported alg: \" + n));\n        var o = n.substr(2, 3);\n        if (!o) return i.Log.error(\"ResponseValidator._validateAccessToken: Unsupported alg:\", n, o), Promise.reject(new Error(\"Unsupported alg: \" + n));\n        if (256 !== (o = parseInt(o)) && 384 !== o && 512 !== o) return i.Log.error(\"ResponseValidator._validateAccessToken: Unsupported alg:\", n, o), Promise.reject(new Error(\"Unsupported alg: \" + n));\n\n        var s = \"sha\" + o,\n            a = this._joseUtil.hashString(e.access_token, s);\n\n        if (!a) return i.Log.error(\"ResponseValidator._validateAccessToken: access_token hash failed:\", s), Promise.reject(new Error(\"Failed to validate at_hash\"));\n\n        var u = a.substr(0, a.length / 2),\n            c = this._joseUtil.hexToBase64Url(u);\n\n        return c !== e.profile.at_hash ? (i.Log.error(\"ResponseValidator._validateAccessToken: Failed to validate at_hash\", c, e.profile.at_hash), Promise.reject(new Error(\"Failed to validate at_hash\"))) : (i.Log.debug(\"ResponseValidator._validateAccessToken: success\"), Promise.resolve(e));\n      }, t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.UserInfoService = void 0;\n    var n = r(7),\n        i = r(2),\n        o = r(0),\n        s = r(4);\n\n    function a(t, e) {\n      if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n    }\n\n    e.UserInfoService = function () {\n      function t(e) {\n        var r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : n.JsonService,\n            u = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : i.MetadataService,\n            c = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : s.JoseUtil;\n        if (a(this, t), !e) throw o.Log.error(\"UserInfoService.ctor: No settings passed\"), new Error(\"settings\");\n        this._settings = e, this._jsonService = new r(void 0, void 0, this._getClaimsFromJwt.bind(this)), this._metadataService = new u(this._settings), this._joseUtil = c;\n      }\n\n      return t.prototype.getClaims = function t(e) {\n        var r = this;\n        return e ? this._metadataService.getUserInfoEndpoint().then(function (t) {\n          return o.Log.debug(\"UserInfoService.getClaims: received userinfo url\", t), r._jsonService.getJson(t, e).then(function (t) {\n            return o.Log.debug(\"UserInfoService.getClaims: claims received\", t), t;\n          });\n        }) : (o.Log.error(\"UserInfoService.getClaims: No token passed\"), Promise.reject(new Error(\"A token is required\")));\n      }, t.prototype._getClaimsFromJwt = function t(e) {\n        var r = this;\n\n        try {\n          var n = this._joseUtil.parseJwt(e.responseText);\n\n          if (!n || !n.header || !n.payload) return o.Log.error(\"UserInfoService._getClaimsFromJwt: Failed to parse JWT\", n), Promise.reject(new Error(\"Failed to parse id_token\"));\n          var i = n.header.kid,\n              s = void 0;\n\n          switch (this._settings.userInfoJwtIssuer) {\n            case \"OP\":\n              s = this._metadataService.getIssuer();\n              break;\n\n            case \"ANY\":\n              s = Promise.resolve(n.payload.iss);\n              break;\n\n            default:\n              s = Promise.resolve(this._settings.userInfoJwtIssuer);\n          }\n\n          return s.then(function (t) {\n            return o.Log.debug(\"UserInfoService._getClaimsFromJwt: Received issuer:\" + t), r._metadataService.getSigningKeys().then(function (s) {\n              if (!s) return o.Log.error(\"UserInfoService._getClaimsFromJwt: No signing keys from metadata\"), Promise.reject(new Error(\"No signing keys from metadata\"));\n              o.Log.debug(\"UserInfoService._getClaimsFromJwt: Received signing keys\");\n              var a = void 0;\n              if (i) a = s.filter(function (t) {\n                return t.kid === i;\n              })[0];else {\n                if ((s = r._filterByAlg(s, n.header.alg)).length > 1) return o.Log.error(\"UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata\"), Promise.reject(new Error(\"No kid found in id_token and more than one key found in metadata\"));\n                a = s[0];\n              }\n              if (!a) return o.Log.error(\"UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys\"), Promise.reject(new Error(\"No key matching kid or alg found in signing keys\"));\n              var u = r._settings.client_id,\n                  c = r._settings.clockSkew;\n              return o.Log.debug(\"UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: \", c), r._joseUtil.validateJwt(e.responseText, a, t, u, c, void 0, !0).then(function () {\n                return o.Log.debug(\"UserInfoService._getClaimsFromJwt: JWT validation successful\"), n.payload;\n              });\n            });\n          });\n        } catch (t) {\n          return o.Log.error(\"UserInfoService._getClaimsFromJwt: Error parsing JWT response\", t.message), void reject(t);\n        }\n      }, t.prototype._filterByAlg = function t(e, r) {\n        var n = null;\n        if (r.startsWith(\"RS\")) n = \"RSA\";else if (r.startsWith(\"PS\")) n = \"PS\";else {\n          if (!r.startsWith(\"ES\")) return o.Log.debug(\"UserInfoService._filterByAlg: alg not supported: \", r), [];\n          n = \"EC\";\n        }\n        return o.Log.debug(\"UserInfoService._filterByAlg: Looking for keys that match kty: \", n), e = e.filter(function (t) {\n          return t.kty === n;\n        }), o.Log.debug(\"UserInfoService._filterByAlg: Number of keys that match kty: \", n, e.length), e;\n      }, t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.AllowedSigningAlgs = e.b64tohex = e.hextob64u = e.crypto = e.X509 = e.KeyUtil = e.jws = void 0;\n    var n = r(27);\n    e.jws = n.jws, e.KeyUtil = n.KEYUTIL, e.X509 = n.X509, e.crypto = n.crypto, e.hextob64u = n.hextob64u, e.b64tohex = n.b64tohex, e.AllowedSigningAlgs = [\"RS256\", \"RS384\", \"RS512\", \"PS256\", \"PS384\", \"PS512\", \"ES256\", \"ES384\", \"ES512\"];\n  }, function (t, e, r) {\n    \"use strict\";\n\n    (function (t) {\n      Object.defineProperty(e, \"__esModule\", {\n        value: !0\n      });\n      var r = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (t) {\n        return typeof t;\n      } : function (t) {\n        return t && \"function\" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? \"symbol\" : typeof t;\n      },\n          n = {\n        userAgent: !1\n      },\n          i = {};\n      /*!\n      Copyright (c) 2011, Yahoo! Inc. All rights reserved.\n      Code licensed under the BSD License:\n      http://developer.yahoo.com/yui/license.html\n      version: 2.9.0\n      */\n\n      if (void 0 === o) var o = {};\n      o.lang = {\n        extend: function t(e, r, i) {\n          if (!r || !e) throw new Error(\"YAHOO.lang.extend failed, please check that all dependencies are included.\");\n\n          var o = function t() {};\n\n          if (o.prototype = r.prototype, e.prototype = new o(), e.prototype.constructor = e, e.superclass = r.prototype, r.prototype.constructor == Object.prototype.constructor && (r.prototype.constructor = r), i) {\n            var s;\n\n            for (s in i) e.prototype[s] = i[s];\n\n            var a = function t() {},\n                u = [\"toString\", \"valueOf\"];\n\n            try {\n              /MSIE/.test(n.userAgent) && (a = function t(e, r) {\n                for (s = 0; s < u.length; s += 1) {\n                  var n = u[s],\n                      i = r[n];\n                  \"function\" == typeof i && i != Object.prototype[n] && (e[n] = i);\n                }\n              });\n            } catch (t) {}\n\n            a(e.prototype, i);\n          }\n        }\n      };\n      /*! CryptoJS v3.1.2 core-fix.js\n       * code.google.com/p/crypto-js\n       * (c) 2009-2013 by Jeff Mott. All rights reserved.\n       * code.google.com/p/crypto-js/wiki/License\n       * THIS IS FIX of 'core.js' to fix Hmac issue.\n       * https://code.google.com/p/crypto-js/issues/detail?id=84\n       * https://crypto-js.googlecode.com/svn-history/r667/branches/3.x/src/core.js\n       */\n\n      var s,\n          a,\n          u,\n          c,\n          h,\n          l,\n          f,\n          g,\n          d,\n          p,\n          v,\n          y = y || (s = Math, u = (a = {}).lib = {}, c = u.Base = function () {\n        function t() {}\n\n        return {\n          extend: function e(r) {\n            t.prototype = this;\n            var n = new t();\n            return r && n.mixIn(r), n.hasOwnProperty(\"init\") || (n.init = function () {\n              n.$super.init.apply(this, arguments);\n            }), n.init.prototype = n, n.$super = this, n;\n          },\n          create: function t() {\n            var e = this.extend();\n            return e.init.apply(e, arguments), e;\n          },\n          init: function t() {},\n          mixIn: function t(e) {\n            for (var r in e) e.hasOwnProperty(r) && (this[r] = e[r]);\n\n            e.hasOwnProperty(\"toString\") && (this.toString = e.toString);\n          },\n          clone: function t() {\n            return this.init.prototype.extend(this);\n          }\n        };\n      }(), h = u.WordArray = c.extend({\n        init: function t(e, r) {\n          e = this.words = e || [], this.sigBytes = null != r ? r : 4 * e.length;\n        },\n        toString: function t(e) {\n          return (e || f).stringify(this);\n        },\n        concat: function t(e) {\n          var r = this.words,\n              n = e.words,\n              i = this.sigBytes,\n              o = e.sigBytes;\n          if (this.clamp(), i % 4) for (var s = 0; s < o; s++) {\n            var a = n[s >>> 2] >>> 24 - s % 4 * 8 & 255;\n            r[i + s >>> 2] |= a << 24 - (i + s) % 4 * 8;\n          } else for (s = 0; s < o; s += 4) r[i + s >>> 2] = n[s >>> 2];\n          return this.sigBytes += o, this;\n        },\n        clamp: function t() {\n          var e = this.words,\n              r = this.sigBytes;\n          e[r >>> 2] &= 4294967295 << 32 - r % 4 * 8, e.length = s.ceil(r / 4);\n        },\n        clone: function t() {\n          var e = c.clone.call(this);\n          return e.words = this.words.slice(0), e;\n        },\n        random: function t(e) {\n          for (var r = [], n = 0; n < e; n += 4) r.push(4294967296 * s.random() | 0);\n\n          return new h.init(r, e);\n        }\n      }), l = a.enc = {}, f = l.Hex = {\n        stringify: function t(e) {\n          for (var r = e.words, n = e.sigBytes, i = [], o = 0; o < n; o++) {\n            var s = r[o >>> 2] >>> 24 - o % 4 * 8 & 255;\n            i.push((s >>> 4).toString(16)), i.push((15 & s).toString(16));\n          }\n\n          return i.join(\"\");\n        },\n        parse: function t(e) {\n          for (var r = e.length, n = [], i = 0; i < r; i += 2) n[i >>> 3] |= parseInt(e.substr(i, 2), 16) << 24 - i % 8 * 4;\n\n          return new h.init(n, r / 2);\n        }\n      }, g = l.Latin1 = {\n        stringify: function t(e) {\n          for (var r = e.words, n = e.sigBytes, i = [], o = 0; o < n; o++) {\n            var s = r[o >>> 2] >>> 24 - o % 4 * 8 & 255;\n            i.push(String.fromCharCode(s));\n          }\n\n          return i.join(\"\");\n        },\n        parse: function t(e) {\n          for (var r = e.length, n = [], i = 0; i < r; i++) n[i >>> 2] |= (255 & e.charCodeAt(i)) << 24 - i % 4 * 8;\n\n          return new h.init(n, r);\n        }\n      }, d = l.Utf8 = {\n        stringify: function t(e) {\n          try {\n            return decodeURIComponent(escape(g.stringify(e)));\n          } catch (t) {\n            throw new Error(\"Malformed UTF-8 data\");\n          }\n        },\n        parse: function t(e) {\n          return g.parse(unescape(encodeURIComponent(e)));\n        }\n      }, p = u.BufferedBlockAlgorithm = c.extend({\n        reset: function t() {\n          this._data = new h.init(), this._nDataBytes = 0;\n        },\n        _append: function t(e) {\n          \"string\" == typeof e && (e = d.parse(e)), this._data.concat(e), this._nDataBytes += e.sigBytes;\n        },\n        _process: function t(e) {\n          var r = this._data,\n              n = r.words,\n              i = r.sigBytes,\n              o = this.blockSize,\n              a = i / (4 * o),\n              u = (a = e ? s.ceil(a) : s.max((0 | a) - this._minBufferSize, 0)) * o,\n              c = s.min(4 * u, i);\n\n          if (u) {\n            for (var l = 0; l < u; l += o) this._doProcessBlock(n, l);\n\n            var f = n.splice(0, u);\n            r.sigBytes -= c;\n          }\n\n          return new h.init(f, c);\n        },\n        clone: function t() {\n          var e = c.clone.call(this);\n          return e._data = this._data.clone(), e;\n        },\n        _minBufferSize: 0\n      }), u.Hasher = p.extend({\n        cfg: c.extend(),\n        init: function t(e) {\n          this.cfg = this.cfg.extend(e), this.reset();\n        },\n        reset: function t() {\n          p.reset.call(this), this._doReset();\n        },\n        update: function t(e) {\n          return this._append(e), this._process(), this;\n        },\n        finalize: function t(e) {\n          return e && this._append(e), this._doFinalize();\n        },\n        blockSize: 16,\n        _createHelper: function t(e) {\n          return function (t, r) {\n            return new e.init(r).finalize(t);\n          };\n        },\n        _createHmacHelper: function t(e) {\n          return function (t, r) {\n            return new v.HMAC.init(e, r).finalize(t);\n          };\n        }\n      }), v = a.algo = {}, a);\n      !function (t) {\n        var e,\n            r = (e = y).lib,\n            n = r.Base,\n            i = r.WordArray;\n        (e = e.x64 = {}).Word = n.extend({\n          init: function t(e, r) {\n            this.high = e, this.low = r;\n          }\n        }), e.WordArray = n.extend({\n          init: function t(e, r) {\n            e = this.words = e || [], this.sigBytes = null != r ? r : 8 * e.length;\n          },\n          toX32: function t() {\n            for (var e = this.words, r = e.length, n = [], o = 0; o < r; o++) {\n              var s = e[o];\n              n.push(s.high), n.push(s.low);\n            }\n\n            return i.create(n, this.sigBytes);\n          },\n          clone: function t() {\n            for (var e = n.clone.call(this), r = e.words = this.words.slice(0), i = r.length, o = 0; o < i; o++) r[o] = r[o].clone();\n\n            return e;\n          }\n        });\n      }(), function () {\n        var t = y,\n            e = t.lib.WordArray;\n        t.enc.Base64 = {\n          stringify: function t(e) {\n            var r = e.words,\n                n = e.sigBytes,\n                i = this._map;\n            e.clamp(), e = [];\n\n            for (var o = 0; o < n; o += 3) for (var s = (r[o >>> 2] >>> 24 - o % 4 * 8 & 255) << 16 | (r[o + 1 >>> 2] >>> 24 - (o + 1) % 4 * 8 & 255) << 8 | r[o + 2 >>> 2] >>> 24 - (o + 2) % 4 * 8 & 255, a = 0; 4 > a && o + .75 * a < n; a++) e.push(i.charAt(s >>> 6 * (3 - a) & 63));\n\n            if (r = i.charAt(64)) for (; e.length % 4;) e.push(r);\n            return e.join(\"\");\n          },\n          parse: function t(r) {\n            var n = r.length,\n                i = this._map;\n            (o = i.charAt(64)) && -1 != (o = r.indexOf(o)) && (n = o);\n\n            for (var o = [], s = 0, a = 0; a < n; a++) if (a % 4) {\n              var u = i.indexOf(r.charAt(a - 1)) << a % 4 * 2,\n                  c = i.indexOf(r.charAt(a)) >>> 6 - a % 4 * 2;\n              o[s >>> 2] |= (u | c) << 24 - s % 4 * 8, s++;\n            }\n\n            return e.create(o, s);\n          },\n          _map: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\"\n        };\n      }(), function (t) {\n        for (var e = y, r = (i = e.lib).WordArray, n = i.Hasher, i = e.algo, o = [], s = [], a = function t(e) {\n          return 4294967296 * (e - (0 | e)) | 0;\n        }, u = 2, c = 0; 64 > c;) {\n          var h;\n\n          t: {\n            h = u;\n\n            for (var l = t.sqrt(h), f = 2; f <= l; f++) if (!(h % f)) {\n              h = !1;\n              break t;\n            }\n\n            h = !0;\n          }\n\n          h && (8 > c && (o[c] = a(t.pow(u, .5))), s[c] = a(t.pow(u, 1 / 3)), c++), u++;\n        }\n\n        var g = [];\n        i = i.SHA256 = n.extend({\n          _doReset: function t() {\n            this._hash = new r.init(o.slice(0));\n          },\n          _doProcessBlock: function t(e, r) {\n            for (var n = this._hash.words, i = n[0], o = n[1], a = n[2], u = n[3], c = n[4], h = n[5], l = n[6], f = n[7], d = 0; 64 > d; d++) {\n              if (16 > d) g[d] = 0 | e[r + d];else {\n                var p = g[d - 15],\n                    v = g[d - 2];\n                g[d] = ((p << 25 | p >>> 7) ^ (p << 14 | p >>> 18) ^ p >>> 3) + g[d - 7] + ((v << 15 | v >>> 17) ^ (v << 13 | v >>> 19) ^ v >>> 10) + g[d - 16];\n              }\n              p = f + ((c << 26 | c >>> 6) ^ (c << 21 | c >>> 11) ^ (c << 7 | c >>> 25)) + (c & h ^ ~c & l) + s[d] + g[d], v = ((i << 30 | i >>> 2) ^ (i << 19 | i >>> 13) ^ (i << 10 | i >>> 22)) + (i & o ^ i & a ^ o & a), f = l, l = h, h = c, c = u + p | 0, u = a, a = o, o = i, i = p + v | 0;\n            }\n\n            n[0] = n[0] + i | 0, n[1] = n[1] + o | 0, n[2] = n[2] + a | 0, n[3] = n[3] + u | 0, n[4] = n[4] + c | 0, n[5] = n[5] + h | 0, n[6] = n[6] + l | 0, n[7] = n[7] + f | 0;\n          },\n          _doFinalize: function e() {\n            var r = this._data,\n                n = r.words,\n                i = 8 * this._nDataBytes,\n                o = 8 * r.sigBytes;\n            return n[o >>> 5] |= 128 << 24 - o % 32, n[14 + (o + 64 >>> 9 << 4)] = t.floor(i / 4294967296), n[15 + (o + 64 >>> 9 << 4)] = i, r.sigBytes = 4 * n.length, this._process(), this._hash;\n          },\n          clone: function t() {\n            var e = n.clone.call(this);\n            return e._hash = this._hash.clone(), e;\n          }\n        });\n        e.SHA256 = n._createHelper(i), e.HmacSHA256 = n._createHmacHelper(i);\n      }(Math), function () {\n        function t() {\n          return n.create.apply(n, arguments);\n        }\n\n        for (var e = y, r = e.lib.Hasher, n = (o = e.x64).Word, i = o.WordArray, o = e.algo, s = [t(1116352408, 3609767458), t(1899447441, 602891725), t(3049323471, 3964484399), t(3921009573, 2173295548), t(961987163, 4081628472), t(1508970993, 3053834265), t(2453635748, 2937671579), t(2870763221, 3664609560), t(3624381080, 2734883394), t(310598401, 1164996542), t(607225278, 1323610764), t(1426881987, 3590304994), t(1925078388, 4068182383), t(2162078206, 991336113), t(2614888103, 633803317), t(3248222580, 3479774868), t(3835390401, 2666613458), t(4022224774, 944711139), t(264347078, 2341262773), t(604807628, 2007800933), t(770255983, 1495990901), t(1249150122, 1856431235), t(1555081692, 3175218132), t(1996064986, 2198950837), t(2554220882, 3999719339), t(2821834349, 766784016), t(2952996808, 2566594879), t(3210313671, 3203337956), t(3336571891, 1034457026), t(3584528711, 2466948901), t(113926993, 3758326383), t(338241895, 168717936), t(666307205, 1188179964), t(773529912, 1546045734), t(1294757372, 1522805485), t(1396182291, 2643833823), t(1695183700, 2343527390), t(1986661051, 1014477480), t(2177026350, 1206759142), t(2456956037, 344077627), t(2730485921, 1290863460), t(2820302411, 3158454273), t(3259730800, 3505952657), t(3345764771, 106217008), t(3516065817, 3606008344), t(3600352804, 1432725776), t(4094571909, 1467031594), t(275423344, 851169720), t(430227734, 3100823752), t(506948616, 1363258195), t(659060556, 3750685593), t(883997877, 3785050280), t(958139571, 3318307427), t(1322822218, 3812723403), t(1537002063, 2003034995), t(1747873779, 3602036899), t(1955562222, 1575990012), t(2024104815, 1125592928), t(2227730452, 2716904306), t(2361852424, 442776044), t(2428436474, 593698344), t(2756734187, 3733110249), t(3204031479, 2999351573), t(3329325298, 3815920427), t(3391569614, 3928383900), t(3515267271, 566280711), t(3940187606, 3454069534), t(4118630271, 4000239992), t(116418474, 1914138554), t(174292421, 2731055270), t(289380356, 3203993006), t(460393269, 320620315), t(685471733, 587496836), t(852142971, 1086792851), t(1017036298, 365543100), t(1126000580, 2618297676), t(1288033470, 3409855158), t(1501505948, 4234509866), t(1607167915, 987167468), t(1816402316, 1246189591)], a = [], u = 0; 80 > u; u++) a[u] = t();\n\n        o = o.SHA512 = r.extend({\n          _doReset: function t() {\n            this._hash = new i.init([new n.init(1779033703, 4089235720), new n.init(3144134277, 2227873595), new n.init(1013904242, 4271175723), new n.init(2773480762, 1595750129), new n.init(1359893119, 2917565137), new n.init(2600822924, 725511199), new n.init(528734635, 4215389547), new n.init(1541459225, 327033209)]);\n          },\n          _doProcessBlock: function t(e, r) {\n            for (var n = (f = this._hash.words)[0], i = f[1], o = f[2], u = f[3], c = f[4], h = f[5], l = f[6], f = f[7], g = n.high, d = n.low, p = i.high, v = i.low, y = o.high, m = o.low, _ = u.high, S = u.low, b = c.high, w = c.low, F = h.high, E = h.low, x = l.high, A = l.low, k = f.high, P = f.low, C = g, T = d, R = p, I = v, D = y, L = m, N = _, U = S, B = b, O = w, j = F, M = E, H = x, V = A, K = k, q = P, J = 0; 80 > J; J++) {\n              var W = a[J];\n              if (16 > J) var z = W.high = 0 | e[r + 2 * J],\n                  Y = W.low = 0 | e[r + 2 * J + 1];else {\n                z = ((Y = (z = a[J - 15]).high) >>> 1 | (G = z.low) << 31) ^ (Y >>> 8 | G << 24) ^ Y >>> 7;\n                var G = (G >>> 1 | Y << 31) ^ (G >>> 8 | Y << 24) ^ (G >>> 7 | Y << 25),\n                    X = ((Y = (X = a[J - 2]).high) >>> 19 | ($ = X.low) << 13) ^ (Y << 3 | $ >>> 29) ^ Y >>> 6,\n                    $ = ($ >>> 19 | Y << 13) ^ ($ << 3 | Y >>> 29) ^ ($ >>> 6 | Y << 26),\n                    Q = (Y = a[J - 7]).high,\n                    Z = (tt = a[J - 16]).high,\n                    tt = tt.low;\n                z = (z = (z = z + Q + ((Y = G + Y.low) >>> 0 < G >>> 0 ? 1 : 0)) + X + ((Y = Y + $) >>> 0 < $ >>> 0 ? 1 : 0)) + Z + ((Y = Y + tt) >>> 0 < tt >>> 0 ? 1 : 0);\n                W.high = z, W.low = Y;\n              }\n              Q = B & j ^ ~B & H, tt = O & M ^ ~O & V, W = C & R ^ C & D ^ R & D;\n              var et = T & I ^ T & L ^ I & L,\n                  rt = (G = (C >>> 28 | T << 4) ^ (C << 30 | T >>> 2) ^ (C << 25 | T >>> 7), X = (T >>> 28 | C << 4) ^ (T << 30 | C >>> 2) ^ (T << 25 | C >>> 7), ($ = s[J]).high),\n                  nt = $.low;\n              Z = K + ((B >>> 14 | O << 18) ^ (B >>> 18 | O << 14) ^ (B << 23 | O >>> 9)) + (($ = q + ((O >>> 14 | B << 18) ^ (O >>> 18 | B << 14) ^ (O << 23 | B >>> 9))) >>> 0 < q >>> 0 ? 1 : 0), K = H, q = V, H = j, V = M, j = B, M = O, B = N + (Z = (Z = (Z = Z + Q + (($ = $ + tt) >>> 0 < tt >>> 0 ? 1 : 0)) + rt + (($ = $ + nt) >>> 0 < nt >>> 0 ? 1 : 0)) + z + (($ = $ + Y) >>> 0 < Y >>> 0 ? 1 : 0)) + ((O = U + $ | 0) >>> 0 < U >>> 0 ? 1 : 0) | 0, N = D, U = L, D = R, L = I, R = C, I = T, C = Z + (W = G + W + ((Y = X + et) >>> 0 < X >>> 0 ? 1 : 0)) + ((T = $ + Y | 0) >>> 0 < $ >>> 0 ? 1 : 0) | 0;\n            }\n\n            d = n.low = d + T, n.high = g + C + (d >>> 0 < T >>> 0 ? 1 : 0), v = i.low = v + I, i.high = p + R + (v >>> 0 < I >>> 0 ? 1 : 0), m = o.low = m + L, o.high = y + D + (m >>> 0 < L >>> 0 ? 1 : 0), S = u.low = S + U, u.high = _ + N + (S >>> 0 < U >>> 0 ? 1 : 0), w = c.low = w + O, c.high = b + B + (w >>> 0 < O >>> 0 ? 1 : 0), E = h.low = E + M, h.high = F + j + (E >>> 0 < M >>> 0 ? 1 : 0), A = l.low = A + V, l.high = x + H + (A >>> 0 < V >>> 0 ? 1 : 0), P = f.low = P + q, f.high = k + K + (P >>> 0 < q >>> 0 ? 1 : 0);\n          },\n          _doFinalize: function t() {\n            var e = this._data,\n                r = e.words,\n                n = 8 * this._nDataBytes,\n                i = 8 * e.sigBytes;\n            return r[i >>> 5] |= 128 << 24 - i % 32, r[30 + (i + 128 >>> 10 << 5)] = Math.floor(n / 4294967296), r[31 + (i + 128 >>> 10 << 5)] = n, e.sigBytes = 4 * r.length, this._process(), this._hash.toX32();\n          },\n          clone: function t() {\n            var e = r.clone.call(this);\n            return e._hash = this._hash.clone(), e;\n          },\n          blockSize: 32\n        }), e.SHA512 = r._createHelper(o), e.HmacSHA512 = r._createHmacHelper(o);\n      }(), function () {\n        var t = y,\n            e = (i = t.x64).Word,\n            r = i.WordArray,\n            n = (i = t.algo).SHA512,\n            i = i.SHA384 = n.extend({\n          _doReset: function t() {\n            this._hash = new r.init([new e.init(3418070365, 3238371032), new e.init(1654270250, 914150663), new e.init(2438529370, 812702999), new e.init(355462360, 4144912697), new e.init(1731405415, 4290775857), new e.init(2394180231, 1750603025), new e.init(3675008525, 1694076839), new e.init(1203062813, 3204075428)]);\n          },\n          _doFinalize: function t() {\n            var e = n._doFinalize.call(this);\n\n            return e.sigBytes -= 16, e;\n          }\n        });\n        t.SHA384 = n._createHelper(i), t.HmacSHA384 = n._createHmacHelper(i);\n      }();\n      /*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/\n       */\n\n      var m,\n          _ = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\n      function S(t) {\n        var e,\n            r,\n            n = \"\";\n\n        for (e = 0; e + 3 <= t.length; e += 3) r = parseInt(t.substring(e, e + 3), 16), n += _.charAt(r >> 6) + _.charAt(63 & r);\n\n        for (e + 1 == t.length ? (r = parseInt(t.substring(e, e + 1), 16), n += _.charAt(r << 2)) : e + 2 == t.length && (r = parseInt(t.substring(e, e + 2), 16), n += _.charAt(r >> 2) + _.charAt((3 & r) << 4)), \"=\"; (3 & n.length) > 0;) n += \"=\";\n\n        return n;\n      }\n\n      function b(t) {\n        var e,\n            r,\n            n,\n            i = \"\",\n            o = 0;\n\n        for (e = 0; e < t.length && \"=\" != t.charAt(e); ++e) (n = _.indexOf(t.charAt(e))) < 0 || (0 == o ? (i += R(n >> 2), r = 3 & n, o = 1) : 1 == o ? (i += R(r << 2 | n >> 4), r = 15 & n, o = 2) : 2 == o ? (i += R(r), i += R(n >> 2), r = 3 & n, o = 3) : (i += R(r << 2 | n >> 4), i += R(15 & n), o = 0));\n\n        return 1 == o && (i += R(r << 2)), i;\n      }\n\n      function w(t) {\n        var e,\n            r = b(t),\n            n = new Array();\n\n        for (e = 0; 2 * e < r.length; ++e) n[e] = parseInt(r.substring(2 * e, 2 * e + 2), 16);\n\n        return n;\n      }\n\n      function F(t, e, r) {\n        null != t && (\"number\" == typeof t ? this.fromNumber(t, e, r) : null == e && \"string\" != typeof t ? this.fromString(t, 256) : this.fromString(t, e));\n      }\n\n      function E() {\n        return new F(null);\n      }\n\n      \"Microsoft Internet Explorer\" == n.appName ? (F.prototype.am = function x(t, e, r, n, i, o) {\n        for (var s = 32767 & e, a = e >> 15; --o >= 0;) {\n          var u = 32767 & this[t],\n              c = this[t++] >> 15,\n              h = a * u + c * s;\n          i = ((u = s * u + ((32767 & h) << 15) + r[n] + (1073741823 & i)) >>> 30) + (h >>> 15) + a * c + (i >>> 30), r[n++] = 1073741823 & u;\n        }\n\n        return i;\n      }, m = 30) : \"Netscape\" != n.appName ? (F.prototype.am = function A(t, e, r, n, i, o) {\n        for (; --o >= 0;) {\n          var s = e * this[t++] + r[n] + i;\n          i = Math.floor(s / 67108864), r[n++] = 67108863 & s;\n        }\n\n        return i;\n      }, m = 26) : (F.prototype.am = function k(t, e, r, n, i, o) {\n        for (var s = 16383 & e, a = e >> 14; --o >= 0;) {\n          var u = 16383 & this[t],\n              c = this[t++] >> 14,\n              h = a * u + c * s;\n          i = ((u = s * u + ((16383 & h) << 14) + r[n] + i) >> 28) + (h >> 14) + a * c, r[n++] = 268435455 & u;\n        }\n\n        return i;\n      }, m = 28), F.prototype.DB = m, F.prototype.DM = (1 << m) - 1, F.prototype.DV = 1 << m;\n      F.prototype.FV = Math.pow(2, 52), F.prototype.F1 = 52 - m, F.prototype.F2 = 2 * m - 52;\n      var P,\n          C,\n          T = new Array();\n\n      for (P = \"0\".charCodeAt(0), C = 0; C <= 9; ++C) T[P++] = C;\n\n      for (P = \"a\".charCodeAt(0), C = 10; C < 36; ++C) T[P++] = C;\n\n      for (P = \"A\".charCodeAt(0), C = 10; C < 36; ++C) T[P++] = C;\n\n      function R(t) {\n        return \"0123456789abcdefghijklmnopqrstuvwxyz\".charAt(t);\n      }\n\n      function I(t, e) {\n        var r = T[t.charCodeAt(e)];\n        return null == r ? -1 : r;\n      }\n\n      function D(t) {\n        var e = E();\n        return e.fromInt(t), e;\n      }\n\n      function L(t) {\n        var e,\n            r = 1;\n        return 0 != (e = t >>> 16) && (t = e, r += 16), 0 != (e = t >> 8) && (t = e, r += 8), 0 != (e = t >> 4) && (t = e, r += 4), 0 != (e = t >> 2) && (t = e, r += 2), 0 != (e = t >> 1) && (t = e, r += 1), r;\n      }\n\n      function N(t) {\n        this.m = t;\n      }\n\n      function U(t) {\n        this.m = t, this.mp = t.invDigit(), this.mpl = 32767 & this.mp, this.mph = this.mp >> 15, this.um = (1 << t.DB - 15) - 1, this.mt2 = 2 * t.t;\n      }\n\n      function B(t, e) {\n        return t & e;\n      }\n\n      function O(t, e) {\n        return t | e;\n      }\n\n      function j(t, e) {\n        return t ^ e;\n      }\n\n      function M(t, e) {\n        return t & ~e;\n      }\n\n      function H(t) {\n        if (0 == t) return -1;\n        var e = 0;\n        return 0 == (65535 & t) && (t >>= 16, e += 16), 0 == (255 & t) && (t >>= 8, e += 8), 0 == (15 & t) && (t >>= 4, e += 4), 0 == (3 & t) && (t >>= 2, e += 2), 0 == (1 & t) && ++e, e;\n      }\n\n      function V(t) {\n        for (var e = 0; 0 != t;) t &= t - 1, ++e;\n\n        return e;\n      }\n\n      function K() {}\n\n      function q(t) {\n        return t;\n      }\n\n      function J(t) {\n        this.r2 = E(), this.q3 = E(), F.ONE.dlShiftTo(2 * t.t, this.r2), this.mu = this.r2.divide(t), this.m = t;\n      }\n\n      N.prototype.convert = function W(t) {\n        return t.s < 0 || t.compareTo(this.m) >= 0 ? t.mod(this.m) : t;\n      }, N.prototype.revert = function z(t) {\n        return t;\n      }, N.prototype.reduce = function Y(t) {\n        t.divRemTo(this.m, null, t);\n      }, N.prototype.mulTo = function G(t, e, r) {\n        t.multiplyTo(e, r), this.reduce(r);\n      }, N.prototype.sqrTo = function X(t, e) {\n        t.squareTo(e), this.reduce(e);\n      }, U.prototype.convert = function $(t) {\n        var e = E();\n        return t.abs().dlShiftTo(this.m.t, e), e.divRemTo(this.m, null, e), t.s < 0 && e.compareTo(F.ZERO) > 0 && this.m.subTo(e, e), e;\n      }, U.prototype.revert = function Q(t) {\n        var e = E();\n        return t.copyTo(e), this.reduce(e), e;\n      }, U.prototype.reduce = function Z(t) {\n        for (; t.t <= this.mt2;) t[t.t++] = 0;\n\n        for (var e = 0; e < this.m.t; ++e) {\n          var r = 32767 & t[e],\n              n = r * this.mpl + ((r * this.mph + (t[e] >> 15) * this.mpl & this.um) << 15) & t.DM;\n\n          for (t[r = e + this.m.t] += this.m.am(0, n, t, e, 0, this.m.t); t[r] >= t.DV;) t[r] -= t.DV, t[++r]++;\n        }\n\n        t.clamp(), t.drShiftTo(this.m.t, t), t.compareTo(this.m) >= 0 && t.subTo(this.m, t);\n      }, U.prototype.mulTo = function tt(t, e, r) {\n        t.multiplyTo(e, r), this.reduce(r);\n      }, U.prototype.sqrTo = function et(t, e) {\n        t.squareTo(e), this.reduce(e);\n      }, F.prototype.copyTo = function rt(t) {\n        for (var e = this.t - 1; e >= 0; --e) t[e] = this[e];\n\n        t.t = this.t, t.s = this.s;\n      }, F.prototype.fromInt = function nt(t) {\n        this.t = 1, this.s = t < 0 ? -1 : 0, t > 0 ? this[0] = t : t < -1 ? this[0] = t + this.DV : this.t = 0;\n      }, F.prototype.fromString = function it(t, e) {\n        var r;\n        if (16 == e) r = 4;else if (8 == e) r = 3;else if (256 == e) r = 8;else if (2 == e) r = 1;else if (32 == e) r = 5;else {\n          if (4 != e) return void this.fromRadix(t, e);\n          r = 2;\n        }\n        this.t = 0, this.s = 0;\n\n        for (var n = t.length, i = !1, o = 0; --n >= 0;) {\n          var s = 8 == r ? 255 & t[n] : I(t, n);\n          s < 0 ? \"-\" == t.charAt(n) && (i = !0) : (i = !1, 0 == o ? this[this.t++] = s : o + r > this.DB ? (this[this.t - 1] |= (s & (1 << this.DB - o) - 1) << o, this[this.t++] = s >> this.DB - o) : this[this.t - 1] |= s << o, (o += r) >= this.DB && (o -= this.DB));\n        }\n\n        8 == r && 0 != (128 & t[0]) && (this.s = -1, o > 0 && (this[this.t - 1] |= (1 << this.DB - o) - 1 << o)), this.clamp(), i && F.ZERO.subTo(this, this);\n      }, F.prototype.clamp = function ot() {\n        for (var t = this.s & this.DM; this.t > 0 && this[this.t - 1] == t;) --this.t;\n      }, F.prototype.dlShiftTo = function st(t, e) {\n        var r;\n\n        for (r = this.t - 1; r >= 0; --r) e[r + t] = this[r];\n\n        for (r = t - 1; r >= 0; --r) e[r] = 0;\n\n        e.t = this.t + t, e.s = this.s;\n      }, F.prototype.drShiftTo = function at(t, e) {\n        for (var r = t; r < this.t; ++r) e[r - t] = this[r];\n\n        e.t = Math.max(this.t - t, 0), e.s = this.s;\n      }, F.prototype.lShiftTo = function ut(t, e) {\n        var r,\n            n = t % this.DB,\n            i = this.DB - n,\n            o = (1 << i) - 1,\n            s = Math.floor(t / this.DB),\n            a = this.s << n & this.DM;\n\n        for (r = this.t - 1; r >= 0; --r) e[r + s + 1] = this[r] >> i | a, a = (this[r] & o) << n;\n\n        for (r = s - 1; r >= 0; --r) e[r] = 0;\n\n        e[s] = a, e.t = this.t + s + 1, e.s = this.s, e.clamp();\n      }, F.prototype.rShiftTo = function ct(t, e) {\n        e.s = this.s;\n        var r = Math.floor(t / this.DB);\n        if (r >= this.t) e.t = 0;else {\n          var n = t % this.DB,\n              i = this.DB - n,\n              o = (1 << n) - 1;\n          e[0] = this[r] >> n;\n\n          for (var s = r + 1; s < this.t; ++s) e[s - r - 1] |= (this[s] & o) << i, e[s - r] = this[s] >> n;\n\n          n > 0 && (e[this.t - r - 1] |= (this.s & o) << i), e.t = this.t - r, e.clamp();\n        }\n      }, F.prototype.subTo = function ht(t, e) {\n        for (var r = 0, n = 0, i = Math.min(t.t, this.t); r < i;) n += this[r] - t[r], e[r++] = n & this.DM, n >>= this.DB;\n\n        if (t.t < this.t) {\n          for (n -= t.s; r < this.t;) n += this[r], e[r++] = n & this.DM, n >>= this.DB;\n\n          n += this.s;\n        } else {\n          for (n += this.s; r < t.t;) n -= t[r], e[r++] = n & this.DM, n >>= this.DB;\n\n          n -= t.s;\n        }\n\n        e.s = n < 0 ? -1 : 0, n < -1 ? e[r++] = this.DV + n : n > 0 && (e[r++] = n), e.t = r, e.clamp();\n      }, F.prototype.multiplyTo = function lt(t, e) {\n        var r = this.abs(),\n            n = t.abs(),\n            i = r.t;\n\n        for (e.t = i + n.t; --i >= 0;) e[i] = 0;\n\n        for (i = 0; i < n.t; ++i) e[i + r.t] = r.am(0, n[i], e, i, 0, r.t);\n\n        e.s = 0, e.clamp(), this.s != t.s && F.ZERO.subTo(e, e);\n      }, F.prototype.squareTo = function ft(t) {\n        for (var e = this.abs(), r = t.t = 2 * e.t; --r >= 0;) t[r] = 0;\n\n        for (r = 0; r < e.t - 1; ++r) {\n          var n = e.am(r, e[r], t, 2 * r, 0, 1);\n          (t[r + e.t] += e.am(r + 1, 2 * e[r], t, 2 * r + 1, n, e.t - r - 1)) >= e.DV && (t[r + e.t] -= e.DV, t[r + e.t + 1] = 1);\n        }\n\n        t.t > 0 && (t[t.t - 1] += e.am(r, e[r], t, 2 * r, 0, 1)), t.s = 0, t.clamp();\n      }, F.prototype.divRemTo = function gt(t, e, r) {\n        var n = t.abs();\n\n        if (!(n.t <= 0)) {\n          var i = this.abs();\n          if (i.t < n.t) return null != e && e.fromInt(0), void (null != r && this.copyTo(r));\n          null == r && (r = E());\n          var o = E(),\n              s = this.s,\n              a = t.s,\n              u = this.DB - L(n[n.t - 1]);\n          u > 0 ? (n.lShiftTo(u, o), i.lShiftTo(u, r)) : (n.copyTo(o), i.copyTo(r));\n          var c = o.t,\n              h = o[c - 1];\n\n          if (0 != h) {\n            var l = h * (1 << this.F1) + (c > 1 ? o[c - 2] >> this.F2 : 0),\n                f = this.FV / l,\n                g = (1 << this.F1) / l,\n                d = 1 << this.F2,\n                p = r.t,\n                v = p - c,\n                y = null == e ? E() : e;\n\n            for (o.dlShiftTo(v, y), r.compareTo(y) >= 0 && (r[r.t++] = 1, r.subTo(y, r)), F.ONE.dlShiftTo(c, y), y.subTo(o, o); o.t < c;) o[o.t++] = 0;\n\n            for (; --v >= 0;) {\n              var m = r[--p] == h ? this.DM : Math.floor(r[p] * f + (r[p - 1] + d) * g);\n              if ((r[p] += o.am(0, m, r, v, 0, c)) < m) for (o.dlShiftTo(v, y), r.subTo(y, r); r[p] < --m;) r.subTo(y, r);\n            }\n\n            null != e && (r.drShiftTo(c, e), s != a && F.ZERO.subTo(e, e)), r.t = c, r.clamp(), u > 0 && r.rShiftTo(u, r), s < 0 && F.ZERO.subTo(r, r);\n          }\n        }\n      }, F.prototype.invDigit = function dt() {\n        if (this.t < 1) return 0;\n        var t = this[0];\n        if (0 == (1 & t)) return 0;\n        var e = 3 & t;\n        return (e = (e = (e = (e = e * (2 - (15 & t) * e) & 15) * (2 - (255 & t) * e) & 255) * (2 - ((65535 & t) * e & 65535)) & 65535) * (2 - t * e % this.DV) % this.DV) > 0 ? this.DV - e : -e;\n      }, F.prototype.isEven = function pt() {\n        return 0 == (this.t > 0 ? 1 & this[0] : this.s);\n      }, F.prototype.exp = function vt(t, e) {\n        if (t > 4294967295 || t < 1) return F.ONE;\n        var r = E(),\n            n = E(),\n            i = e.convert(this),\n            o = L(t) - 1;\n\n        for (i.copyTo(r); --o >= 0;) if (e.sqrTo(r, n), (t & 1 << o) > 0) e.mulTo(n, i, r);else {\n          var s = r;\n          r = n, n = s;\n        }\n\n        return e.revert(r);\n      }, F.prototype.toString = function yt(t) {\n        if (this.s < 0) return \"-\" + this.negate().toString(t);\n        var e;\n        if (16 == t) e = 4;else if (8 == t) e = 3;else if (2 == t) e = 1;else if (32 == t) e = 5;else {\n          if (4 != t) return this.toRadix(t);\n          e = 2;\n        }\n        var r,\n            n = (1 << e) - 1,\n            i = !1,\n            o = \"\",\n            s = this.t,\n            a = this.DB - s * this.DB % e;\n        if (s-- > 0) for (a < this.DB && (r = this[s] >> a) > 0 && (i = !0, o = R(r)); s >= 0;) a < e ? (r = (this[s] & (1 << a) - 1) << e - a, r |= this[--s] >> (a += this.DB - e)) : (r = this[s] >> (a -= e) & n, a <= 0 && (a += this.DB, --s)), r > 0 && (i = !0), i && (o += R(r));\n        return i ? o : \"0\";\n      }, F.prototype.negate = function mt() {\n        var t = E();\n        return F.ZERO.subTo(this, t), t;\n      }, F.prototype.abs = function _t() {\n        return this.s < 0 ? this.negate() : this;\n      }, F.prototype.compareTo = function St(t) {\n        var e = this.s - t.s;\n        if (0 != e) return e;\n        var r = this.t;\n        if (0 != (e = r - t.t)) return this.s < 0 ? -e : e;\n\n        for (; --r >= 0;) if (0 != (e = this[r] - t[r])) return e;\n\n        return 0;\n      }, F.prototype.bitLength = function bt() {\n        return this.t <= 0 ? 0 : this.DB * (this.t - 1) + L(this[this.t - 1] ^ this.s & this.DM);\n      }, F.prototype.mod = function wt(t) {\n        var e = E();\n        return this.abs().divRemTo(t, null, e), this.s < 0 && e.compareTo(F.ZERO) > 0 && t.subTo(e, e), e;\n      }, F.prototype.modPowInt = function Ft(t, e) {\n        var r;\n        return r = t < 256 || e.isEven() ? new N(e) : new U(e), this.exp(t, r);\n      }, F.ZERO = D(0), F.ONE = D(1), K.prototype.convert = q, K.prototype.revert = q, K.prototype.mulTo = function Et(t, e, r) {\n        t.multiplyTo(e, r);\n      }, K.prototype.sqrTo = function xt(t, e) {\n        t.squareTo(e);\n      }, J.prototype.convert = function At(t) {\n        if (t.s < 0 || t.t > 2 * this.m.t) return t.mod(this.m);\n        if (t.compareTo(this.m) < 0) return t;\n        var e = E();\n        return t.copyTo(e), this.reduce(e), e;\n      }, J.prototype.revert = function kt(t) {\n        return t;\n      }, J.prototype.reduce = function Pt(t) {\n        for (t.drShiftTo(this.m.t - 1, this.r2), t.t > this.m.t + 1 && (t.t = this.m.t + 1, t.clamp()), this.mu.multiplyUpperTo(this.r2, this.m.t + 1, this.q3), this.m.multiplyLowerTo(this.q3, this.m.t + 1, this.r2); t.compareTo(this.r2) < 0;) t.dAddOffset(1, this.m.t + 1);\n\n        for (t.subTo(this.r2, t); t.compareTo(this.m) >= 0;) t.subTo(this.m, t);\n      }, J.prototype.mulTo = function Ct(t, e, r) {\n        t.multiplyTo(e, r), this.reduce(r);\n      }, J.prototype.sqrTo = function Tt(t, e) {\n        t.squareTo(e), this.reduce(e);\n      };\n      var Rt = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509, 521, 523, 541, 547, 557, 563, 569, 571, 577, 587, 593, 599, 601, 607, 613, 617, 619, 631, 641, 643, 647, 653, 659, 661, 673, 677, 683, 691, 701, 709, 719, 727, 733, 739, 743, 751, 757, 761, 769, 773, 787, 797, 809, 811, 821, 823, 827, 829, 839, 853, 857, 859, 863, 877, 881, 883, 887, 907, 911, 919, 929, 937, 941, 947, 953, 967, 971, 977, 983, 991, 997],\n          It = (1 << 26) / Rt[Rt.length - 1];\n      /*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/\n       */\n\n      function Dt() {\n        this.i = 0, this.j = 0, this.S = new Array();\n      }\n\n      F.prototype.chunkSize = function Lt(t) {\n        return Math.floor(Math.LN2 * this.DB / Math.log(t));\n      }, F.prototype.toRadix = function Nt(t) {\n        if (null == t && (t = 10), 0 == this.signum() || t < 2 || t > 36) return \"0\";\n        var e = this.chunkSize(t),\n            r = Math.pow(t, e),\n            n = D(r),\n            i = E(),\n            o = E(),\n            s = \"\";\n\n        for (this.divRemTo(n, i, o); i.signum() > 0;) s = (r + o.intValue()).toString(t).substr(1) + s, i.divRemTo(n, i, o);\n\n        return o.intValue().toString(t) + s;\n      }, F.prototype.fromRadix = function Ut(t, e) {\n        this.fromInt(0), null == e && (e = 10);\n\n        for (var r = this.chunkSize(e), n = Math.pow(e, r), i = !1, o = 0, s = 0, a = 0; a < t.length; ++a) {\n          var u = I(t, a);\n          u < 0 ? \"-\" == t.charAt(a) && 0 == this.signum() && (i = !0) : (s = e * s + u, ++o >= r && (this.dMultiply(n), this.dAddOffset(s, 0), o = 0, s = 0));\n        }\n\n        o > 0 && (this.dMultiply(Math.pow(e, o)), this.dAddOffset(s, 0)), i && F.ZERO.subTo(this, this);\n      }, F.prototype.fromNumber = function Bt(t, e, r) {\n        if (\"number\" == typeof e) {\n          if (t < 2) this.fromInt(1);else for (this.fromNumber(t, r), this.testBit(t - 1) || this.bitwiseTo(F.ONE.shiftLeft(t - 1), O, this), this.isEven() && this.dAddOffset(1, 0); !this.isProbablePrime(e);) this.dAddOffset(2, 0), this.bitLength() > t && this.subTo(F.ONE.shiftLeft(t - 1), this);\n        } else {\n          var n = new Array(),\n              i = 7 & t;\n          n.length = 1 + (t >> 3), e.nextBytes(n), i > 0 ? n[0] &= (1 << i) - 1 : n[0] = 0, this.fromString(n, 256);\n        }\n      }, F.prototype.bitwiseTo = function Ot(t, e, r) {\n        var n,\n            i,\n            o = Math.min(t.t, this.t);\n\n        for (n = 0; n < o; ++n) r[n] = e(this[n], t[n]);\n\n        if (t.t < this.t) {\n          for (i = t.s & this.DM, n = o; n < this.t; ++n) r[n] = e(this[n], i);\n\n          r.t = this.t;\n        } else {\n          for (i = this.s & this.DM, n = o; n < t.t; ++n) r[n] = e(i, t[n]);\n\n          r.t = t.t;\n        }\n\n        r.s = e(this.s, t.s), r.clamp();\n      }, F.prototype.changeBit = function jt(t, e) {\n        var r = F.ONE.shiftLeft(t);\n        return this.bitwiseTo(r, e, r), r;\n      }, F.prototype.addTo = function Mt(t, e) {\n        for (var r = 0, n = 0, i = Math.min(t.t, this.t); r < i;) n += this[r] + t[r], e[r++] = n & this.DM, n >>= this.DB;\n\n        if (t.t < this.t) {\n          for (n += t.s; r < this.t;) n += this[r], e[r++] = n & this.DM, n >>= this.DB;\n\n          n += this.s;\n        } else {\n          for (n += this.s; r < t.t;) n += t[r], e[r++] = n & this.DM, n >>= this.DB;\n\n          n += t.s;\n        }\n\n        e.s = n < 0 ? -1 : 0, n > 0 ? e[r++] = n : n < -1 && (e[r++] = this.DV + n), e.t = r, e.clamp();\n      }, F.prototype.dMultiply = function Ht(t) {\n        this[this.t] = this.am(0, t - 1, this, 0, 0, this.t), ++this.t, this.clamp();\n      }, F.prototype.dAddOffset = function Vt(t, e) {\n        if (0 != t) {\n          for (; this.t <= e;) this[this.t++] = 0;\n\n          for (this[e] += t; this[e] >= this.DV;) this[e] -= this.DV, ++e >= this.t && (this[this.t++] = 0), ++this[e];\n        }\n      }, F.prototype.multiplyLowerTo = function Kt(t, e, r) {\n        var n,\n            i = Math.min(this.t + t.t, e);\n\n        for (r.s = 0, r.t = i; i > 0;) r[--i] = 0;\n\n        for (n = r.t - this.t; i < n; ++i) r[i + this.t] = this.am(0, t[i], r, i, 0, this.t);\n\n        for (n = Math.min(t.t, e); i < n; ++i) this.am(0, t[i], r, i, 0, e - i);\n\n        r.clamp();\n      }, F.prototype.multiplyUpperTo = function qt(t, e, r) {\n        --e;\n        var n = r.t = this.t + t.t - e;\n\n        for (r.s = 0; --n >= 0;) r[n] = 0;\n\n        for (n = Math.max(e - this.t, 0); n < t.t; ++n) r[this.t + n - e] = this.am(e - n, t[n], r, 0, 0, this.t + n - e);\n\n        r.clamp(), r.drShiftTo(1, r);\n      }, F.prototype.modInt = function Jt(t) {\n        if (t <= 0) return 0;\n        var e = this.DV % t,\n            r = this.s < 0 ? t - 1 : 0;\n        if (this.t > 0) if (0 == e) r = this[0] % t;else for (var n = this.t - 1; n >= 0; --n) r = (e * r + this[n]) % t;\n        return r;\n      }, F.prototype.millerRabin = function Wt(t) {\n        var e = this.subtract(F.ONE),\n            r = e.getLowestSetBit();\n        if (r <= 0) return !1;\n        var n = e.shiftRight(r);\n        (t = t + 1 >> 1) > Rt.length && (t = Rt.length);\n\n        for (var i = E(), o = 0; o < t; ++o) {\n          i.fromInt(Rt[Math.floor(Math.random() * Rt.length)]);\n          var s = i.modPow(n, this);\n\n          if (0 != s.compareTo(F.ONE) && 0 != s.compareTo(e)) {\n            for (var a = 1; a++ < r && 0 != s.compareTo(e);) if (0 == (s = s.modPowInt(2, this)).compareTo(F.ONE)) return !1;\n\n            if (0 != s.compareTo(e)) return !1;\n          }\n        }\n\n        return !0;\n      }, F.prototype.clone =\n      /*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/\n       */\n      function zt() {\n        var t = E();\n        return this.copyTo(t), t;\n      }, F.prototype.intValue = function Yt() {\n        if (this.s < 0) {\n          if (1 == this.t) return this[0] - this.DV;\n          if (0 == this.t) return -1;\n        } else {\n          if (1 == this.t) return this[0];\n          if (0 == this.t) return 0;\n        }\n\n        return (this[1] & (1 << 32 - this.DB) - 1) << this.DB | this[0];\n      }, F.prototype.byteValue = function Gt() {\n        return 0 == this.t ? this.s : this[0] << 24 >> 24;\n      }, F.prototype.shortValue = function Xt() {\n        return 0 == this.t ? this.s : this[0] << 16 >> 16;\n      }, F.prototype.signum = function $t() {\n        return this.s < 0 ? -1 : this.t <= 0 || 1 == this.t && this[0] <= 0 ? 0 : 1;\n      }, F.prototype.toByteArray = function Qt() {\n        var t = this.t,\n            e = new Array();\n        e[0] = this.s;\n        var r,\n            n = this.DB - t * this.DB % 8,\n            i = 0;\n        if (t-- > 0) for (n < this.DB && (r = this[t] >> n) != (this.s & this.DM) >> n && (e[i++] = r | this.s << this.DB - n); t >= 0;) n < 8 ? (r = (this[t] & (1 << n) - 1) << 8 - n, r |= this[--t] >> (n += this.DB - 8)) : (r = this[t] >> (n -= 8) & 255, n <= 0 && (n += this.DB, --t)), 0 != (128 & r) && (r |= -256), 0 == i && (128 & this.s) != (128 & r) && ++i, (i > 0 || r != this.s) && (e[i++] = r);\n        return e;\n      }, F.prototype.equals = function Zt(t) {\n        return 0 == this.compareTo(t);\n      }, F.prototype.min = function te(t) {\n        return this.compareTo(t) < 0 ? this : t;\n      }, F.prototype.max = function ee(t) {\n        return this.compareTo(t) > 0 ? this : t;\n      }, F.prototype.and = function re(t) {\n        var e = E();\n        return this.bitwiseTo(t, B, e), e;\n      }, F.prototype.or = function ne(t) {\n        var e = E();\n        return this.bitwiseTo(t, O, e), e;\n      }, F.prototype.xor = function ie(t) {\n        var e = E();\n        return this.bitwiseTo(t, j, e), e;\n      }, F.prototype.andNot = function oe(t) {\n        var e = E();\n        return this.bitwiseTo(t, M, e), e;\n      }, F.prototype.not = function se() {\n        for (var t = E(), e = 0; e < this.t; ++e) t[e] = this.DM & ~this[e];\n\n        return t.t = this.t, t.s = ~this.s, t;\n      }, F.prototype.shiftLeft = function ae(t) {\n        var e = E();\n        return t < 0 ? this.rShiftTo(-t, e) : this.lShiftTo(t, e), e;\n      }, F.prototype.shiftRight = function ue(t) {\n        var e = E();\n        return t < 0 ? this.lShiftTo(-t, e) : this.rShiftTo(t, e), e;\n      }, F.prototype.getLowestSetBit = function ce() {\n        for (var t = 0; t < this.t; ++t) if (0 != this[t]) return t * this.DB + H(this[t]);\n\n        return this.s < 0 ? this.t * this.DB : -1;\n      }, F.prototype.bitCount = function he() {\n        for (var t = 0, e = this.s & this.DM, r = 0; r < this.t; ++r) t += V(this[r] ^ e);\n\n        return t;\n      }, F.prototype.testBit = function le(t) {\n        var e = Math.floor(t / this.DB);\n        return e >= this.t ? 0 != this.s : 0 != (this[e] & 1 << t % this.DB);\n      }, F.prototype.setBit = function fe(t) {\n        return this.changeBit(t, O);\n      }, F.prototype.clearBit = function ge(t) {\n        return this.changeBit(t, M);\n      }, F.prototype.flipBit = function de(t) {\n        return this.changeBit(t, j);\n      }, F.prototype.add = function pe(t) {\n        var e = E();\n        return this.addTo(t, e), e;\n      }, F.prototype.subtract = function ve(t) {\n        var e = E();\n        return this.subTo(t, e), e;\n      }, F.prototype.multiply = function ye(t) {\n        var e = E();\n        return this.multiplyTo(t, e), e;\n      }, F.prototype.divide = function me(t) {\n        var e = E();\n        return this.divRemTo(t, e, null), e;\n      }, F.prototype.remainder = function _e(t) {\n        var e = E();\n        return this.divRemTo(t, null, e), e;\n      }, F.prototype.divideAndRemainder = function Se(t) {\n        var e = E(),\n            r = E();\n        return this.divRemTo(t, e, r), new Array(e, r);\n      }, F.prototype.modPow = function be(t, e) {\n        var r,\n            n,\n            i = t.bitLength(),\n            o = D(1);\n        if (i <= 0) return o;\n        r = i < 18 ? 1 : i < 48 ? 3 : i < 144 ? 4 : i < 768 ? 5 : 6, n = i < 8 ? new N(e) : e.isEven() ? new J(e) : new U(e);\n        var s = new Array(),\n            a = 3,\n            u = r - 1,\n            c = (1 << r) - 1;\n\n        if (s[1] = n.convert(this), r > 1) {\n          var h = E();\n\n          for (n.sqrTo(s[1], h); a <= c;) s[a] = E(), n.mulTo(h, s[a - 2], s[a]), a += 2;\n        }\n\n        var l,\n            f,\n            g = t.t - 1,\n            d = !0,\n            p = E();\n\n        for (i = L(t[g]) - 1; g >= 0;) {\n          for (i >= u ? l = t[g] >> i - u & c : (l = (t[g] & (1 << i + 1) - 1) << u - i, g > 0 && (l |= t[g - 1] >> this.DB + i - u)), a = r; 0 == (1 & l);) l >>= 1, --a;\n\n          if ((i -= a) < 0 && (i += this.DB, --g), d) s[l].copyTo(o), d = !1;else {\n            for (; a > 1;) n.sqrTo(o, p), n.sqrTo(p, o), a -= 2;\n\n            a > 0 ? n.sqrTo(o, p) : (f = o, o = p, p = f), n.mulTo(p, s[l], o);\n          }\n\n          for (; g >= 0 && 0 == (t[g] & 1 << i);) n.sqrTo(o, p), f = o, o = p, p = f, --i < 0 && (i = this.DB - 1, --g);\n        }\n\n        return n.revert(o);\n      }, F.prototype.modInverse = function we(t) {\n        var e = t.isEven();\n        if (this.isEven() && e || 0 == t.signum()) return F.ZERO;\n\n        for (var r = t.clone(), n = this.clone(), i = D(1), o = D(0), s = D(0), a = D(1); 0 != r.signum();) {\n          for (; r.isEven();) r.rShiftTo(1, r), e ? (i.isEven() && o.isEven() || (i.addTo(this, i), o.subTo(t, o)), i.rShiftTo(1, i)) : o.isEven() || o.subTo(t, o), o.rShiftTo(1, o);\n\n          for (; n.isEven();) n.rShiftTo(1, n), e ? (s.isEven() && a.isEven() || (s.addTo(this, s), a.subTo(t, a)), s.rShiftTo(1, s)) : a.isEven() || a.subTo(t, a), a.rShiftTo(1, a);\n\n          r.compareTo(n) >= 0 ? (r.subTo(n, r), e && i.subTo(s, i), o.subTo(a, o)) : (n.subTo(r, n), e && s.subTo(i, s), a.subTo(o, a));\n        }\n\n        return 0 != n.compareTo(F.ONE) ? F.ZERO : a.compareTo(t) >= 0 ? a.subtract(t) : a.signum() < 0 ? (a.addTo(t, a), a.signum() < 0 ? a.add(t) : a) : a;\n      }, F.prototype.pow = function Fe(t) {\n        return this.exp(t, new K());\n      }, F.prototype.gcd = function Ee(t) {\n        var e = this.s < 0 ? this.negate() : this.clone(),\n            r = t.s < 0 ? t.negate() : t.clone();\n\n        if (e.compareTo(r) < 0) {\n          var n = e;\n          e = r, r = n;\n        }\n\n        var i = e.getLowestSetBit(),\n            o = r.getLowestSetBit();\n        if (o < 0) return e;\n\n        for (i < o && (o = i), o > 0 && (e.rShiftTo(o, e), r.rShiftTo(o, r)); e.signum() > 0;) (i = e.getLowestSetBit()) > 0 && e.rShiftTo(i, e), (i = r.getLowestSetBit()) > 0 && r.rShiftTo(i, r), e.compareTo(r) >= 0 ? (e.subTo(r, e), e.rShiftTo(1, e)) : (r.subTo(e, r), r.rShiftTo(1, r));\n\n        return o > 0 && r.lShiftTo(o, r), r;\n      }, F.prototype.isProbablePrime = function xe(t) {\n        var e,\n            r = this.abs();\n\n        if (1 == r.t && r[0] <= Rt[Rt.length - 1]) {\n          for (e = 0; e < Rt.length; ++e) if (r[0] == Rt[e]) return !0;\n\n          return !1;\n        }\n\n        if (r.isEven()) return !1;\n\n        for (e = 1; e < Rt.length;) {\n          for (var n = Rt[e], i = e + 1; i < Rt.length && n < It;) n *= Rt[i++];\n\n          for (n = r.modInt(n); e < i;) if (n % Rt[e++] == 0) return !1;\n        }\n\n        return r.millerRabin(t);\n      }, F.prototype.square = function Ae() {\n        var t = E();\n        return this.squareTo(t), t;\n      }, Dt.prototype.init = function ke(t) {\n        var e, r, n;\n\n        for (e = 0; e < 256; ++e) this.S[e] = e;\n\n        for (r = 0, e = 0; e < 256; ++e) r = r + this.S[e] + t[e % t.length] & 255, n = this.S[e], this.S[e] = this.S[r], this.S[r] = n;\n\n        this.i = 0, this.j = 0;\n      }, Dt.prototype.next = function Pe() {\n        var t;\n        return this.i = this.i + 1 & 255, this.j = this.j + this.S[this.i] & 255, t = this.S[this.i], this.S[this.i] = this.S[this.j], this.S[this.j] = t, this.S[t + this.S[this.i] & 255];\n      };\n      var Ce, Te, Re;\n      /*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/\n       */\n\n      function Ie() {\n        !function t(e) {\n          Te[Re++] ^= 255 & e, Te[Re++] ^= e >> 8 & 255, Te[Re++] ^= e >> 16 & 255, Te[Re++] ^= e >> 24 & 255, Re >= 256 && (Re -= 256);\n        }(new Date().getTime());\n      }\n\n      if (null == Te) {\n        var De;\n\n        if (Te = new Array(), Re = 0, void 0 !== i && (void 0 !== i.crypto || void 0 !== i.msCrypto)) {\n          var Le = i.crypto || i.msCrypto;\n\n          if (Le.getRandomValues) {\n            var Ne = new Uint8Array(32);\n\n            for (Le.getRandomValues(Ne), De = 0; De < 32; ++De) Te[Re++] = Ne[De];\n          } else if (\"Netscape\" == n.appName && n.appVersion < \"5\") {\n            var Ue = i.crypto.random(32);\n\n            for (De = 0; De < Ue.length; ++De) Te[Re++] = 255 & Ue.charCodeAt(De);\n          }\n        }\n\n        for (; Re < 256;) De = Math.floor(65536 * Math.random()), Te[Re++] = De >>> 8, Te[Re++] = 255 & De;\n\n        Re = 0, Ie();\n      }\n\n      function Be() {\n        if (null == Ce) {\n          for (Ie(), (Ce = function t() {\n            return new Dt();\n          }()).init(Te), Re = 0; Re < Te.length; ++Re) Te[Re] = 0;\n\n          Re = 0;\n        }\n\n        return Ce.next();\n      }\n\n      function Oe() {}\n      /*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/\n       */\n\n\n      function je(t, e) {\n        return new F(t, e);\n      }\n\n      function Me(t, e, r) {\n        for (var n = \"\", i = 0; n.length < e;) n += r(String.fromCharCode.apply(String, t.concat([(4278190080 & i) >> 24, (16711680 & i) >> 16, (65280 & i) >> 8, 255 & i]))), i += 1;\n\n        return n;\n      }\n\n      function He() {\n        this.n = null, this.e = 0, this.d = null, this.p = null, this.q = null, this.dmp1 = null, this.dmq1 = null, this.coeff = null;\n      }\n      /*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/\n       */\n\n\n      function Ve(t, e) {\n        this.x = e, this.q = t;\n      }\n\n      function Ke(t, e, r, n) {\n        this.curve = t, this.x = e, this.y = r, this.z = null == n ? F.ONE : n, this.zinv = null;\n      }\n\n      function qe(t, e, r) {\n        this.q = t, this.a = this.fromBigInteger(e), this.b = this.fromBigInteger(r), this.infinity = new Ke(this, null, null);\n      }\n\n      Oe.prototype.nextBytes = function Je(t) {\n        var e;\n\n        for (e = 0; e < t.length; ++e) t[e] = Be();\n      }, He.prototype.doPublic = function We(t) {\n        return t.modPowInt(this.e, this.n);\n      }, He.prototype.setPublic = function ze(t, e) {\n        if (this.isPublic = !0, this.isPrivate = !1, \"string\" != typeof t) this.n = t, this.e = e;else {\n          if (!(null != t && null != e && t.length > 0 && e.length > 0)) throw \"Invalid RSA public key\";\n          this.n = je(t, 16), this.e = parseInt(e, 16);\n        }\n      }, He.prototype.encrypt = function Ye(t) {\n        var e = function r(t, e) {\n          if (e < t.length + 11) throw \"Message too long for RSA\";\n\n          for (var r = new Array(), n = t.length - 1; n >= 0 && e > 0;) {\n            var i = t.charCodeAt(n--);\n            i < 128 ? r[--e] = i : i > 127 && i < 2048 ? (r[--e] = 63 & i | 128, r[--e] = i >> 6 | 192) : (r[--e] = 63 & i | 128, r[--e] = i >> 6 & 63 | 128, r[--e] = i >> 12 | 224);\n          }\n\n          r[--e] = 0;\n\n          for (var o = new Oe(), s = new Array(); e > 2;) {\n            for (s[0] = 0; 0 == s[0];) o.nextBytes(s);\n\n            r[--e] = s[0];\n          }\n\n          return r[--e] = 2, r[--e] = 0, new F(r);\n        }(t, this.n.bitLength() + 7 >> 3);\n\n        if (null == e) return null;\n        var n = this.doPublic(e);\n        if (null == n) return null;\n        var i = n.toString(16);\n        return 0 == (1 & i.length) ? i : \"0\" + i;\n      }, He.prototype.encryptOAEP = function Ge(t, e, r) {\n        var n = function i(t, e, r, n) {\n          var i = br.crypto.MessageDigest,\n              o = br.crypto.Util,\n              s = null;\n          if (r || (r = \"sha1\"), \"string\" == typeof r && (s = i.getCanonicalAlgName(r), n = i.getHashLength(s), r = function t(e) {\n            return Nr(o.hashHex(Ur(e), s));\n          }), t.length + 2 * n + 2 > e) throw \"Message too long for RSA\";\n          var a,\n              u = \"\";\n\n          for (a = 0; a < e - t.length - 2 * n - 2; a += 1) u += \"\\0\";\n\n          var c = r(\"\") + u + \"\u0001\" + t,\n              h = new Array(n);\n          new Oe().nextBytes(h);\n          var l = Me(h, c.length, r),\n              f = [];\n\n          for (a = 0; a < c.length; a += 1) f[a] = c.charCodeAt(a) ^ l.charCodeAt(a);\n\n          var g = Me(f, h.length, r),\n              d = [0];\n\n          for (a = 0; a < h.length; a += 1) d[a + 1] = h[a] ^ g.charCodeAt(a);\n\n          return new F(d.concat(f));\n        }(t, this.n.bitLength() + 7 >> 3, e, r);\n\n        if (null == n) return null;\n        var o = this.doPublic(n);\n        if (null == o) return null;\n        var s = o.toString(16);\n        return 0 == (1 & s.length) ? s : \"0\" + s;\n      }, He.prototype.type = \"RSA\", Ve.prototype.equals = function Xe(t) {\n        return t == this || this.q.equals(t.q) && this.x.equals(t.x);\n      }, Ve.prototype.toBigInteger = function $e() {\n        return this.x;\n      }, Ve.prototype.negate = function Qe() {\n        return new Ve(this.q, this.x.negate().mod(this.q));\n      }, Ve.prototype.add = function Ze(t) {\n        return new Ve(this.q, this.x.add(t.toBigInteger()).mod(this.q));\n      }, Ve.prototype.subtract = function tr(t) {\n        return new Ve(this.q, this.x.subtract(t.toBigInteger()).mod(this.q));\n      }, Ve.prototype.multiply = function er(t) {\n        return new Ve(this.q, this.x.multiply(t.toBigInteger()).mod(this.q));\n      }, Ve.prototype.square = function rr() {\n        return new Ve(this.q, this.x.square().mod(this.q));\n      }, Ve.prototype.divide = function nr(t) {\n        return new Ve(this.q, this.x.multiply(t.toBigInteger().modInverse(this.q)).mod(this.q));\n      }, Ke.prototype.getX = function ir() {\n        return null == this.zinv && (this.zinv = this.z.modInverse(this.curve.q)), this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q));\n      }, Ke.prototype.getY = function or() {\n        return null == this.zinv && (this.zinv = this.z.modInverse(this.curve.q)), this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q));\n      }, Ke.prototype.equals = function sr(t) {\n        return t == this || (this.isInfinity() ? t.isInfinity() : t.isInfinity() ? this.isInfinity() : !!t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(F.ZERO) && t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(F.ZERO));\n      }, Ke.prototype.isInfinity = function ar() {\n        return null == this.x && null == this.y || this.z.equals(F.ZERO) && !this.y.toBigInteger().equals(F.ZERO);\n      }, Ke.prototype.negate = function ur() {\n        return new Ke(this.curve, this.x, this.y.negate(), this.z);\n      }, Ke.prototype.add = function cr(t) {\n        if (this.isInfinity()) return t;\n        if (t.isInfinity()) return this;\n        var e = t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),\n            r = t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);\n        if (F.ZERO.equals(r)) return F.ZERO.equals(e) ? this.twice() : this.curve.getInfinity();\n        var n = new F(\"3\"),\n            i = this.x.toBigInteger(),\n            o = this.y.toBigInteger(),\n            s = (t.x.toBigInteger(), t.y.toBigInteger(), r.square()),\n            a = s.multiply(r),\n            u = i.multiply(s),\n            c = e.square().multiply(this.z),\n            h = c.subtract(u.shiftLeft(1)).multiply(t.z).subtract(a).multiply(r).mod(this.curve.q),\n            l = u.multiply(n).multiply(e).subtract(o.multiply(a)).subtract(c.multiply(e)).multiply(t.z).add(e.multiply(a)).mod(this.curve.q),\n            f = a.multiply(this.z).multiply(t.z).mod(this.curve.q);\n        return new Ke(this.curve, this.curve.fromBigInteger(h), this.curve.fromBigInteger(l), f);\n      }, Ke.prototype.twice = function hr() {\n        if (this.isInfinity()) return this;\n        if (0 == this.y.toBigInteger().signum()) return this.curve.getInfinity();\n        var t = new F(\"3\"),\n            e = this.x.toBigInteger(),\n            r = this.y.toBigInteger(),\n            n = r.multiply(this.z),\n            i = n.multiply(r).mod(this.curve.q),\n            o = this.curve.a.toBigInteger(),\n            s = e.square().multiply(t);\n        F.ZERO.equals(o) || (s = s.add(this.z.square().multiply(o)));\n        var a = (s = s.mod(this.curve.q)).square().subtract(e.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(n).mod(this.curve.q),\n            u = s.multiply(t).multiply(e).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(s.square().multiply(s)).mod(this.curve.q),\n            c = n.square().multiply(n).shiftLeft(3).mod(this.curve.q);\n        return new Ke(this.curve, this.curve.fromBigInteger(a), this.curve.fromBigInteger(u), c);\n      }, Ke.prototype.multiply = function lr(t) {\n        if (this.isInfinity()) return this;\n        if (0 == t.signum()) return this.curve.getInfinity();\n        var e,\n            r = t,\n            n = r.multiply(new F(\"3\")),\n            i = this.negate(),\n            o = this,\n            s = this.curve.q.subtract(t),\n            a = s.multiply(new F(\"3\")),\n            u = new Ke(this.curve, this.x, this.y),\n            c = u.negate();\n\n        for (e = n.bitLength() - 2; e > 0; --e) {\n          o = o.twice();\n          var h = n.testBit(e);\n          h != r.testBit(e) && (o = o.add(h ? this : i));\n        }\n\n        for (e = a.bitLength() - 2; e > 0; --e) {\n          u = u.twice();\n          var l = a.testBit(e);\n          l != s.testBit(e) && (u = u.add(l ? u : c));\n        }\n\n        return o;\n      }, Ke.prototype.multiplyTwo = function fr(t, e, r) {\n        var n;\n        n = t.bitLength() > r.bitLength() ? t.bitLength() - 1 : r.bitLength() - 1;\n\n        for (var i = this.curve.getInfinity(), o = this.add(e); n >= 0;) i = i.twice(), t.testBit(n) ? i = r.testBit(n) ? i.add(o) : i.add(this) : r.testBit(n) && (i = i.add(e)), --n;\n\n        return i;\n      }, qe.prototype.getQ = function gr() {\n        return this.q;\n      }, qe.prototype.getA = function dr() {\n        return this.a;\n      }, qe.prototype.getB = function pr() {\n        return this.b;\n      }, qe.prototype.equals = function vr(t) {\n        return t == this || this.q.equals(t.q) && this.a.equals(t.a) && this.b.equals(t.b);\n      }, qe.prototype.getInfinity = function yr() {\n        return this.infinity;\n      }, qe.prototype.fromBigInteger = function mr(t) {\n        return new Ve(this.q, t);\n      }, qe.prototype.decodePointHex = function _r(t) {\n        switch (parseInt(t.substr(0, 2), 16)) {\n          case 0:\n            return this.infinity;\n\n          case 2:\n          case 3:\n            return null;\n\n          case 4:\n          case 6:\n          case 7:\n            var e = (t.length - 2) / 2,\n                r = t.substr(2, e),\n                n = t.substr(e + 2, e);\n            return new Ke(this, this.fromBigInteger(new F(r, 16)), this.fromBigInteger(new F(n, 16)));\n\n          default:\n            return null;\n        }\n      },\n      /*! (c) Stefan Thomas | https://github.com/bitcoinjs/bitcoinjs-lib\n       */\n      Ve.prototype.getByteLength = function () {\n        return Math.floor((this.toBigInteger().bitLength() + 7) / 8);\n      }, Ke.prototype.getEncoded = function (t) {\n        var e = function t(e, r) {\n          var n = e.toByteArrayUnsigned();\n          if (r < n.length) n = n.slice(n.length - r);else for (; r > n.length;) n.unshift(0);\n          return n;\n        },\n            r = this.getX().toBigInteger(),\n            n = this.getY().toBigInteger(),\n            i = e(r, 32);\n\n        return t ? n.isEven() ? i.unshift(2) : i.unshift(3) : (i.unshift(4), i = i.concat(e(n, 32))), i;\n      }, Ke.decodeFrom = function (t, e) {\n        e[0];\n        var r = e.length - 1,\n            n = e.slice(1, 1 + r / 2),\n            i = e.slice(1 + r / 2, 1 + r);\n        n.unshift(0), i.unshift(0);\n        var o = new F(n),\n            s = new F(i);\n        return new Ke(t, t.fromBigInteger(o), t.fromBigInteger(s));\n      }, Ke.decodeFromHex = function (t, e) {\n        e.substr(0, 2);\n        var r = e.length - 2,\n            n = e.substr(2, r / 2),\n            i = e.substr(2 + r / 2, r / 2),\n            o = new F(n, 16),\n            s = new F(i, 16);\n        return new Ke(t, t.fromBigInteger(o), t.fromBigInteger(s));\n      }, Ke.prototype.add2D = function (t) {\n        if (this.isInfinity()) return t;\n        if (t.isInfinity()) return this;\n        if (this.x.equals(t.x)) return this.y.equals(t.y) ? this.twice() : this.curve.getInfinity();\n        var e = t.x.subtract(this.x),\n            r = t.y.subtract(this.y).divide(e),\n            n = r.square().subtract(this.x).subtract(t.x),\n            i = r.multiply(this.x.subtract(n)).subtract(this.y);\n        return new Ke(this.curve, n, i);\n      }, Ke.prototype.twice2D = function () {\n        if (this.isInfinity()) return this;\n        if (0 == this.y.toBigInteger().signum()) return this.curve.getInfinity();\n        var t = this.curve.fromBigInteger(F.valueOf(2)),\n            e = this.curve.fromBigInteger(F.valueOf(3)),\n            r = this.x.square().multiply(e).add(this.curve.a).divide(this.y.multiply(t)),\n            n = r.square().subtract(this.x.multiply(t)),\n            i = r.multiply(this.x.subtract(n)).subtract(this.y);\n        return new Ke(this.curve, n, i);\n      }, Ke.prototype.multiply2D = function (t) {\n        if (this.isInfinity()) return this;\n        if (0 == t.signum()) return this.curve.getInfinity();\n        var e,\n            r = t,\n            n = r.multiply(new F(\"3\")),\n            i = this.negate(),\n            o = this;\n\n        for (e = n.bitLength() - 2; e > 0; --e) {\n          o = o.twice();\n          var s = n.testBit(e);\n          s != r.testBit(e) && (o = o.add2D(s ? this : i));\n        }\n\n        return o;\n      }, Ke.prototype.isOnCurve = function () {\n        var t = this.getX().toBigInteger(),\n            e = this.getY().toBigInteger(),\n            r = this.curve.getA().toBigInteger(),\n            n = this.curve.getB().toBigInteger(),\n            i = this.curve.getQ(),\n            o = e.multiply(e).mod(i),\n            s = t.multiply(t).multiply(t).add(r.multiply(t)).add(n).mod(i);\n        return o.equals(s);\n      }, Ke.prototype.toString = function () {\n        return \"(\" + this.getX().toBigInteger().toString() + \",\" + this.getY().toBigInteger().toString() + \")\";\n      }, Ke.prototype.validate = function () {\n        var t = this.curve.getQ();\n        if (this.isInfinity()) throw new Error(\"Point is at infinity.\");\n        var e = this.getX().toBigInteger(),\n            r = this.getY().toBigInteger();\n        if (e.compareTo(F.ONE) < 0 || e.compareTo(t.subtract(F.ONE)) > 0) throw new Error(\"x coordinate out of bounds\");\n        if (r.compareTo(F.ONE) < 0 || r.compareTo(t.subtract(F.ONE)) > 0) throw new Error(\"y coordinate out of bounds\");\n        if (!this.isOnCurve()) throw new Error(\"Point is not on the curve.\");\n        if (this.multiply(t).isInfinity()) throw new Error(\"Point is not a scalar multiple of G.\");\n        return !0;\n      };\n      /*! Mike Samuel (c) 2009 | code.google.com/p/json-sans-eval\n       */\n\n      var Sr = function () {\n        var t = new RegExp('(?:false|true|null|[\\\\{\\\\}\\\\[\\\\]]|(?:-?\\\\b(?:0|[1-9][0-9]*)(?:\\\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\\\b)|(?:\"(?:[^\\\\0-\\\\x08\\\\x0a-\\\\x1f\"\\\\\\\\]|\\\\\\\\(?:[\"/\\\\\\\\bfnrt]|u[0-9A-Fa-f]{4}))*\"))', \"g\"),\n            e = new RegExp(\"\\\\\\\\(?:([^u])|u(.{4}))\", \"g\"),\n            n = {\n          '\"': '\"',\n          \"/\": \"/\",\n          \"\\\\\": \"\\\\\",\n          b: \"\\b\",\n          f: \"\\f\",\n          n: \"\\n\",\n          r: \"\\r\",\n          t: \"\\t\"\n        };\n\n        function i(t, e, r) {\n          return e ? n[e] : String.fromCharCode(parseInt(r, 16));\n        }\n\n        var o = new String(\"\"),\n            s = Object.hasOwnProperty;\n        return function (n, a) {\n          var u,\n              c,\n              h = n.match(t),\n              l = h[0],\n              f = !1;\n          \"{\" === l ? u = {} : \"[\" === l ? u = [] : (u = [], f = !0);\n\n          for (var g = [u], d = 1 - f, p = h.length; d < p; ++d) {\n            var v;\n\n            switch ((l = h[d]).charCodeAt(0)) {\n              default:\n                (v = g[0])[c || v.length] = +l, c = void 0;\n                break;\n\n              case 34:\n                if (-1 !== (l = l.substring(1, l.length - 1)).indexOf(\"\\\\\") && (l = l.replace(e, i)), v = g[0], !c) {\n                  if (!(v instanceof Array)) {\n                    c = l || o;\n                    break;\n                  }\n\n                  c = v.length;\n                }\n\n                v[c] = l, c = void 0;\n                break;\n\n              case 91:\n                v = g[0], g.unshift(v[c || v.length] = []), c = void 0;\n                break;\n\n              case 93:\n                g.shift();\n                break;\n\n              case 102:\n                (v = g[0])[c || v.length] = !1, c = void 0;\n                break;\n\n              case 110:\n                (v = g[0])[c || v.length] = null, c = void 0;\n                break;\n\n              case 116:\n                (v = g[0])[c || v.length] = !0, c = void 0;\n                break;\n\n              case 123:\n                v = g[0], g.unshift(v[c || v.length] = {}), c = void 0;\n                break;\n\n              case 125:\n                g.shift();\n            }\n          }\n\n          if (f) {\n            if (1 !== g.length) throw new Error();\n            u = u[0];\n          } else if (g.length) throw new Error();\n\n          if (a) {\n            u = function t(e, n) {\n              var i = e[n];\n\n              if (i && \"object\" === (void 0 === i ? \"undefined\" : r(i))) {\n                var o = null;\n\n                for (var u in i) if (s.call(i, u) && i !== e) {\n                  var c = t(i, u);\n                  void 0 !== c ? i[u] = c : (o || (o = []), o.push(u));\n                }\n\n                if (o) for (var h = o.length; --h >= 0;) delete i[o[h]];\n              }\n\n              return a.call(e, n, i);\n            }({\n              \"\": u\n            }, \"\");\n          }\n\n          return u;\n        };\n      }();\n\n      void 0 !== br && br || (e.KJUR = br = {}), void 0 !== br.asn1 && br.asn1 || (br.asn1 = {}), br.asn1.ASN1Util = new function () {\n        this.integerToByteHex = function (t) {\n          var e = t.toString(16);\n          return e.length % 2 == 1 && (e = \"0\" + e), e;\n        }, this.bigIntToMinTwosComplementsHex = function (t) {\n          var e = t.toString(16);\n          if (\"-\" != e.substr(0, 1)) e.length % 2 == 1 ? e = \"0\" + e : e.match(/^[0-7]/) || (e = \"00\" + e);else {\n            var r = e.substr(1).length;\n            r % 2 == 1 ? r += 1 : e.match(/^[0-7]/) || (r += 2);\n\n            for (var n = \"\", i = 0; i < r; i++) n += \"f\";\n\n            e = new F(n, 16).xor(t).add(F.ONE).toString(16).replace(/^-/, \"\");\n          }\n          return e;\n        }, this.getPEMStringFromHex = function (t, e) {\n          return Mr(t, e);\n        }, this.newObject = function (t) {\n          var e = br.asn1,\n              r = e.ASN1Object,\n              n = e.DERBoolean,\n              i = e.DERInteger,\n              o = e.DERBitString,\n              s = e.DEROctetString,\n              a = e.DERNull,\n              u = e.DERObjectIdentifier,\n              c = e.DEREnumerated,\n              h = e.DERUTF8String,\n              l = e.DERNumericString,\n              f = e.DERPrintableString,\n              g = e.DERTeletexString,\n              d = e.DERIA5String,\n              p = e.DERUTCTime,\n              v = e.DERGeneralizedTime,\n              y = e.DERVisibleString,\n              m = e.DERBMPString,\n              _ = e.DERSequence,\n              S = e.DERSet,\n              b = e.DERTaggedObject,\n              w = e.ASN1Util.newObject;\n          if (t instanceof e.ASN1Object) return t;\n          var F = Object.keys(t);\n          if (1 != F.length) throw new Error(\"key of param shall be only one.\");\n          var E = F[0];\n          if (-1 == \":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:\".indexOf(\":\" + E + \":\")) throw new Error(\"undefined key: \" + E);\n          if (\"bool\" == E) return new n(t[E]);\n          if (\"int\" == E) return new i(t[E]);\n          if (\"bitstr\" == E) return new o(t[E]);\n          if (\"octstr\" == E) return new s(t[E]);\n          if (\"null\" == E) return new a(t[E]);\n          if (\"oid\" == E) return new u(t[E]);\n          if (\"enum\" == E) return new c(t[E]);\n          if (\"utf8str\" == E) return new h(t[E]);\n          if (\"numstr\" == E) return new l(t[E]);\n          if (\"prnstr\" == E) return new f(t[E]);\n          if (\"telstr\" == E) return new g(t[E]);\n          if (\"ia5str\" == E) return new d(t[E]);\n          if (\"utctime\" == E) return new p(t[E]);\n          if (\"gentime\" == E) return new v(t[E]);\n          if (\"visstr\" == E) return new y(t[E]);\n          if (\"bmpstr\" == E) return new m(t[E]);\n          if (\"asn1\" == E) return new r(t[E]);\n\n          if (\"seq\" == E) {\n            for (var x = t[E], A = [], k = 0; k < x.length; k++) {\n              var P = w(x[k]);\n              A.push(P);\n            }\n\n            return new _({\n              array: A\n            });\n          }\n\n          if (\"set\" == E) {\n            for (x = t[E], A = [], k = 0; k < x.length; k++) {\n              P = w(x[k]);\n              A.push(P);\n            }\n\n            return new S({\n              array: A\n            });\n          }\n\n          if (\"tag\" == E) {\n            var C = t[E];\n\n            if (\"[object Array]\" === Object.prototype.toString.call(C) && 3 == C.length) {\n              var T = w(C[2]);\n              return new b({\n                tag: C[0],\n                explicit: C[1],\n                obj: T\n              });\n            }\n\n            return new b(C);\n          }\n        }, this.jsonToASN1HEX = function (t) {\n          return this.newObject(t).getEncodedHex();\n        };\n      }(), br.asn1.ASN1Util.oidHexToInt = function (t) {\n        for (var e = \"\", r = parseInt(t.substr(0, 2), 16), n = (e = Math.floor(r / 40) + \".\" + r % 40, \"\"), i = 2; i < t.length; i += 2) {\n          var o = (\"00000000\" + parseInt(t.substr(i, 2), 16).toString(2)).slice(-8);\n          if (n += o.substr(1, 7), \"0\" == o.substr(0, 1)) e = e + \".\" + new F(n, 2).toString(10), n = \"\";\n        }\n\n        return e;\n      }, br.asn1.ASN1Util.oidIntToHex = function (t) {\n        var e = function t(e) {\n          var r = e.toString(16);\n          return 1 == r.length && (r = \"0\" + r), r;\n        },\n            r = function t(r) {\n          var n = \"\",\n              i = new F(r, 10).toString(2),\n              o = 7 - i.length % 7;\n          7 == o && (o = 0);\n\n          for (var s = \"\", a = 0; a < o; a++) s += \"0\";\n\n          i = s + i;\n\n          for (a = 0; a < i.length - 1; a += 7) {\n            var u = i.substr(a, 7);\n            a != i.length - 7 && (u = \"1\" + u), n += e(parseInt(u, 2));\n          }\n\n          return n;\n        };\n\n        if (!t.match(/^[0-9.]+$/)) throw \"malformed oid string: \" + t;\n        var n = \"\",\n            i = t.split(\".\"),\n            o = 40 * parseInt(i[0]) + parseInt(i[1]);\n        n += e(o), i.splice(0, 2);\n\n        for (var s = 0; s < i.length; s++) n += r(i[s]);\n\n        return n;\n      }, br.asn1.ASN1Object = function (t) {\n        this.params = null, this.getLengthHexFromValue = function () {\n          if (void 0 === this.hV || null == this.hV) throw new Error(\"this.hV is null or undefined\");\n          if (this.hV.length % 2 == 1) throw new Error(\"value hex must be even length: n=\" + \"\".length + \",v=\" + this.hV);\n          var t = this.hV.length / 2,\n              e = t.toString(16);\n          if (e.length % 2 == 1 && (e = \"0\" + e), t < 128) return e;\n          var r = e.length / 2;\n          if (r > 15) throw \"ASN.1 length too long to represent by 8x: n = \" + t.toString(16);\n          return (128 + r).toString(16) + e;\n        }, this.getEncodedHex = function () {\n          return (null == this.hTLV || this.isModified) && (this.hV = this.getFreshValueHex(), this.hL = this.getLengthHexFromValue(), this.hTLV = this.hT + this.hL + this.hV, this.isModified = !1), this.hTLV;\n        }, this.getValueHex = function () {\n          return this.getEncodedHex(), this.hV;\n        }, this.getFreshValueHex = function () {\n          return \"\";\n        }, this.setByParam = function (t) {\n          this.params = t;\n        }, null != t && null != t.tlv && (this.hTLV = t.tlv, this.isModified = !1);\n      }, br.asn1.DERAbstractString = function (t) {\n        br.asn1.DERAbstractString.superclass.constructor.call(this);\n        this.getString = function () {\n          return this.s;\n        }, this.setString = function (t) {\n          this.hTLV = null, this.isModified = !0, this.s = t, this.hV = Dr(this.s).toLowerCase();\n        }, this.setStringHex = function (t) {\n          this.hTLV = null, this.isModified = !0, this.s = null, this.hV = t;\n        }, this.getFreshValueHex = function () {\n          return this.hV;\n        }, void 0 !== t && (\"string\" == typeof t ? this.setString(t) : void 0 !== t.str ? this.setString(t.str) : void 0 !== t.hex && this.setStringHex(t.hex));\n      }, o.lang.extend(br.asn1.DERAbstractString, br.asn1.ASN1Object), br.asn1.DERAbstractTime = function (t) {\n        br.asn1.DERAbstractTime.superclass.constructor.call(this);\n        this.localDateToUTC = function (t) {\n          var e = t.getTime() + 6e4 * t.getTimezoneOffset();\n          return new Date(e);\n        }, this.formatDate = function (t, e, r) {\n          var n = this.zeroPadding,\n              i = this.localDateToUTC(t),\n              o = String(i.getFullYear());\n          \"utc\" == e && (o = o.substr(2, 2));\n          var s = o + n(String(i.getMonth() + 1), 2) + n(String(i.getDate()), 2) + n(String(i.getHours()), 2) + n(String(i.getMinutes()), 2) + n(String(i.getSeconds()), 2);\n\n          if (!0 === r) {\n            var a = i.getMilliseconds();\n\n            if (0 != a) {\n              var u = n(String(a), 3);\n              s = s + \".\" + (u = u.replace(/[0]+$/, \"\"));\n            }\n          }\n\n          return s + \"Z\";\n        }, this.zeroPadding = function (t, e) {\n          return t.length >= e ? t : new Array(e - t.length + 1).join(\"0\") + t;\n        }, this.getString = function () {\n          return this.s;\n        }, this.setString = function (t) {\n          this.hTLV = null, this.isModified = !0, this.s = t, this.hV = Pr(t);\n        }, this.setByDateValue = function (t, e, r, n, i, o) {\n          var s = new Date(Date.UTC(t, e - 1, r, n, i, o, 0));\n          this.setByDate(s);\n        }, this.getFreshValueHex = function () {\n          return this.hV;\n        };\n      }, o.lang.extend(br.asn1.DERAbstractTime, br.asn1.ASN1Object), br.asn1.DERAbstractStructured = function (t) {\n        br.asn1.DERAbstractString.superclass.constructor.call(this);\n        this.setByASN1ObjectArray = function (t) {\n          this.hTLV = null, this.isModified = !0, this.asn1Array = t;\n        }, this.appendASN1Object = function (t) {\n          this.hTLV = null, this.isModified = !0, this.asn1Array.push(t);\n        }, this.asn1Array = new Array(), void 0 !== t && void 0 !== t.array && (this.asn1Array = t.array);\n      }, o.lang.extend(br.asn1.DERAbstractStructured, br.asn1.ASN1Object), br.asn1.DERBoolean = function (t) {\n        br.asn1.DERBoolean.superclass.constructor.call(this), this.hT = \"01\", this.hTLV = 0 == t ? \"010100\" : \"0101ff\";\n      }, o.lang.extend(br.asn1.DERBoolean, br.asn1.ASN1Object), br.asn1.DERInteger = function (t) {\n        br.asn1.DERInteger.superclass.constructor.call(this), this.hT = \"02\", this.setByBigInteger = function (t) {\n          this.hTLV = null, this.isModified = !0, this.hV = br.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t);\n        }, this.setByInteger = function (t) {\n          var e = new F(String(t), 10);\n          this.setByBigInteger(e);\n        }, this.setValueHex = function (t) {\n          this.hV = t;\n        }, this.getFreshValueHex = function () {\n          return this.hV;\n        }, void 0 !== t && (void 0 !== t.bigint ? this.setByBigInteger(t.bigint) : void 0 !== t.int ? this.setByInteger(t.int) : \"number\" == typeof t ? this.setByInteger(t) : void 0 !== t.hex && this.setValueHex(t.hex));\n      }, o.lang.extend(br.asn1.DERInteger, br.asn1.ASN1Object), br.asn1.DERBitString = function (t) {\n        if (void 0 !== t && void 0 !== t.obj) {\n          var e = br.asn1.ASN1Util.newObject(t.obj);\n          t.hex = \"00\" + e.getEncodedHex();\n        }\n\n        br.asn1.DERBitString.superclass.constructor.call(this), this.hT = \"03\", this.setHexValueIncludingUnusedBits = function (t) {\n          this.hTLV = null, this.isModified = !0, this.hV = t;\n        }, this.setUnusedBitsAndHexValue = function (t, e) {\n          if (t < 0 || 7 < t) throw \"unused bits shall be from 0 to 7: u = \" + t;\n          var r = \"0\" + t;\n          this.hTLV = null, this.isModified = !0, this.hV = r + e;\n        }, this.setByBinaryString = function (t) {\n          var e = 8 - (t = t.replace(/0+$/, \"\")).length % 8;\n          8 == e && (e = 0);\n\n          for (var r = 0; r <= e; r++) t += \"0\";\n\n          var n = \"\";\n\n          for (r = 0; r < t.length - 1; r += 8) {\n            var i = t.substr(r, 8),\n                o = parseInt(i, 2).toString(16);\n            1 == o.length && (o = \"0\" + o), n += o;\n          }\n\n          this.hTLV = null, this.isModified = !0, this.hV = \"0\" + e + n;\n        }, this.setByBooleanArray = function (t) {\n          for (var e = \"\", r = 0; r < t.length; r++) 1 == t[r] ? e += \"1\" : e += \"0\";\n\n          this.setByBinaryString(e);\n        }, this.newFalseArray = function (t) {\n          for (var e = new Array(t), r = 0; r < t; r++) e[r] = !1;\n\n          return e;\n        }, this.getFreshValueHex = function () {\n          return this.hV;\n        }, void 0 !== t && (\"string\" == typeof t && t.toLowerCase().match(/^[0-9a-f]+$/) ? this.setHexValueIncludingUnusedBits(t) : void 0 !== t.hex ? this.setHexValueIncludingUnusedBits(t.hex) : void 0 !== t.bin ? this.setByBinaryString(t.bin) : void 0 !== t.array && this.setByBooleanArray(t.array));\n      }, o.lang.extend(br.asn1.DERBitString, br.asn1.ASN1Object), br.asn1.DEROctetString = function (t) {\n        if (void 0 !== t && void 0 !== t.obj) {\n          var e = br.asn1.ASN1Util.newObject(t.obj);\n          t.hex = e.getEncodedHex();\n        }\n\n        br.asn1.DEROctetString.superclass.constructor.call(this, t), this.hT = \"04\";\n      }, o.lang.extend(br.asn1.DEROctetString, br.asn1.DERAbstractString), br.asn1.DERNull = function () {\n        br.asn1.DERNull.superclass.constructor.call(this), this.hT = \"05\", this.hTLV = \"0500\";\n      }, o.lang.extend(br.asn1.DERNull, br.asn1.ASN1Object), br.asn1.DERObjectIdentifier = function (t) {\n        br.asn1.DERObjectIdentifier.superclass.constructor.call(this), this.hT = \"06\", this.setValueHex = function (t) {\n          this.hTLV = null, this.isModified = !0, this.s = null, this.hV = t;\n        }, this.setValueOidString = function (t) {\n          var e = function r(t) {\n            var e = function t(e) {\n              var r = e.toString(16);\n              return 1 == r.length && (r = \"0\" + r), r;\n            },\n                r = function t(r) {\n              var n = \"\",\n                  i = parseInt(r, 10).toString(2),\n                  o = 7 - i.length % 7;\n              7 == o && (o = 0);\n\n              for (var s = \"\", a = 0; a < o; a++) s += \"0\";\n\n              i = s + i;\n\n              for (a = 0; a < i.length - 1; a += 7) {\n                var u = i.substr(a, 7);\n                a != i.length - 7 && (u = \"1\" + u), n += e(parseInt(u, 2));\n              }\n\n              return n;\n            };\n\n            try {\n              if (!t.match(/^[0-9.]+$/)) return null;\n              var n = \"\",\n                  i = t.split(\".\"),\n                  o = 40 * parseInt(i[0], 10) + parseInt(i[1], 10);\n              n += e(o), i.splice(0, 2);\n\n              for (var s = 0; s < i.length; s++) n += r(i[s]);\n\n              return n;\n            } catch (t) {\n              return null;\n            }\n          }(t);\n\n          if (null == e) throw new Error(\"malformed oid string: \" + t);\n          this.hTLV = null, this.isModified = !0, this.s = null, this.hV = e;\n        }, this.setValueName = function (t) {\n          var e = br.asn1.x509.OID.name2oid(t);\n          if (\"\" === e) throw new Error(\"DERObjectIdentifier oidName undefined: \" + t);\n          this.setValueOidString(e);\n        }, this.setValueNameOrOid = function (t) {\n          t.match(/^[0-2].[0-9.]+$/) ? this.setValueOidString(t) : this.setValueName(t);\n        }, this.getFreshValueHex = function () {\n          return this.hV;\n        }, this.setByParam = function (t) {\n          \"string\" == typeof t ? this.setValueNameOrOid(t) : void 0 !== t.oid ? this.setValueNameOrOid(t.oid) : void 0 !== t.name ? this.setValueNameOrOid(t.name) : void 0 !== t.hex && this.setValueHex(t.hex);\n        }, void 0 !== t && this.setByParam(t);\n      }, o.lang.extend(br.asn1.DERObjectIdentifier, br.asn1.ASN1Object), br.asn1.DEREnumerated = function (t) {\n        br.asn1.DEREnumerated.superclass.constructor.call(this), this.hT = \"0a\", this.setByBigInteger = function (t) {\n          this.hTLV = null, this.isModified = !0, this.hV = br.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t);\n        }, this.setByInteger = function (t) {\n          var e = new F(String(t), 10);\n          this.setByBigInteger(e);\n        }, this.setValueHex = function (t) {\n          this.hV = t;\n        }, this.getFreshValueHex = function () {\n          return this.hV;\n        }, void 0 !== t && (void 0 !== t.int ? this.setByInteger(t.int) : \"number\" == typeof t ? this.setByInteger(t) : void 0 !== t.hex && this.setValueHex(t.hex));\n      }, o.lang.extend(br.asn1.DEREnumerated, br.asn1.ASN1Object), br.asn1.DERUTF8String = function (t) {\n        br.asn1.DERUTF8String.superclass.constructor.call(this, t), this.hT = \"0c\";\n      }, o.lang.extend(br.asn1.DERUTF8String, br.asn1.DERAbstractString), br.asn1.DERNumericString = function (t) {\n        br.asn1.DERNumericString.superclass.constructor.call(this, t), this.hT = \"12\";\n      }, o.lang.extend(br.asn1.DERNumericString, br.asn1.DERAbstractString), br.asn1.DERPrintableString = function (t) {\n        br.asn1.DERPrintableString.superclass.constructor.call(this, t), this.hT = \"13\";\n      }, o.lang.extend(br.asn1.DERPrintableString, br.asn1.DERAbstractString), br.asn1.DERTeletexString = function (t) {\n        br.asn1.DERTeletexString.superclass.constructor.call(this, t), this.hT = \"14\";\n      }, o.lang.extend(br.asn1.DERTeletexString, br.asn1.DERAbstractString), br.asn1.DERIA5String = function (t) {\n        br.asn1.DERIA5String.superclass.constructor.call(this, t), this.hT = \"16\";\n      }, o.lang.extend(br.asn1.DERIA5String, br.asn1.DERAbstractString), br.asn1.DERVisibleString = function (t) {\n        br.asn1.DERIA5String.superclass.constructor.call(this, t), this.hT = \"1a\";\n      }, o.lang.extend(br.asn1.DERVisibleString, br.asn1.DERAbstractString), br.asn1.DERBMPString = function (t) {\n        br.asn1.DERBMPString.superclass.constructor.call(this, t), this.hT = \"1e\";\n      }, o.lang.extend(br.asn1.DERBMPString, br.asn1.DERAbstractString), br.asn1.DERUTCTime = function (t) {\n        br.asn1.DERUTCTime.superclass.constructor.call(this, t), this.hT = \"17\", this.setByDate = function (t) {\n          this.hTLV = null, this.isModified = !0, this.date = t, this.s = this.formatDate(this.date, \"utc\"), this.hV = Pr(this.s);\n        }, this.getFreshValueHex = function () {\n          return void 0 === this.date && void 0 === this.s && (this.date = new Date(), this.s = this.formatDate(this.date, \"utc\"), this.hV = Pr(this.s)), this.hV;\n        }, void 0 !== t && (void 0 !== t.str ? this.setString(t.str) : \"string\" == typeof t && t.match(/^[0-9]{12}Z$/) ? this.setString(t) : void 0 !== t.hex ? this.setStringHex(t.hex) : void 0 !== t.date && this.setByDate(t.date));\n      }, o.lang.extend(br.asn1.DERUTCTime, br.asn1.DERAbstractTime), br.asn1.DERGeneralizedTime = function (t) {\n        br.asn1.DERGeneralizedTime.superclass.constructor.call(this, t), this.hT = \"18\", this.withMillis = !1, this.setByDate = function (t) {\n          this.hTLV = null, this.isModified = !0, this.date = t, this.s = this.formatDate(this.date, \"gen\", this.withMillis), this.hV = Pr(this.s);\n        }, this.getFreshValueHex = function () {\n          return void 0 === this.date && void 0 === this.s && (this.date = new Date(), this.s = this.formatDate(this.date, \"gen\", this.withMillis), this.hV = Pr(this.s)), this.hV;\n        }, void 0 !== t && (void 0 !== t.str ? this.setString(t.str) : \"string\" == typeof t && t.match(/^[0-9]{14}Z$/) ? this.setString(t) : void 0 !== t.hex ? this.setStringHex(t.hex) : void 0 !== t.date && this.setByDate(t.date), !0 === t.millis && (this.withMillis = !0));\n      }, o.lang.extend(br.asn1.DERGeneralizedTime, br.asn1.DERAbstractTime), br.asn1.DERSequence = function (t) {\n        br.asn1.DERSequence.superclass.constructor.call(this, t), this.hT = \"30\", this.getFreshValueHex = function () {\n          for (var t = \"\", e = 0; e < this.asn1Array.length; e++) {\n            t += this.asn1Array[e].getEncodedHex();\n          }\n\n          return this.hV = t, this.hV;\n        };\n      }, o.lang.extend(br.asn1.DERSequence, br.asn1.DERAbstractStructured), br.asn1.DERSet = function (t) {\n        br.asn1.DERSet.superclass.constructor.call(this, t), this.hT = \"31\", this.sortFlag = !0, this.getFreshValueHex = function () {\n          for (var t = new Array(), e = 0; e < this.asn1Array.length; e++) {\n            var r = this.asn1Array[e];\n            t.push(r.getEncodedHex());\n          }\n\n          return 1 == this.sortFlag && t.sort(), this.hV = t.join(\"\"), this.hV;\n        }, void 0 !== t && void 0 !== t.sortflag && 0 == t.sortflag && (this.sortFlag = !1);\n      }, o.lang.extend(br.asn1.DERSet, br.asn1.DERAbstractStructured), br.asn1.DERTaggedObject = function (t) {\n        br.asn1.DERTaggedObject.superclass.constructor.call(this);\n        var e = br.asn1;\n        this.hT = \"a0\", this.hV = \"\", this.isExplicit = !0, this.asn1Object = null, this.setASN1Object = function (t, e, r) {\n          this.hT = e, this.isExplicit = t, this.asn1Object = r, this.isExplicit ? (this.hV = this.asn1Object.getEncodedHex(), this.hTLV = null, this.isModified = !0) : (this.hV = null, this.hTLV = r.getEncodedHex(), this.hTLV = this.hTLV.replace(/^../, e), this.isModified = !1);\n        }, this.getFreshValueHex = function () {\n          return this.hV;\n        }, this.setByParam = function (t) {\n          null != t.tag && (this.hT = t.tag), null != t.explicit && (this.isExplicit = t.explicit), null != t.tage && (this.hT = t.tage, this.isExplicit = !0), null != t.tagi && (this.hT = t.tagi, this.isExplicit = !1), null != t.obj && (t.obj instanceof e.ASN1Object ? (this.asn1Object = t.obj, this.setASN1Object(this.isExplicit, this.hT, this.asn1Object)) : \"object\" == r(t.obj) && (this.asn1Object = e.ASN1Util.newObject(t.obj), this.setASN1Object(this.isExplicit, this.hT, this.asn1Object)));\n        }, null != t && this.setByParam(t);\n      }, o.lang.extend(br.asn1.DERTaggedObject, br.asn1.ASN1Object);\n      var br,\n          wr,\n          Fr,\n          Er = new function () {}();\n\n      function xr(t) {\n        for (var e = new Array(), r = 0; r < t.length; r++) e[r] = t.charCodeAt(r);\n\n        return e;\n      }\n\n      function Ar(t) {\n        for (var e = \"\", r = 0; r < t.length; r++) e += String.fromCharCode(t[r]);\n\n        return e;\n      }\n\n      function kr(t) {\n        for (var e = \"\", r = 0; r < t.length; r++) {\n          var n = t[r].toString(16);\n          1 == n.length && (n = \"0\" + n), e += n;\n        }\n\n        return e;\n      }\n\n      function Pr(t) {\n        return kr(xr(t));\n      }\n\n      function Cr(t) {\n        return t = (t = (t = t.replace(/\\=/g, \"\")).replace(/\\+/g, \"-\")).replace(/\\//g, \"_\");\n      }\n\n      function Tr(t) {\n        return t.length % 4 == 2 ? t += \"==\" : t.length % 4 == 3 && (t += \"=\"), t = (t = t.replace(/-/g, \"+\")).replace(/_/g, \"/\");\n      }\n\n      function Rr(t) {\n        return t.length % 2 == 1 && (t = \"0\" + t), Cr(S(t));\n      }\n\n      function Ir(t) {\n        return b(Tr(t));\n      }\n\n      function Dr(t) {\n        return qr(Gr(t));\n      }\n\n      function Lr(t) {\n        return decodeURIComponent(Jr(t));\n      }\n\n      function Nr(t) {\n        for (var e = \"\", r = 0; r < t.length - 1; r += 2) e += String.fromCharCode(parseInt(t.substr(r, 2), 16));\n\n        return e;\n      }\n\n      function Ur(t) {\n        for (var e = \"\", r = 0; r < t.length; r++) e += (\"0\" + t.charCodeAt(r).toString(16)).slice(-2);\n\n        return e;\n      }\n\n      function Br(t) {\n        return S(t);\n      }\n\n      function Or(t) {\n        var e = Br(t).replace(/(.{64})/g, \"$1\\r\\n\");\n        return e = e.replace(/\\r\\n$/, \"\");\n      }\n\n      function jr(t) {\n        return b(t.replace(/[^0-9A-Za-z\\/+=]*/g, \"\"));\n      }\n\n      function Mr(t, e) {\n        return \"-----BEGIN \" + e + \"-----\\r\\n\" + Or(t) + \"\\r\\n-----END \" + e + \"-----\\r\\n\";\n      }\n\n      function Hr(t, e) {\n        if (-1 == t.indexOf(\"-----BEGIN \")) throw \"can't find PEM header: \" + e;\n        return jr(t = void 0 !== e ? (t = t.replace(new RegExp(\"^[^]*-----BEGIN \" + e + \"-----\"), \"\")).replace(new RegExp(\"-----END \" + e + \"-----[^]*$\"), \"\") : (t = t.replace(/^[^]*-----BEGIN [^-]+-----/, \"\")).replace(/-----END [^-]+-----[^]*$/, \"\"));\n      }\n\n      function Vr(t) {\n        var e, r, n, i, o, s, a, u, c, h, l;\n        if (l = t.match(/^(\\d{2}|\\d{4})(\\d\\d)(\\d\\d)(\\d\\d)(\\d\\d)(\\d\\d)(|\\.\\d+)Z$/)) return u = l[1], e = parseInt(u), 2 === u.length && (50 <= e && e < 100 ? e = 1900 + e : 0 <= e && e < 50 && (e = 2e3 + e)), r = parseInt(l[2]) - 1, n = parseInt(l[3]), i = parseInt(l[4]), o = parseInt(l[5]), s = parseInt(l[6]), a = 0, \"\" !== (c = l[7]) && (h = (c.substr(1) + \"00\").substr(0, 3), a = parseInt(h)), Date.UTC(e, r, n, i, o, s, a);\n        throw \"unsupported zulu format: \" + t;\n      }\n\n      function Kr(t) {\n        return ~~(Vr(t) / 1e3);\n      }\n\n      function qr(t) {\n        return t.replace(/%/g, \"\");\n      }\n\n      function Jr(t) {\n        return t.replace(/(..)/g, \"%$1\");\n      }\n\n      function Wr(t) {\n        var e = \"malformed IPv6 address\";\n        if (!t.match(/^[0-9A-Fa-f:]+$/)) throw e;\n        var r = (t = t.toLowerCase()).split(\":\").length - 1;\n        if (r < 2) throw e;\n        var n = \":\".repeat(7 - r + 2),\n            i = (t = t.replace(\"::\", n)).split(\":\");\n        if (8 != i.length) throw e;\n\n        for (var o = 0; o < 8; o++) i[o] = (\"0000\" + i[o]).slice(-4);\n\n        return i.join(\"\");\n      }\n\n      function zr(t) {\n        if (!t.match(/^[0-9A-Fa-f]{32}$/)) throw \"malformed IPv6 address octet\";\n\n        for (var e = (t = t.toLowerCase()).match(/.{1,4}/g), r = 0; r < 8; r++) e[r] = e[r].replace(/^0+/, \"\"), \"\" == e[r] && (e[r] = \"0\");\n\n        var n = (t = \":\" + e.join(\":\") + \":\").match(/:(0:){2,}/g);\n        if (null === n) return t.slice(1, -1);\n        var i = \"\";\n\n        for (r = 0; r < n.length; r++) n[r].length > i.length && (i = n[r]);\n\n        return (t = t.replace(i, \"::\")).slice(1, -1);\n      }\n\n      function Yr(t) {\n        var e = \"malformed hex value\";\n        if (!t.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/)) throw e;\n        if (8 != t.length) return 32 == t.length ? zr(t) : t;\n\n        try {\n          return parseInt(t.substr(0, 2), 16) + \".\" + parseInt(t.substr(2, 2), 16) + \".\" + parseInt(t.substr(4, 2), 16) + \".\" + parseInt(t.substr(6, 2), 16);\n        } catch (t) {\n          throw e;\n        }\n      }\n\n      function Gr(t) {\n        for (var e = encodeURIComponent(t), r = \"\", n = 0; n < e.length; n++) \"%\" == e[n] ? (r += e.substr(n, 3), n += 2) : r = r + \"%\" + Pr(e[n]);\n\n        return r;\n      }\n\n      function Xr(t) {\n        return !(t.length % 2 != 0 || !t.match(/^[0-9a-f]+$/) && !t.match(/^[0-9A-F]+$/));\n      }\n\n      function $r(t) {\n        return t.length % 2 == 1 ? \"0\" + t : t.substr(0, 1) > \"7\" ? \"00\" + t : t;\n      }\n\n      Er.getLblen = function (t, e) {\n        if (\"8\" != t.substr(e + 2, 1)) return 1;\n        var r = parseInt(t.substr(e + 3, 1));\n        return 0 == r ? -1 : 0 < r && r < 10 ? r + 1 : -2;\n      }, Er.getL = function (t, e) {\n        var r = Er.getLblen(t, e);\n        return r < 1 ? \"\" : t.substr(e + 2, 2 * r);\n      }, Er.getVblen = function (t, e) {\n        var r;\n        return \"\" == (r = Er.getL(t, e)) ? -1 : (\"8\" === r.substr(0, 1) ? new F(r.substr(2), 16) : new F(r, 16)).intValue();\n      }, Er.getVidx = function (t, e) {\n        var r = Er.getLblen(t, e);\n        return r < 0 ? r : e + 2 * (r + 1);\n      }, Er.getV = function (t, e) {\n        var r = Er.getVidx(t, e),\n            n = Er.getVblen(t, e);\n        return t.substr(r, 2 * n);\n      }, Er.getTLV = function (t, e) {\n        return t.substr(e, 2) + Er.getL(t, e) + Er.getV(t, e);\n      }, Er.getTLVblen = function (t, e) {\n        return 2 + 2 * Er.getLblen(t, e) + 2 * Er.getVblen(t, e);\n      }, Er.getNextSiblingIdx = function (t, e) {\n        return Er.getVidx(t, e) + 2 * Er.getVblen(t, e);\n      }, Er.getChildIdx = function (t, e) {\n        var r,\n            n,\n            i,\n            o = Er,\n            s = [];\n        r = o.getVidx(t, e), n = 2 * o.getVblen(t, e), \"03\" == t.substr(e, 2) && (r += 2, n -= 2), i = 0;\n\n        for (var a = r; i <= n;) {\n          var u = o.getTLVblen(t, a);\n          if ((i += u) <= n && s.push(a), a += u, i >= n) break;\n        }\n\n        return s;\n      }, Er.getNthChildIdx = function (t, e, r) {\n        return Er.getChildIdx(t, e)[r];\n      }, Er.getIdxbyList = function (t, e, r, n) {\n        var i,\n            o,\n            s = Er;\n        return 0 == r.length ? void 0 !== n && t.substr(e, 2) !== n ? -1 : e : (i = r.shift()) >= (o = s.getChildIdx(t, e)).length ? -1 : s.getIdxbyList(t, o[i], r, n);\n      }, Er.getIdxbyListEx = function (t, e, r, n) {\n        var i,\n            o,\n            s = Er;\n        if (0 == r.length) return void 0 !== n && t.substr(e, 2) !== n ? -1 : e;\n        i = r.shift(), o = s.getChildIdx(t, e);\n\n        for (var a = 0, u = 0; u < o.length; u++) {\n          var c = t.substr(o[u], 2);\n          if (\"number\" == typeof i && !s.isContextTag(c) && a == i || \"string\" == typeof i && s.isContextTag(c, i)) return s.getIdxbyListEx(t, o[u], r, n);\n          s.isContextTag(c) || a++;\n        }\n\n        return -1;\n      }, Er.getTLVbyList = function (t, e, r, n) {\n        var i = Er,\n            o = i.getIdxbyList(t, e, r, n);\n        return -1 == o || o >= t.length ? null : i.getTLV(t, o);\n      }, Er.getTLVbyListEx = function (t, e, r, n) {\n        var i = Er,\n            o = i.getIdxbyListEx(t, e, r, n);\n        return -1 == o ? null : i.getTLV(t, o);\n      }, Er.getVbyList = function (t, e, r, n, i) {\n        var o,\n            s,\n            a = Er;\n        return -1 == (o = a.getIdxbyList(t, e, r, n)) || o >= t.length ? null : (s = a.getV(t, o), !0 === i && (s = s.substr(2)), s);\n      }, Er.getVbyListEx = function (t, e, r, n, i) {\n        var o,\n            s,\n            a = Er;\n        return -1 == (o = a.getIdxbyListEx(t, e, r, n)) ? null : (s = a.getV(t, o), \"03\" == t.substr(o, 2) && !1 !== i && (s = s.substr(2)), s);\n      }, Er.getInt = function (t, e, r) {\n        null == r && (r = -1);\n\n        try {\n          var n = t.substr(e, 2);\n          if (\"02\" != n && \"03\" != n) return r;\n          var i = Er.getV(t, e);\n          return \"02\" == n ? parseInt(i, 16) : function o(t) {\n            try {\n              var e = t.substr(0, 2);\n              if (\"00\" == e) return parseInt(t.substr(2), 16);\n              var r = parseInt(e, 16),\n                  n = t.substr(2),\n                  i = parseInt(n, 16).toString(2);\n              return \"0\" == i && (i = \"00000000\"), i = i.slice(0, 0 - r), parseInt(i, 2);\n            } catch (t) {\n              return -1;\n            }\n          }(i);\n        } catch (t) {\n          return r;\n        }\n      }, Er.getOID = function (t, e, r) {\n        null == r && (r = null);\n\n        try {\n          return \"06\" != t.substr(e, 2) ? r : function n(t) {\n            if (!Xr(t)) return null;\n\n            try {\n              var e = [],\n                  r = t.substr(0, 2),\n                  n = parseInt(r, 16);\n              e[0] = new String(Math.floor(n / 40)), e[1] = new String(n % 40);\n\n              for (var i = t.substr(2), o = [], s = 0; s < i.length / 2; s++) o.push(parseInt(i.substr(2 * s, 2), 16));\n\n              var a = [],\n                  u = \"\";\n\n              for (s = 0; s < o.length; s++) 128 & o[s] ? u += Qr((127 & o[s]).toString(2), 7) : (u += Qr((127 & o[s]).toString(2), 7), a.push(new String(parseInt(u, 2))), u = \"\");\n\n              var c = e.join(\".\");\n              return a.length > 0 && (c = c + \".\" + a.join(\".\")), c;\n            } catch (t) {\n              return null;\n            }\n          }(Er.getV(t, e));\n        } catch (t) {\n          return r;\n        }\n      }, Er.getOIDName = function (t, e, r) {\n        null == r && (r = null);\n\n        try {\n          var n = Er.getOID(t, e, r);\n          if (n == r) return r;\n          var i = br.asn1.x509.OID.oid2name(n);\n          return \"\" == i ? n : i;\n        } catch (t) {\n          return r;\n        }\n      }, Er.getString = function (t, e, r) {\n        null == r && (r = null);\n\n        try {\n          return Nr(Er.getV(t, e));\n        } catch (t) {\n          return r;\n        }\n      }, Er.hextooidstr = function (t) {\n        var e = function t(e, r) {\n          return e.length >= r ? e : new Array(r - e.length + 1).join(\"0\") + e;\n        },\n            r = [],\n            n = t.substr(0, 2),\n            i = parseInt(n, 16);\n\n        r[0] = new String(Math.floor(i / 40)), r[1] = new String(i % 40);\n\n        for (var o = t.substr(2), s = [], a = 0; a < o.length / 2; a++) s.push(parseInt(o.substr(2 * a, 2), 16));\n\n        var u = [],\n            c = \"\";\n\n        for (a = 0; a < s.length; a++) 128 & s[a] ? c += e((127 & s[a]).toString(2), 7) : (c += e((127 & s[a]).toString(2), 7), u.push(new String(parseInt(c, 2))), c = \"\");\n\n        var h = r.join(\".\");\n        return u.length > 0 && (h = h + \".\" + u.join(\".\")), h;\n      }, Er.dump = function (t, e, r, n) {\n        var i = Er,\n            o = i.getV,\n            s = i.dump,\n            a = i.getChildIdx,\n            u = t;\n        t instanceof br.asn1.ASN1Object && (u = t.getEncodedHex());\n\n        var c = function t(e, r) {\n          return e.length <= 2 * r ? e : e.substr(0, r) + \"..(total \" + e.length / 2 + \"bytes)..\" + e.substr(e.length - r, r);\n        };\n\n        void 0 === e && (e = {\n          ommit_long_octet: 32\n        }), void 0 === r && (r = 0), void 0 === n && (n = \"\");\n        var h,\n            l = e.ommit_long_octet;\n        if (\"01\" == (h = u.substr(r, 2))) return \"00\" == (f = o(u, r)) ? n + \"BOOLEAN FALSE\\n\" : n + \"BOOLEAN TRUE\\n\";\n        if (\"02\" == h) return n + \"INTEGER \" + c(f = o(u, r), l) + \"\\n\";\n\n        if (\"03\" == h) {\n          var f = o(u, r);\n\n          if (i.isASN1HEX(f.substr(2))) {\n            var g = n + \"BITSTRING, encapsulates\\n\";\n            return g += s(f.substr(2), e, 0, n + \"  \");\n          }\n\n          return n + \"BITSTRING \" + c(f, l) + \"\\n\";\n        }\n\n        if (\"04\" == h) {\n          f = o(u, r);\n\n          if (i.isASN1HEX(f)) {\n            g = n + \"OCTETSTRING, encapsulates\\n\";\n            return g += s(f, e, 0, n + \"  \");\n          }\n\n          return n + \"OCTETSTRING \" + c(f, l) + \"\\n\";\n        }\n\n        if (\"05\" == h) return n + \"NULL\\n\";\n\n        if (\"06\" == h) {\n          var d = o(u, r),\n              p = br.asn1.ASN1Util.oidHexToInt(d),\n              v = br.asn1.x509.OID.oid2name(p),\n              y = p.replace(/\\./g, \" \");\n          return \"\" != v ? n + \"ObjectIdentifier \" + v + \" (\" + y + \")\\n\" : n + \"ObjectIdentifier (\" + y + \")\\n\";\n        }\n\n        if (\"0a\" == h) return n + \"ENUMERATED \" + parseInt(o(u, r)) + \"\\n\";\n        if (\"0c\" == h) return n + \"UTF8String '\" + Lr(o(u, r)) + \"'\\n\";\n        if (\"13\" == h) return n + \"PrintableString '\" + Lr(o(u, r)) + \"'\\n\";\n        if (\"14\" == h) return n + \"TeletexString '\" + Lr(o(u, r)) + \"'\\n\";\n        if (\"16\" == h) return n + \"IA5String '\" + Lr(o(u, r)) + \"'\\n\";\n        if (\"17\" == h) return n + \"UTCTime \" + Lr(o(u, r)) + \"\\n\";\n        if (\"18\" == h) return n + \"GeneralizedTime \" + Lr(o(u, r)) + \"\\n\";\n        if (\"1a\" == h) return n + \"VisualString '\" + Lr(o(u, r)) + \"'\\n\";\n        if (\"1e\" == h) return n + \"BMPString '\" + Lr(o(u, r)) + \"'\\n\";\n\n        if (\"30\" == h) {\n          if (\"3000\" == u.substr(r, 4)) return n + \"SEQUENCE {}\\n\";\n          g = n + \"SEQUENCE\\n\";\n          var m = e;\n\n          if ((2 == (b = a(u, r)).length || 3 == b.length) && \"06\" == u.substr(b[0], 2) && \"04\" == u.substr(b[b.length - 1], 2)) {\n            v = i.oidname(o(u, b[0]));\n\n            var _ = JSON.parse(JSON.stringify(e));\n\n            _.x509ExtName = v, m = _;\n          }\n\n          for (var S = 0; S < b.length; S++) g += s(u, m, b[S], n + \"  \");\n\n          return g;\n        }\n\n        if (\"31\" == h) {\n          g = n + \"SET\\n\";\n          var b = a(u, r);\n\n          for (S = 0; S < b.length; S++) g += s(u, e, b[S], n + \"  \");\n\n          return g;\n        }\n\n        if (0 != (128 & (h = parseInt(h, 16)))) {\n          var w = 31 & h;\n\n          if (0 != (32 & h)) {\n            for (g = n + \"[\" + w + \"]\\n\", b = a(u, r), S = 0; S < b.length; S++) g += s(u, e, b[S], n + \"  \");\n\n            return g;\n          }\n\n          f = o(u, r);\n\n          if (Er.isASN1HEX(f)) {\n            var g = n + \"[\" + w + \"]\\n\";\n            return g += s(f, e, 0, n + \"  \");\n          }\n\n          return (\"68747470\" == f.substr(0, 8) || \"subjectAltName\" === e.x509ExtName && 2 == w) && (f = Lr(f)), g = n + \"[\" + w + \"] \" + f + \"\\n\";\n        }\n\n        return n + \"UNKNOWN(\" + h + \") \" + o(u, r) + \"\\n\";\n      }, Er.isContextTag = function (t, e) {\n        var r, n;\n        t = t.toLowerCase();\n\n        try {\n          r = parseInt(t, 16);\n        } catch (t) {\n          return -1;\n        }\n\n        if (void 0 === e) return 128 == (192 & r);\n\n        try {\n          return null != e.match(/^\\[[0-9]+\\]$/) && !((n = parseInt(e.substr(1, e.length - 1), 10)) > 31) && 128 == (192 & r) && (31 & r) == n;\n        } catch (t) {\n          return !1;\n        }\n      }, Er.isASN1HEX = function (t) {\n        var e = Er;\n        if (t.length % 2 == 1) return !1;\n        var r = e.getVblen(t, 0),\n            n = t.substr(0, 2),\n            i = e.getL(t, 0);\n        return t.length - n.length - i.length == 2 * r;\n      }, Er.checkStrictDER = function (t, e, r, n, i) {\n        var o = Er;\n\n        if (void 0 === r) {\n          if (\"string\" != typeof t) throw new Error(\"not hex string\");\n          if (t = t.toLowerCase(), !br.lang.String.isHex(t)) throw new Error(\"not hex string\");\n          r = t.length, i = (n = t.length / 2) < 128 ? 1 : Math.ceil(n.toString(16)) + 1;\n        }\n\n        if (o.getL(t, e).length > 2 * i) throw new Error(\"L of TLV too long: idx=\" + e);\n        var s = o.getVblen(t, e);\n        if (s > n) throw new Error(\"value of L too long than hex: idx=\" + e);\n        var a = o.getTLV(t, e),\n            u = a.length - 2 - o.getL(t, e).length;\n        if (u !== 2 * s) throw new Error(\"V string length and L's value not the same:\" + u + \"/\" + 2 * s);\n        if (0 === e && t.length != a.length) throw new Error(\"total length and TLV length unmatch:\" + t.length + \"!=\" + a.length);\n        var c = t.substr(e, 2);\n\n        if (\"02\" === c) {\n          var h = o.getVidx(t, e);\n          if (\"00\" == t.substr(h, 2) && t.charCodeAt(h + 2) < 56) throw new Error(\"not least zeros for DER INTEGER\");\n        }\n\n        if (32 & parseInt(c, 16)) {\n          for (var l = o.getVblen(t, e), f = 0, g = o.getChildIdx(t, e), d = 0; d < g.length; d++) {\n            f += o.getTLV(t, g[d]).length, o.checkStrictDER(t, g[d], r, n, i);\n          }\n\n          if (2 * l != f) throw new Error(\"sum of children's TLV length and L unmatch: \" + 2 * l + \"!=\" + f);\n        }\n      }, Er.oidname = function (t) {\n        var e = br.asn1;\n        br.lang.String.isHex(t) && (t = e.ASN1Util.oidHexToInt(t));\n        var r = e.x509.OID.oid2name(t);\n        return \"\" === r && (r = t), r;\n      }, void 0 !== br && br || (e.KJUR = br = {}), void 0 !== br.lang && br.lang || (br.lang = {}), br.lang.String = function () {}, \"function\" == typeof t ? (e.utf8tob64u = wr = function e(r) {\n        return Cr(t.from(r, \"utf8\").toString(\"base64\"));\n      }, e.b64utoutf8 = Fr = function e(r) {\n        return t.from(Tr(r), \"base64\").toString(\"utf8\");\n      }) : (e.utf8tob64u = wr = function t(e) {\n        return Rr(qr(Gr(e)));\n      }, e.b64utoutf8 = Fr = function t(e) {\n        return decodeURIComponent(Jr(Ir(e)));\n      }), br.lang.String.isInteger = function (t) {\n        return !!t.match(/^[0-9]+$/) || !!t.match(/^-[0-9]+$/);\n      }, br.lang.String.isHex = function (t) {\n        return Xr(t);\n      }, br.lang.String.isBase64 = function (t) {\n        return !(!(t = t.replace(/\\s+/g, \"\")).match(/^[0-9A-Za-z+\\/]+={0,3}$/) || t.length % 4 != 0);\n      }, br.lang.String.isBase64URL = function (t) {\n        return !t.match(/[+/=]/) && (t = Tr(t), br.lang.String.isBase64(t));\n      }, br.lang.String.isIntegerArray = function (t) {\n        return !!(t = t.replace(/\\s+/g, \"\")).match(/^\\[[0-9,]+\\]$/);\n      }, br.lang.String.isPrintable = function (t) {\n        return null !== t.match(/^[0-9A-Za-z '()+,-./:=?]*$/);\n      }, br.lang.String.isIA5 = function (t) {\n        return null !== t.match(/^[\\x20-\\x21\\x23-\\x7f]*$/);\n      }, br.lang.String.isMail = function (t) {\n        return null !== t.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\\.[A-Za-z0-9]{1,}$/);\n      };\n\n      var Qr = function t(e, r, n) {\n        return null == n && (n = \"0\"), e.length >= r ? e : new Array(r - e.length + 1).join(n) + e;\n      };\n\n      void 0 !== br && br || (e.KJUR = br = {}), void 0 !== br.crypto && br.crypto || (br.crypto = {}), br.crypto.Util = new function () {\n        this.DIGESTINFOHEAD = {\n          sha1: \"3021300906052b0e03021a05000414\",\n          sha224: \"302d300d06096086480165030402040500041c\",\n          sha256: \"3031300d060960864801650304020105000420\",\n          sha384: \"3041300d060960864801650304020205000430\",\n          sha512: \"3051300d060960864801650304020305000440\",\n          md2: \"3020300c06082a864886f70d020205000410\",\n          md5: \"3020300c06082a864886f70d020505000410\",\n          ripemd160: \"3021300906052b2403020105000414\"\n        }, this.DEFAULTPROVIDER = {\n          md5: \"cryptojs\",\n          sha1: \"cryptojs\",\n          sha224: \"cryptojs\",\n          sha256: \"cryptojs\",\n          sha384: \"cryptojs\",\n          sha512: \"cryptojs\",\n          ripemd160: \"cryptojs\",\n          hmacmd5: \"cryptojs\",\n          hmacsha1: \"cryptojs\",\n          hmacsha224: \"cryptojs\",\n          hmacsha256: \"cryptojs\",\n          hmacsha384: \"cryptojs\",\n          hmacsha512: \"cryptojs\",\n          hmacripemd160: \"cryptojs\",\n          MD5withRSA: \"cryptojs/jsrsa\",\n          SHA1withRSA: \"cryptojs/jsrsa\",\n          SHA224withRSA: \"cryptojs/jsrsa\",\n          SHA256withRSA: \"cryptojs/jsrsa\",\n          SHA384withRSA: \"cryptojs/jsrsa\",\n          SHA512withRSA: \"cryptojs/jsrsa\",\n          RIPEMD160withRSA: \"cryptojs/jsrsa\",\n          MD5withECDSA: \"cryptojs/jsrsa\",\n          SHA1withECDSA: \"cryptojs/jsrsa\",\n          SHA224withECDSA: \"cryptojs/jsrsa\",\n          SHA256withECDSA: \"cryptojs/jsrsa\",\n          SHA384withECDSA: \"cryptojs/jsrsa\",\n          SHA512withECDSA: \"cryptojs/jsrsa\",\n          RIPEMD160withECDSA: \"cryptojs/jsrsa\",\n          SHA1withDSA: \"cryptojs/jsrsa\",\n          SHA224withDSA: \"cryptojs/jsrsa\",\n          SHA256withDSA: \"cryptojs/jsrsa\",\n          MD5withRSAandMGF1: \"cryptojs/jsrsa\",\n          SHAwithRSAandMGF1: \"cryptojs/jsrsa\",\n          SHA1withRSAandMGF1: \"cryptojs/jsrsa\",\n          SHA224withRSAandMGF1: \"cryptojs/jsrsa\",\n          SHA256withRSAandMGF1: \"cryptojs/jsrsa\",\n          SHA384withRSAandMGF1: \"cryptojs/jsrsa\",\n          SHA512withRSAandMGF1: \"cryptojs/jsrsa\",\n          RIPEMD160withRSAandMGF1: \"cryptojs/jsrsa\"\n        }, this.CRYPTOJSMESSAGEDIGESTNAME = {\n          md5: y.algo.MD5,\n          sha1: y.algo.SHA1,\n          sha224: y.algo.SHA224,\n          sha256: y.algo.SHA256,\n          sha384: y.algo.SHA384,\n          sha512: y.algo.SHA512,\n          ripemd160: y.algo.RIPEMD160\n        }, this.getDigestInfoHex = function (t, e) {\n          if (void 0 === this.DIGESTINFOHEAD[e]) throw \"alg not supported in Util.DIGESTINFOHEAD: \" + e;\n          return this.DIGESTINFOHEAD[e] + t;\n        }, this.getPaddedDigestInfoHex = function (t, e, r) {\n          var n = this.getDigestInfoHex(t, e),\n              i = r / 4;\n          if (n.length + 22 > i) throw \"key is too short for SigAlg: keylen=\" + r + \",\" + e;\n\n          for (var o = \"0001\", s = \"00\" + n, a = \"\", u = i - o.length - s.length, c = 0; c < u; c += 2) a += \"ff\";\n\n          return o + a + s;\n        }, this.hashString = function (t, e) {\n          return new br.crypto.MessageDigest({\n            alg: e\n          }).digestString(t);\n        }, this.hashHex = function (t, e) {\n          return new br.crypto.MessageDigest({\n            alg: e\n          }).digestHex(t);\n        }, this.sha1 = function (t) {\n          return this.hashString(t, \"sha1\");\n        }, this.sha256 = function (t) {\n          return this.hashString(t, \"sha256\");\n        }, this.sha256Hex = function (t) {\n          return this.hashHex(t, \"sha256\");\n        }, this.sha512 = function (t) {\n          return this.hashString(t, \"sha512\");\n        }, this.sha512Hex = function (t) {\n          return this.hashHex(t, \"sha512\");\n        }, this.isKey = function (t) {\n          return t instanceof He || t instanceof br.crypto.DSA || t instanceof br.crypto.ECDSA;\n        };\n      }(), br.crypto.Util.md5 = function (t) {\n        return new br.crypto.MessageDigest({\n          alg: \"md5\",\n          prov: \"cryptojs\"\n        }).digestString(t);\n      }, br.crypto.Util.ripemd160 = function (t) {\n        return new br.crypto.MessageDigest({\n          alg: \"ripemd160\",\n          prov: \"cryptojs\"\n        }).digestString(t);\n      }, br.crypto.Util.SECURERANDOMGEN = new Oe(), br.crypto.Util.getRandomHexOfNbytes = function (t) {\n        var e = new Array(t);\n        return br.crypto.Util.SECURERANDOMGEN.nextBytes(e), kr(e);\n      }, br.crypto.Util.getRandomBigIntegerOfNbytes = function (t) {\n        return new F(br.crypto.Util.getRandomHexOfNbytes(t), 16);\n      }, br.crypto.Util.getRandomHexOfNbits = function (t) {\n        var e = t % 8,\n            r = new Array((t - e) / 8 + 1);\n        return br.crypto.Util.SECURERANDOMGEN.nextBytes(r), r[0] = (255 << e & 255 ^ 255) & r[0], kr(r);\n      }, br.crypto.Util.getRandomBigIntegerOfNbits = function (t) {\n        return new F(br.crypto.Util.getRandomHexOfNbits(t), 16);\n      }, br.crypto.Util.getRandomBigIntegerZeroToMax = function (t) {\n        for (var e = t.bitLength();;) {\n          var r = br.crypto.Util.getRandomBigIntegerOfNbits(e);\n          if (-1 != t.compareTo(r)) return r;\n        }\n      }, br.crypto.Util.getRandomBigIntegerMinToMax = function (t, e) {\n        var r = t.compareTo(e);\n        if (1 == r) throw \"biMin is greater than biMax\";\n        if (0 == r) return t;\n        var n = e.subtract(t);\n        return br.crypto.Util.getRandomBigIntegerZeroToMax(n).add(t);\n      }, br.crypto.MessageDigest = function (t) {\n        this.setAlgAndProvider = function (t, e) {\n          if (null !== (t = br.crypto.MessageDigest.getCanonicalAlgName(t)) && void 0 === e && (e = br.crypto.Util.DEFAULTPROVIDER[t]), -1 != \":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:\".indexOf(t) && \"cryptojs\" == e) {\n            try {\n              this.md = br.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[t].create();\n            } catch (e) {\n              throw \"setAlgAndProvider hash alg set fail alg=\" + t + \"/\" + e;\n            }\n\n            this.updateString = function (t) {\n              this.md.update(t);\n            }, this.updateHex = function (t) {\n              var e = y.enc.Hex.parse(t);\n              this.md.update(e);\n            }, this.digest = function () {\n              return this.md.finalize().toString(y.enc.Hex);\n            }, this.digestString = function (t) {\n              return this.updateString(t), this.digest();\n            }, this.digestHex = function (t) {\n              return this.updateHex(t), this.digest();\n            };\n          }\n\n          if (-1 != \":sha256:\".indexOf(t) && \"sjcl\" == e) {\n            try {\n              this.md = new sjcl.hash.sha256();\n            } catch (e) {\n              throw \"setAlgAndProvider hash alg set fail alg=\" + t + \"/\" + e;\n            }\n\n            this.updateString = function (t) {\n              this.md.update(t);\n            }, this.updateHex = function (t) {\n              var e = sjcl.codec.hex.toBits(t);\n              this.md.update(e);\n            }, this.digest = function () {\n              var t = this.md.finalize();\n              return sjcl.codec.hex.fromBits(t);\n            }, this.digestString = function (t) {\n              return this.updateString(t), this.digest();\n            }, this.digestHex = function (t) {\n              return this.updateHex(t), this.digest();\n            };\n          }\n        }, this.updateString = function (t) {\n          throw \"updateString(str) not supported for this alg/prov: \" + this.algName + \"/\" + this.provName;\n        }, this.updateHex = function (t) {\n          throw \"updateHex(hex) not supported for this alg/prov: \" + this.algName + \"/\" + this.provName;\n        }, this.digest = function () {\n          throw \"digest() not supported for this alg/prov: \" + this.algName + \"/\" + this.provName;\n        }, this.digestString = function (t) {\n          throw \"digestString(str) not supported for this alg/prov: \" + this.algName + \"/\" + this.provName;\n        }, this.digestHex = function (t) {\n          throw \"digestHex(hex) not supported for this alg/prov: \" + this.algName + \"/\" + this.provName;\n        }, void 0 !== t && void 0 !== t.alg && (this.algName = t.alg, void 0 === t.prov && (this.provName = br.crypto.Util.DEFAULTPROVIDER[this.algName]), this.setAlgAndProvider(this.algName, this.provName));\n      }, br.crypto.MessageDigest.getCanonicalAlgName = function (t) {\n        return \"string\" == typeof t && (t = (t = t.toLowerCase()).replace(/-/, \"\")), t;\n      }, br.crypto.MessageDigest.getHashLength = function (t) {\n        var e = br.crypto.MessageDigest,\n            r = e.getCanonicalAlgName(t);\n        if (void 0 === e.HASHLENGTH[r]) throw \"not supported algorithm: \" + t;\n        return e.HASHLENGTH[r];\n      }, br.crypto.MessageDigest.HASHLENGTH = {\n        md5: 16,\n        sha1: 20,\n        sha224: 28,\n        sha256: 32,\n        sha384: 48,\n        sha512: 64,\n        ripemd160: 20\n      }, br.crypto.Mac = function (t) {\n        this.setAlgAndProvider = function (t, e) {\n          if (null == (t = t.toLowerCase()) && (t = \"hmacsha1\"), \"hmac\" != (t = t.toLowerCase()).substr(0, 4)) throw \"setAlgAndProvider unsupported HMAC alg: \" + t;\n          void 0 === e && (e = br.crypto.Util.DEFAULTPROVIDER[t]), this.algProv = t + \"/\" + e;\n          var r = t.substr(4);\n\n          if (-1 != \":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:\".indexOf(r) && \"cryptojs\" == e) {\n            try {\n              var n = br.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[r];\n              this.mac = y.algo.HMAC.create(n, this.pass);\n            } catch (t) {\n              throw \"setAlgAndProvider hash alg set fail hashAlg=\" + r + \"/\" + t;\n            }\n\n            this.updateString = function (t) {\n              this.mac.update(t);\n            }, this.updateHex = function (t) {\n              var e = y.enc.Hex.parse(t);\n              this.mac.update(e);\n            }, this.doFinal = function () {\n              return this.mac.finalize().toString(y.enc.Hex);\n            }, this.doFinalString = function (t) {\n              return this.updateString(t), this.doFinal();\n            }, this.doFinalHex = function (t) {\n              return this.updateHex(t), this.doFinal();\n            };\n          }\n        }, this.updateString = function (t) {\n          throw \"updateString(str) not supported for this alg/prov: \" + this.algProv;\n        }, this.updateHex = function (t) {\n          throw \"updateHex(hex) not supported for this alg/prov: \" + this.algProv;\n        }, this.doFinal = function () {\n          throw \"digest() not supported for this alg/prov: \" + this.algProv;\n        }, this.doFinalString = function (t) {\n          throw \"digestString(str) not supported for this alg/prov: \" + this.algProv;\n        }, this.doFinalHex = function (t) {\n          throw \"digestHex(hex) not supported for this alg/prov: \" + this.algProv;\n        }, this.setPassword = function (t) {\n          if (\"string\" == typeof t) {\n            var e = t;\n            return t.length % 2 != 1 && t.match(/^[0-9A-Fa-f]+$/) || (e = Ur(t)), void (this.pass = y.enc.Hex.parse(e));\n          }\n\n          if (\"object\" != (void 0 === t ? \"undefined\" : r(t))) throw \"KJUR.crypto.Mac unsupported password type: \" + t;\n          e = null;\n\n          if (void 0 !== t.hex) {\n            if (t.hex.length % 2 != 0 || !t.hex.match(/^[0-9A-Fa-f]+$/)) throw \"Mac: wrong hex password: \" + t.hex;\n            e = t.hex;\n          }\n\n          if (void 0 !== t.utf8 && (e = Dr(t.utf8)), void 0 !== t.rstr && (e = Ur(t.rstr)), void 0 !== t.b64 && (e = b(t.b64)), void 0 !== t.b64u && (e = Ir(t.b64u)), null == e) throw \"KJUR.crypto.Mac unsupported password type: \" + t;\n          this.pass = y.enc.Hex.parse(e);\n        }, void 0 !== t && (void 0 !== t.pass && this.setPassword(t.pass), void 0 !== t.alg && (this.algName = t.alg, void 0 === t.prov && (this.provName = br.crypto.Util.DEFAULTPROVIDER[this.algName]), this.setAlgAndProvider(this.algName, this.provName)));\n      }, br.crypto.Signature = function (t) {\n        var e = null;\n\n        if (this._setAlgNames = function () {\n          var t = this.algName.match(/^(.+)with(.+)$/);\n          t && (this.mdAlgName = t[1].toLowerCase(), this.pubkeyAlgName = t[2].toLowerCase(), \"rsaandmgf1\" == this.pubkeyAlgName && \"sha\" == this.mdAlgName && (this.mdAlgName = \"sha1\"));\n        }, this._zeroPaddingOfSignature = function (t, e) {\n          for (var r = \"\", n = e / 4 - t.length, i = 0; i < n; i++) r += \"0\";\n\n          return r + t;\n        }, this.setAlgAndProvider = function (t, e) {\n          if (this._setAlgNames(), \"cryptojs/jsrsa\" != e) throw new Error(\"provider not supported: \" + e);\n\n          if (-1 != \":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:\".indexOf(this.mdAlgName)) {\n            try {\n              this.md = new br.crypto.MessageDigest({\n                alg: this.mdAlgName\n              });\n            } catch (t) {\n              throw new Error(\"setAlgAndProvider hash alg set fail alg=\" + this.mdAlgName + \"/\" + t);\n            }\n\n            this.init = function (t, e) {\n              var r = null;\n\n              try {\n                r = void 0 === e ? Zr.getKey(t) : Zr.getKey(t, e);\n              } catch (t) {\n                throw \"init failed:\" + t;\n              }\n\n              if (!0 === r.isPrivate) this.prvKey = r, this.state = \"SIGN\";else {\n                if (!0 !== r.isPublic) throw \"init failed.:\" + r;\n                this.pubKey = r, this.state = \"VERIFY\";\n              }\n            }, this.updateString = function (t) {\n              this.md.updateString(t);\n            }, this.updateHex = function (t) {\n              this.md.updateHex(t);\n            }, this.sign = function () {\n              if (this.sHashHex = this.md.digest(), void 0 === this.prvKey && void 0 !== this.ecprvhex && void 0 !== this.eccurvename && void 0 !== br.crypto.ECDSA && (this.prvKey = new br.crypto.ECDSA({\n                curve: this.eccurvename,\n                prv: this.ecprvhex\n              })), this.prvKey instanceof He && \"rsaandmgf1\" === this.pubkeyAlgName) this.hSign = this.prvKey.signWithMessageHashPSS(this.sHashHex, this.mdAlgName, this.pssSaltLen);else if (this.prvKey instanceof He && \"rsa\" === this.pubkeyAlgName) this.hSign = this.prvKey.signWithMessageHash(this.sHashHex, this.mdAlgName);else if (this.prvKey instanceof br.crypto.ECDSA) this.hSign = this.prvKey.signWithMessageHash(this.sHashHex);else {\n                if (!(this.prvKey instanceof br.crypto.DSA)) throw \"Signature: unsupported private key alg: \" + this.pubkeyAlgName;\n                this.hSign = this.prvKey.signWithMessageHash(this.sHashHex);\n              }\n              return this.hSign;\n            }, this.signString = function (t) {\n              return this.updateString(t), this.sign();\n            }, this.signHex = function (t) {\n              return this.updateHex(t), this.sign();\n            }, this.verify = function (t) {\n              if (this.sHashHex = this.md.digest(), void 0 === this.pubKey && void 0 !== this.ecpubhex && void 0 !== this.eccurvename && void 0 !== br.crypto.ECDSA && (this.pubKey = new br.crypto.ECDSA({\n                curve: this.eccurvename,\n                pub: this.ecpubhex\n              })), this.pubKey instanceof He && \"rsaandmgf1\" === this.pubkeyAlgName) return this.pubKey.verifyWithMessageHashPSS(this.sHashHex, t, this.mdAlgName, this.pssSaltLen);\n              if (this.pubKey instanceof He && \"rsa\" === this.pubkeyAlgName) return this.pubKey.verifyWithMessageHash(this.sHashHex, t);\n              if (void 0 !== br.crypto.ECDSA && this.pubKey instanceof br.crypto.ECDSA) return this.pubKey.verifyWithMessageHash(this.sHashHex, t);\n              if (void 0 !== br.crypto.DSA && this.pubKey instanceof br.crypto.DSA) return this.pubKey.verifyWithMessageHash(this.sHashHex, t);\n              throw \"Signature: unsupported public key alg: \" + this.pubkeyAlgName;\n            };\n          }\n        }, this.init = function (t, e) {\n          throw \"init(key, pass) not supported for this alg:prov=\" + this.algProvName;\n        }, this.updateString = function (t) {\n          throw \"updateString(str) not supported for this alg:prov=\" + this.algProvName;\n        }, this.updateHex = function (t) {\n          throw \"updateHex(hex) not supported for this alg:prov=\" + this.algProvName;\n        }, this.sign = function () {\n          throw \"sign() not supported for this alg:prov=\" + this.algProvName;\n        }, this.signString = function (t) {\n          throw \"digestString(str) not supported for this alg:prov=\" + this.algProvName;\n        }, this.signHex = function (t) {\n          throw \"digestHex(hex) not supported for this alg:prov=\" + this.algProvName;\n        }, this.verify = function (t) {\n          throw \"verify(hSigVal) not supported for this alg:prov=\" + this.algProvName;\n        }, this.initParams = t, void 0 !== t && (void 0 !== t.alg && (this.algName = t.alg, void 0 === t.prov ? this.provName = br.crypto.Util.DEFAULTPROVIDER[this.algName] : this.provName = t.prov, this.algProvName = this.algName + \":\" + this.provName, this.setAlgAndProvider(this.algName, this.provName), this._setAlgNames()), void 0 !== t.psssaltlen && (this.pssSaltLen = t.psssaltlen), void 0 !== t.prvkeypem)) {\n          if (void 0 !== t.prvkeypas) throw \"both prvkeypem and prvkeypas parameters not supported\";\n\n          try {\n            e = Zr.getKey(t.prvkeypem);\n            this.init(e);\n          } catch (t) {\n            throw \"fatal error to load pem private key: \" + t;\n          }\n        }\n      }, br.crypto.Cipher = function (t) {}, br.crypto.Cipher.encrypt = function (t, e, r) {\n        if (e instanceof He && e.isPublic) {\n          var n = br.crypto.Cipher.getAlgByKeyAndName(e, r);\n          if (\"RSA\" === n) return e.encrypt(t);\n          if (\"RSAOAEP\" === n) return e.encryptOAEP(t, \"sha1\");\n          var i = n.match(/^RSAOAEP(\\d+)$/);\n          if (null !== i) return e.encryptOAEP(t, \"sha\" + i[1]);\n          throw \"Cipher.encrypt: unsupported algorithm for RSAKey: \" + r;\n        }\n\n        throw \"Cipher.encrypt: unsupported key or algorithm\";\n      }, br.crypto.Cipher.decrypt = function (t, e, r) {\n        if (e instanceof He && e.isPrivate) {\n          var n = br.crypto.Cipher.getAlgByKeyAndName(e, r);\n          if (\"RSA\" === n) return e.decrypt(t);\n          if (\"RSAOAEP\" === n) return e.decryptOAEP(t, \"sha1\");\n          var i = n.match(/^RSAOAEP(\\d+)$/);\n          if (null !== i) return e.decryptOAEP(t, \"sha\" + i[1]);\n          throw \"Cipher.decrypt: unsupported algorithm for RSAKey: \" + r;\n        }\n\n        throw \"Cipher.decrypt: unsupported key or algorithm\";\n      }, br.crypto.Cipher.getAlgByKeyAndName = function (t, e) {\n        if (t instanceof He) {\n          if (-1 != \":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:\".indexOf(e)) return e;\n          if (null == e) return \"RSA\";\n          throw \"getAlgByKeyAndName: not supported algorithm name for RSAKey: \" + e;\n        }\n\n        throw \"getAlgByKeyAndName: not supported algorithm name: \" + e;\n      }, br.crypto.OID = new function () {\n        this.oidhex2name = {\n          \"2a864886f70d010101\": \"rsaEncryption\",\n          \"2a8648ce3d0201\": \"ecPublicKey\",\n          \"2a8648ce380401\": \"dsa\",\n          \"2a8648ce3d030107\": \"secp256r1\",\n          \"2b8104001f\": \"secp192k1\",\n          \"2b81040021\": \"secp224r1\",\n          \"2b8104000a\": \"secp256k1\",\n          \"2b81040023\": \"secp521r1\",\n          \"2b81040022\": \"secp384r1\",\n          \"2a8648ce380403\": \"SHA1withDSA\",\n          \"608648016503040301\": \"SHA224withDSA\",\n          \"608648016503040302\": \"SHA256withDSA\"\n        };\n      }(), void 0 !== br && br || (e.KJUR = br = {}), void 0 !== br.crypto && br.crypto || (br.crypto = {}), br.crypto.ECDSA = function (t) {\n        var e = Error,\n            n = F,\n            i = Ke,\n            o = br.crypto.ECDSA,\n            s = br.crypto.ECParameterDB,\n            a = o.getName,\n            u = Er,\n            c = u.getVbyListEx,\n            h = u.isASN1HEX,\n            l = new Oe();\n        this.type = \"EC\", this.isPrivate = !1, this.isPublic = !1, this.getBigRandom = function (t) {\n          return new n(t.bitLength(), l).mod(t.subtract(n.ONE)).add(n.ONE);\n        }, this.setNamedCurve = function (t) {\n          this.ecparams = s.getByName(t), this.prvKeyHex = null, this.pubKeyHex = null, this.curveName = t;\n        }, this.setPrivateKeyHex = function (t) {\n          this.isPrivate = !0, this.prvKeyHex = t;\n        }, this.setPublicKeyHex = function (t) {\n          this.isPublic = !0, this.pubKeyHex = t;\n        }, this.getPublicKeyXYHex = function () {\n          var t = this.pubKeyHex;\n          if (\"04\" !== t.substr(0, 2)) throw \"this method supports uncompressed format(04) only\";\n          var e = this.ecparams.keylen / 4;\n          if (t.length !== 2 + 2 * e) throw \"malformed public key hex length\";\n          var r = {};\n          return r.x = t.substr(2, e), r.y = t.substr(2 + e), r;\n        }, this.getShortNISTPCurveName = function () {\n          var t = this.curveName;\n          return \"secp256r1\" === t || \"NIST P-256\" === t || \"P-256\" === t || \"prime256v1\" === t ? \"P-256\" : \"secp384r1\" === t || \"NIST P-384\" === t || \"P-384\" === t ? \"P-384\" : null;\n        }, this.generateKeyPairHex = function () {\n          var t = this.ecparams.n,\n              e = this.getBigRandom(t),\n              r = this.ecparams.G.multiply(e),\n              n = r.getX().toBigInteger(),\n              i = r.getY().toBigInteger(),\n              o = this.ecparams.keylen / 4,\n              s = (\"0000000000\" + e.toString(16)).slice(-o),\n              a = \"04\" + (\"0000000000\" + n.toString(16)).slice(-o) + (\"0000000000\" + i.toString(16)).slice(-o);\n          return this.setPrivateKeyHex(s), this.setPublicKeyHex(a), {\n            ecprvhex: s,\n            ecpubhex: a\n          };\n        }, this.signWithMessageHash = function (t) {\n          return this.signHex(t, this.prvKeyHex);\n        }, this.signHex = function (t, e) {\n          var r = new n(e, 16),\n              i = this.ecparams.n,\n              s = new n(t.substring(0, this.ecparams.keylen / 4), 16);\n\n          do {\n            var a = this.getBigRandom(i),\n                u = this.ecparams.G.multiply(a).getX().toBigInteger().mod(i);\n          } while (u.compareTo(n.ZERO) <= 0);\n\n          var c = a.modInverse(i).multiply(s.add(r.multiply(u))).mod(i);\n          return o.biRSSigToASN1Sig(u, c);\n        }, this.sign = function (t, e) {\n          var r = e,\n              i = this.ecparams.n,\n              o = n.fromByteArrayUnsigned(t);\n\n          do {\n            var s = this.getBigRandom(i),\n                a = this.ecparams.G.multiply(s).getX().toBigInteger().mod(i);\n          } while (a.compareTo(F.ZERO) <= 0);\n\n          var u = s.modInverse(i).multiply(o.add(r.multiply(a))).mod(i);\n          return this.serializeSig(a, u);\n        }, this.verifyWithMessageHash = function (t, e) {\n          return this.verifyHex(t, e, this.pubKeyHex);\n        }, this.verifyHex = function (t, e, r) {\n          try {\n            var s,\n                a,\n                u = o.parseSigHex(e);\n            s = u.r, a = u.s;\n            var c = i.decodeFromHex(this.ecparams.curve, r),\n                h = new n(t.substring(0, this.ecparams.keylen / 4), 16);\n            return this.verifyRaw(h, s, a, c);\n          } catch (t) {\n            return !1;\n          }\n        }, this.verify = function (t, e, o) {\n          var s, a, u;\n\n          if (Bitcoin.Util.isArray(e)) {\n            var c = this.parseSig(e);\n            s = c.r, a = c.s;\n          } else {\n            if (\"object\" !== (void 0 === e ? \"undefined\" : r(e)) || !e.r || !e.s) throw \"Invalid value for signature\";\n            s = e.r, a = e.s;\n          }\n\n          if (o instanceof Ke) u = o;else {\n            if (!Bitcoin.Util.isArray(o)) throw \"Invalid format for pubkey value, must be byte array or ECPointFp\";\n            u = i.decodeFrom(this.ecparams.curve, o);\n          }\n          var h = n.fromByteArrayUnsigned(t);\n          return this.verifyRaw(h, s, a, u);\n        }, this.verifyRaw = function (t, e, r, i) {\n          var o = this.ecparams.n,\n              s = this.ecparams.G;\n          if (e.compareTo(n.ONE) < 0 || e.compareTo(o) >= 0) return !1;\n          if (r.compareTo(n.ONE) < 0 || r.compareTo(o) >= 0) return !1;\n          var a = r.modInverse(o),\n              u = t.multiply(a).mod(o),\n              c = e.multiply(a).mod(o);\n          return s.multiply(u).add(i.multiply(c)).getX().toBigInteger().mod(o).equals(e);\n        }, this.serializeSig = function (t, e) {\n          var r = t.toByteArraySigned(),\n              n = e.toByteArraySigned(),\n              i = [];\n          return i.push(2), i.push(r.length), (i = i.concat(r)).push(2), i.push(n.length), (i = i.concat(n)).unshift(i.length), i.unshift(48), i;\n        }, this.parseSig = function (t) {\n          var e;\n          if (48 != t[0]) throw new Error(\"Signature not a valid DERSequence\");\n          if (2 != t[e = 2]) throw new Error(\"First element in signature must be a DERInteger\");\n          var r = t.slice(e + 2, e + 2 + t[e + 1]);\n          if (2 != t[e += 2 + t[e + 1]]) throw new Error(\"Second element in signature must be a DERInteger\");\n          var i = t.slice(e + 2, e + 2 + t[e + 1]);\n          return e += 2 + t[e + 1], {\n            r: n.fromByteArrayUnsigned(r),\n            s: n.fromByteArrayUnsigned(i)\n          };\n        }, this.parseSigCompact = function (t) {\n          if (65 !== t.length) throw \"Signature has the wrong length\";\n          var e = t[0] - 27;\n          if (e < 0 || e > 7) throw \"Invalid signature type\";\n          var r = this.ecparams.n;\n          return {\n            r: n.fromByteArrayUnsigned(t.slice(1, 33)).mod(r),\n            s: n.fromByteArrayUnsigned(t.slice(33, 65)).mod(r),\n            i: e\n          };\n        }, this.readPKCS5PrvKeyHex = function (t) {\n          if (!1 === h(t)) throw new Error(\"not ASN.1 hex string\");\n          var e, r, n;\n\n          try {\n            e = c(t, 0, [\"[0]\", 0], \"06\"), r = c(t, 0, [1], \"04\");\n\n            try {\n              n = c(t, 0, [\"[1]\", 0], \"03\");\n            } catch (t) {}\n          } catch (t) {\n            throw new Error(\"malformed PKCS#1/5 plain ECC private key\");\n          }\n\n          if (this.curveName = a(e), void 0 === this.curveName) throw \"unsupported curve name\";\n          this.setNamedCurve(this.curveName), this.setPublicKeyHex(n), this.setPrivateKeyHex(r), this.isPublic = !1;\n        }, this.readPKCS8PrvKeyHex = function (t) {\n          if (!1 === h(t)) throw new e(\"not ASN.1 hex string\");\n          var r, n, i;\n\n          try {\n            c(t, 0, [1, 0], \"06\"), r = c(t, 0, [1, 1], \"06\"), n = c(t, 0, [2, 0, 1], \"04\");\n\n            try {\n              i = c(t, 0, [2, 0, \"[1]\", 0], \"03\");\n            } catch (t) {}\n          } catch (t) {\n            throw new e(\"malformed PKCS#8 plain ECC private key\");\n          }\n\n          if (this.curveName = a(r), void 0 === this.curveName) throw new e(\"unsupported curve name\");\n          this.setNamedCurve(this.curveName), this.setPublicKeyHex(i), this.setPrivateKeyHex(n), this.isPublic = !1;\n        }, this.readPKCS8PubKeyHex = function (t) {\n          if (!1 === h(t)) throw new e(\"not ASN.1 hex string\");\n          var r, n;\n\n          try {\n            c(t, 0, [0, 0], \"06\"), r = c(t, 0, [0, 1], \"06\"), n = c(t, 0, [1], \"03\");\n          } catch (t) {\n            throw new e(\"malformed PKCS#8 ECC public key\");\n          }\n\n          if (this.curveName = a(r), null === this.curveName) throw new e(\"unsupported curve name\");\n          this.setNamedCurve(this.curveName), this.setPublicKeyHex(n);\n        }, this.readCertPubKeyHex = function (t, r) {\n          if (!1 === h(t)) throw new e(\"not ASN.1 hex string\");\n          var n, i;\n\n          try {\n            n = c(t, 0, [0, 5, 0, 1], \"06\"), i = c(t, 0, [0, 5, 1], \"03\");\n          } catch (t) {\n            throw new e(\"malformed X.509 certificate ECC public key\");\n          }\n\n          if (this.curveName = a(n), null === this.curveName) throw new e(\"unsupported curve name\");\n          this.setNamedCurve(this.curveName), this.setPublicKeyHex(i);\n        }, void 0 !== t && void 0 !== t.curve && (this.curveName = t.curve), void 0 === this.curveName && (this.curveName = \"secp256r1\"), this.setNamedCurve(this.curveName), void 0 !== t && (void 0 !== t.prv && this.setPrivateKeyHex(t.prv), void 0 !== t.pub && this.setPublicKeyHex(t.pub));\n      }, br.crypto.ECDSA.parseSigHex = function (t) {\n        var e = br.crypto.ECDSA.parseSigHexInHexRS(t);\n        return {\n          r: new F(e.r, 16),\n          s: new F(e.s, 16)\n        };\n      }, br.crypto.ECDSA.parseSigHexInHexRS = function (t) {\n        var e = Er,\n            r = e.getChildIdx,\n            n = e.getV;\n        if (e.checkStrictDER(t, 0), \"30\" != t.substr(0, 2)) throw new Error(\"signature is not a ASN.1 sequence\");\n        var i = r(t, 0);\n        if (2 != i.length) throw new Error(\"signature shall have two elements\");\n        var o = i[0],\n            s = i[1];\n        if (\"02\" != t.substr(o, 2)) throw new Error(\"1st item not ASN.1 integer\");\n        if (\"02\" != t.substr(s, 2)) throw new Error(\"2nd item not ASN.1 integer\");\n        return {\n          r: n(t, o),\n          s: n(t, s)\n        };\n      }, br.crypto.ECDSA.asn1SigToConcatSig = function (t) {\n        var e = br.crypto.ECDSA.parseSigHexInHexRS(t),\n            r = e.r,\n            n = e.s;\n        if (\"00\" == r.substr(0, 2) && r.length % 32 == 2 && (r = r.substr(2)), \"00\" == n.substr(0, 2) && n.length % 32 == 2 && (n = n.substr(2)), r.length % 32 == 30 && (r = \"00\" + r), n.length % 32 == 30 && (n = \"00\" + n), r.length % 32 != 0) throw \"unknown ECDSA sig r length error\";\n        if (n.length % 32 != 0) throw \"unknown ECDSA sig s length error\";\n        return r + n;\n      }, br.crypto.ECDSA.concatSigToASN1Sig = function (t) {\n        if (t.length / 2 * 8 % 128 != 0) throw \"unknown ECDSA concatinated r-s sig  length error\";\n        var e = t.substr(0, t.length / 2),\n            r = t.substr(t.length / 2);\n        return br.crypto.ECDSA.hexRSSigToASN1Sig(e, r);\n      }, br.crypto.ECDSA.hexRSSigToASN1Sig = function (t, e) {\n        var r = new F(t, 16),\n            n = new F(e, 16);\n        return br.crypto.ECDSA.biRSSigToASN1Sig(r, n);\n      }, br.crypto.ECDSA.biRSSigToASN1Sig = function (t, e) {\n        var r = br.asn1,\n            n = new r.DERInteger({\n          bigint: t\n        }),\n            i = new r.DERInteger({\n          bigint: e\n        });\n        return new r.DERSequence({\n          array: [n, i]\n        }).getEncodedHex();\n      }, br.crypto.ECDSA.getName = function (t) {\n        return \"2b8104001f\" === t ? \"secp192k1\" : \"2a8648ce3d030107\" === t ? \"secp256r1\" : \"2b8104000a\" === t ? \"secp256k1\" : \"2b81040021\" === t ? \"secp224r1\" : \"2b81040022\" === t ? \"secp384r1\" : -1 !== \"|secp256r1|NIST P-256|P-256|prime256v1|\".indexOf(t) ? \"secp256r1\" : -1 !== \"|secp256k1|\".indexOf(t) ? \"secp256k1\" : -1 !== \"|secp224r1|NIST P-224|P-224|\".indexOf(t) ? \"secp224r1\" : -1 !== \"|secp384r1|NIST P-384|P-384|\".indexOf(t) ? \"secp384r1\" : null;\n      }, void 0 !== br && br || (e.KJUR = br = {}), void 0 !== br.crypto && br.crypto || (br.crypto = {}), br.crypto.ECParameterDB = new function () {\n        var t = {},\n            e = {};\n\n        function r(t) {\n          return new F(t, 16);\n        }\n\n        this.getByName = function (r) {\n          var n = r;\n          if (void 0 !== e[n] && (n = e[r]), void 0 !== t[n]) return t[n];\n          throw \"unregistered EC curve name: \" + n;\n        }, this.regist = function (n, i, o, s, a, u, c, h, l, f, g, d) {\n          t[n] = {};\n\n          var p = r(o),\n              v = r(s),\n              y = r(a),\n              m = r(u),\n              _ = r(c),\n              S = new qe(p, v, y),\n              b = S.decodePointHex(\"04\" + h + l);\n\n          t[n].name = n, t[n].keylen = i, t[n].curve = S, t[n].G = b, t[n].n = m, t[n].h = _, t[n].oid = g, t[n].info = d;\n\n          for (var w = 0; w < f.length; w++) e[f[w]] = n;\n        };\n      }(), br.crypto.ECParameterDB.regist(\"secp128r1\", 128, \"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF\", \"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC\", \"E87579C11079F43DD824993C2CEE5ED3\", \"FFFFFFFE0000000075A30D1B9038A115\", \"1\", \"161FF7528B899B2D0C28607CA52C5B86\", \"CF5AC8395BAFEB13C02DA292DDED7A83\", [], \"\", \"secp128r1 : SECG curve over a 128 bit prime field\"), br.crypto.ECParameterDB.regist(\"secp160k1\", 160, \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73\", \"0\", \"7\", \"0100000000000000000001B8FA16DFAB9ACA16B6B3\", \"1\", \"3B4C382CE37AA192A4019E763036F4F5DD4D7EBB\", \"938CF935318FDCED6BC28286531733C3F03C4FEE\", [], \"\", \"secp160k1 : SECG curve over a 160 bit prime field\"), br.crypto.ECParameterDB.regist(\"secp160r1\", 160, \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF\", \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC\", \"1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45\", \"0100000000000000000001F4C8F927AED3CA752257\", \"1\", \"4A96B5688EF573284664698968C38BB913CBFC82\", \"23A628553168947D59DCC912042351377AC5FB32\", [], \"\", \"secp160r1 : SECG curve over a 160 bit prime field\"), br.crypto.ECParameterDB.regist(\"secp192k1\", 192, \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37\", \"0\", \"3\", \"FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D\", \"1\", \"DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D\", \"9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D\", []), br.crypto.ECParameterDB.regist(\"secp192r1\", 192, \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF\", \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC\", \"64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1\", \"FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831\", \"1\", \"188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012\", \"07192B95FFC8DA78631011ED6B24CDD573F977A11E794811\", []), br.crypto.ECParameterDB.regist(\"secp224r1\", 224, \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001\", \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE\", \"B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4\", \"FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D\", \"1\", \"B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21\", \"BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34\", []), br.crypto.ECParameterDB.regist(\"secp256k1\", 256, \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F\", \"0\", \"7\", \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141\", \"1\", \"79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798\", \"483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8\", []), br.crypto.ECParameterDB.regist(\"secp256r1\", 256, \"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF\", \"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC\", \"5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B\", \"FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551\", \"1\", \"6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296\", \"4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5\", [\"NIST P-256\", \"P-256\", \"prime256v1\"]), br.crypto.ECParameterDB.regist(\"secp384r1\", 384, \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF\", \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC\", \"B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF\", \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973\", \"1\", \"AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7\", \"3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f\", [\"NIST P-384\", \"P-384\"]), br.crypto.ECParameterDB.regist(\"secp521r1\", 521, \"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF\", \"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC\", \"051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00\", \"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409\", \"1\", \"C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66\", \"011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650\", [\"NIST P-521\", \"P-521\"]);\n\n      var Zr = function () {\n        var t = function t(r, n, i) {\n          return e(y.AES, r, n, i);\n        },\n            e = function t(e, r, n, i) {\n          var o = y.enc.Hex.parse(r),\n              s = y.enc.Hex.parse(n),\n              a = y.enc.Hex.parse(i),\n              u = {};\n          u.key = s, u.iv = a, u.ciphertext = o;\n          var c = e.decrypt(u, s, {\n            iv: a\n          });\n          return y.enc.Hex.stringify(c);\n        },\n            r = function t(e, r, i) {\n          return n(y.AES, e, r, i);\n        },\n            n = function t(e, r, n, i) {\n          var o = y.enc.Hex.parse(r),\n              s = y.enc.Hex.parse(n),\n              a = y.enc.Hex.parse(i),\n              u = e.encrypt(o, s, {\n            iv: a\n          }),\n              c = y.enc.Hex.parse(u.toString());\n          return y.enc.Base64.stringify(c);\n        },\n            i = {\n          \"AES-256-CBC\": {\n            proc: t,\n            eproc: r,\n            keylen: 32,\n            ivlen: 16\n          },\n          \"AES-192-CBC\": {\n            proc: t,\n            eproc: r,\n            keylen: 24,\n            ivlen: 16\n          },\n          \"AES-128-CBC\": {\n            proc: t,\n            eproc: r,\n            keylen: 16,\n            ivlen: 16\n          },\n          \"DES-EDE3-CBC\": {\n            proc: function t(r, n, i) {\n              return e(y.TripleDES, r, n, i);\n            },\n            eproc: function t(e, r, i) {\n              return n(y.TripleDES, e, r, i);\n            },\n            keylen: 24,\n            ivlen: 8\n          },\n          \"DES-CBC\": {\n            proc: function t(r, n, i) {\n              return e(y.DES, r, n, i);\n            },\n            eproc: function t(e, r, i) {\n              return n(y.DES, e, r, i);\n            },\n            keylen: 8,\n            ivlen: 8\n          }\n        },\n            o = function t(e) {\n          var r = {},\n              n = e.match(new RegExp(\"DEK-Info: ([^,]+),([0-9A-Fa-f]+)\", \"m\"));\n          n && (r.cipher = n[1], r.ivsalt = n[2]);\n          var i = e.match(new RegExp(\"-----BEGIN ([A-Z]+) PRIVATE KEY-----\"));\n          i && (r.type = i[1]);\n          var o = -1,\n              s = 0;\n          -1 != e.indexOf(\"\\r\\n\\r\\n\") && (o = e.indexOf(\"\\r\\n\\r\\n\"), s = 2), -1 != e.indexOf(\"\\n\\n\") && (o = e.indexOf(\"\\n\\n\"), s = 1);\n          var a = e.indexOf(\"-----END\");\n\n          if (-1 != o && -1 != a) {\n            var u = e.substring(o + 2 * s, a - s);\n            u = u.replace(/\\s+/g, \"\"), r.data = u;\n          }\n\n          return r;\n        },\n            s = function t(e, r, n) {\n          for (var o = n.substring(0, 16), s = y.enc.Hex.parse(o), a = y.enc.Utf8.parse(r), u = i[e].keylen + i[e].ivlen, c = \"\", h = null;;) {\n            var l = y.algo.MD5.create();\n            if (null != h && l.update(h), l.update(a), l.update(s), h = l.finalize(), (c += y.enc.Hex.stringify(h)).length >= 2 * u) break;\n          }\n\n          var f = {};\n          return f.keyhex = c.substr(0, 2 * i[e].keylen), f.ivhex = c.substr(2 * i[e].keylen, 2 * i[e].ivlen), f;\n        },\n            a = function t(e, r, n, o) {\n          var s = y.enc.Base64.parse(e),\n              a = y.enc.Hex.stringify(s);\n          return (0, i[r].proc)(a, n, o);\n        };\n\n        return {\n          version: \"1.0.0\",\n          parsePKCS5PEM: function t(e) {\n            return o(e);\n          },\n          getKeyAndUnusedIvByPasscodeAndIvsalt: function t(e, r, n) {\n            return s(e, r, n);\n          },\n          decryptKeyB64: function t(e, r, n, i) {\n            return a(e, r, n, i);\n          },\n          getDecryptedKeyHex: function t(e, r) {\n            var n = o(e),\n                i = (n.type, n.cipher),\n                u = n.ivsalt,\n                c = n.data,\n                h = s(i, r, u).keyhex;\n            return a(c, i, h, u);\n          },\n          getEncryptedPKCS5PEMFromPrvKeyHex: function t(e, r, n, o, a) {\n            var u = \"\";\n            if (void 0 !== o && null != o || (o = \"AES-256-CBC\"), void 0 === i[o]) throw \"KEYUTIL unsupported algorithm: \" + o;\n            void 0 !== a && null != a || (a = function t(e) {\n              var r = y.lib.WordArray.random(e);\n              return y.enc.Hex.stringify(r);\n            }(i[o].ivlen).toUpperCase());\n\n            var c = function t(e, r, n, o) {\n              return (0, i[r].eproc)(e, n, o);\n            }(r, o, s(o, n, a).keyhex, a);\n\n            u = \"-----BEGIN \" + e + \" PRIVATE KEY-----\\r\\n\";\n            return u += \"Proc-Type: 4,ENCRYPTED\\r\\n\", u += \"DEK-Info: \" + o + \",\" + a + \"\\r\\n\", u += \"\\r\\n\", u += c.replace(/(.{64})/g, \"$1\\r\\n\"), u += \"\\r\\n-----END \" + e + \" PRIVATE KEY-----\\r\\n\";\n          },\n          parseHexOfEncryptedPKCS8: function t(e) {\n            var r = Er,\n                n = r.getChildIdx,\n                i = r.getV,\n                o = {},\n                s = n(e, 0);\n            if (2 != s.length) throw \"malformed format: SEQUENCE(0).items != 2: \" + s.length;\n            o.ciphertext = i(e, s[1]);\n            var a = n(e, s[0]);\n            if (2 != a.length) throw \"malformed format: SEQUENCE(0.0).items != 2: \" + a.length;\n            if (\"2a864886f70d01050d\" != i(e, a[0])) throw \"this only supports pkcs5PBES2\";\n            var u = n(e, a[1]);\n            if (2 != a.length) throw \"malformed format: SEQUENCE(0.0.1).items != 2: \" + u.length;\n            var c = n(e, u[1]);\n            if (2 != c.length) throw \"malformed format: SEQUENCE(0.0.1.1).items != 2: \" + c.length;\n            if (\"2a864886f70d0307\" != i(e, c[0])) throw \"this only supports TripleDES\";\n            o.encryptionSchemeAlg = \"TripleDES\", o.encryptionSchemeIV = i(e, c[1]);\n            var h = n(e, u[0]);\n            if (2 != h.length) throw \"malformed format: SEQUENCE(0.0.1.0).items != 2: \" + h.length;\n            if (\"2a864886f70d01050c\" != i(e, h[0])) throw \"this only supports pkcs5PBKDF2\";\n            var l = n(e, h[1]);\n            if (l.length < 2) throw \"malformed format: SEQUENCE(0.0.1.0.1).items < 2: \" + l.length;\n            o.pbkdf2Salt = i(e, l[0]);\n            var f = i(e, l[1]);\n\n            try {\n              o.pbkdf2Iter = parseInt(f, 16);\n            } catch (t) {\n              throw \"malformed format pbkdf2Iter: \" + f;\n            }\n\n            return o;\n          },\n          getPBKDF2KeyHexFromParam: function t(e, r) {\n            var n = y.enc.Hex.parse(e.pbkdf2Salt),\n                i = e.pbkdf2Iter,\n                o = y.PBKDF2(r, n, {\n              keySize: 6,\n              iterations: i\n            });\n            return y.enc.Hex.stringify(o);\n          },\n          _getPlainPKCS8HexFromEncryptedPKCS8PEM: function t(e, r) {\n            var n = Hr(e, \"ENCRYPTED PRIVATE KEY\"),\n                i = this.parseHexOfEncryptedPKCS8(n),\n                o = Zr.getPBKDF2KeyHexFromParam(i, r),\n                s = {};\n            s.ciphertext = y.enc.Hex.parse(i.ciphertext);\n            var a = y.enc.Hex.parse(o),\n                u = y.enc.Hex.parse(i.encryptionSchemeIV),\n                c = y.TripleDES.decrypt(s, a, {\n              iv: u\n            });\n            return y.enc.Hex.stringify(c);\n          },\n          getKeyFromEncryptedPKCS8PEM: function t(e, r) {\n            var n = this._getPlainPKCS8HexFromEncryptedPKCS8PEM(e, r);\n\n            return this.getKeyFromPlainPrivatePKCS8Hex(n);\n          },\n          parsePlainPrivatePKCS8Hex: function t(e) {\n            var r = Er,\n                n = r.getChildIdx,\n                i = r.getV,\n                o = {\n              algparam: null\n            };\n            if (\"30\" != e.substr(0, 2)) throw \"malformed plain PKCS8 private key(code:001)\";\n            var s = n(e, 0);\n            if (3 != s.length) throw \"malformed plain PKCS8 private key(code:002)\";\n            if (\"30\" != e.substr(s[1], 2)) throw \"malformed PKCS8 private key(code:003)\";\n            var a = n(e, s[1]);\n            if (2 != a.length) throw \"malformed PKCS8 private key(code:004)\";\n            if (\"06\" != e.substr(a[0], 2)) throw \"malformed PKCS8 private key(code:005)\";\n            if (o.algoid = i(e, a[0]), \"06\" == e.substr(a[1], 2) && (o.algparam = i(e, a[1])), \"04\" != e.substr(s[2], 2)) throw \"malformed PKCS8 private key(code:006)\";\n            return o.keyidx = r.getVidx(e, s[2]), o;\n          },\n          getKeyFromPlainPrivatePKCS8PEM: function t(e) {\n            var r = Hr(e, \"PRIVATE KEY\");\n            return this.getKeyFromPlainPrivatePKCS8Hex(r);\n          },\n          getKeyFromPlainPrivatePKCS8Hex: function t(e) {\n            var r,\n                n = this.parsePlainPrivatePKCS8Hex(e);\n            if (\"2a864886f70d010101\" == n.algoid) r = new He();else if (\"2a8648ce380401\" == n.algoid) r = new br.crypto.DSA();else {\n              if (\"2a8648ce3d0201\" != n.algoid) throw \"unsupported private key algorithm\";\n              r = new br.crypto.ECDSA();\n            }\n            return r.readPKCS8PrvKeyHex(e), r;\n          },\n          _getKeyFromPublicPKCS8Hex: function t(e) {\n            var r,\n                n = Er.getVbyList(e, 0, [0, 0], \"06\");\n            if (\"2a864886f70d010101\" === n) r = new He();else if (\"2a8648ce380401\" === n) r = new br.crypto.DSA();else {\n              if (\"2a8648ce3d0201\" !== n) throw \"unsupported PKCS#8 public key hex\";\n              r = new br.crypto.ECDSA();\n            }\n            return r.readPKCS8PubKeyHex(e), r;\n          },\n          parsePublicRawRSAKeyHex: function t(e) {\n            var r = Er,\n                n = r.getChildIdx,\n                i = r.getV,\n                o = {};\n            if (\"30\" != e.substr(0, 2)) throw \"malformed RSA key(code:001)\";\n            var s = n(e, 0);\n            if (2 != s.length) throw \"malformed RSA key(code:002)\";\n            if (\"02\" != e.substr(s[0], 2)) throw \"malformed RSA key(code:003)\";\n            if (o.n = i(e, s[0]), \"02\" != e.substr(s[1], 2)) throw \"malformed RSA key(code:004)\";\n            return o.e = i(e, s[1]), o;\n          },\n          parsePublicPKCS8Hex: function t(e) {\n            var r = Er,\n                n = r.getChildIdx,\n                i = r.getV,\n                o = {\n              algparam: null\n            },\n                s = n(e, 0);\n            if (2 != s.length) throw \"outer DERSequence shall have 2 elements: \" + s.length;\n            var a = s[0];\n            if (\"30\" != e.substr(a, 2)) throw \"malformed PKCS8 public key(code:001)\";\n            var u = n(e, a);\n            if (2 != u.length) throw \"malformed PKCS8 public key(code:002)\";\n            if (\"06\" != e.substr(u[0], 2)) throw \"malformed PKCS8 public key(code:003)\";\n            if (o.algoid = i(e, u[0]), \"06\" == e.substr(u[1], 2) ? o.algparam = i(e, u[1]) : \"30\" == e.substr(u[1], 2) && (o.algparam = {}, o.algparam.p = r.getVbyList(e, u[1], [0], \"02\"), o.algparam.q = r.getVbyList(e, u[1], [1], \"02\"), o.algparam.g = r.getVbyList(e, u[1], [2], \"02\")), \"03\" != e.substr(s[1], 2)) throw \"malformed PKCS8 public key(code:004)\";\n            return o.key = i(e, s[1]).substr(2), o;\n          }\n        };\n      }();\n\n      Zr.getKey = function (t, e, r) {\n        var n = (v = Er).getChildIdx,\n            i = (v.getV, v.getVbyList),\n            o = br.crypto,\n            s = o.ECDSA,\n            a = o.DSA,\n            u = He,\n            c = Hr,\n            h = Zr;\n        if (void 0 !== u && t instanceof u) return t;\n        if (void 0 !== s && t instanceof s) return t;\n        if (void 0 !== a && t instanceof a) return t;\n        if (void 0 !== t.curve && void 0 !== t.xy && void 0 === t.d) return new s({\n          pub: t.xy,\n          curve: t.curve\n        });\n        if (void 0 !== t.curve && void 0 !== t.d) return new s({\n          prv: t.d,\n          curve: t.curve\n        });\n        if (void 0 === t.kty && void 0 !== t.n && void 0 !== t.e && void 0 === t.d) return (P = new u()).setPublic(t.n, t.e), P;\n        if (void 0 === t.kty && void 0 !== t.n && void 0 !== t.e && void 0 !== t.d && void 0 !== t.p && void 0 !== t.q && void 0 !== t.dp && void 0 !== t.dq && void 0 !== t.co && void 0 === t.qi) return (P = new u()).setPrivateEx(t.n, t.e, t.d, t.p, t.q, t.dp, t.dq, t.co), P;\n        if (void 0 === t.kty && void 0 !== t.n && void 0 !== t.e && void 0 !== t.d && void 0 === t.p) return (P = new u()).setPrivate(t.n, t.e, t.d), P;\n        if (void 0 !== t.p && void 0 !== t.q && void 0 !== t.g && void 0 !== t.y && void 0 === t.x) return (P = new a()).setPublic(t.p, t.q, t.g, t.y), P;\n        if (void 0 !== t.p && void 0 !== t.q && void 0 !== t.g && void 0 !== t.y && void 0 !== t.x) return (P = new a()).setPrivate(t.p, t.q, t.g, t.y, t.x), P;\n        if (\"RSA\" === t.kty && void 0 !== t.n && void 0 !== t.e && void 0 === t.d) return (P = new u()).setPublic(Ir(t.n), Ir(t.e)), P;\n        if (\"RSA\" === t.kty && void 0 !== t.n && void 0 !== t.e && void 0 !== t.d && void 0 !== t.p && void 0 !== t.q && void 0 !== t.dp && void 0 !== t.dq && void 0 !== t.qi) return (P = new u()).setPrivateEx(Ir(t.n), Ir(t.e), Ir(t.d), Ir(t.p), Ir(t.q), Ir(t.dp), Ir(t.dq), Ir(t.qi)), P;\n        if (\"RSA\" === t.kty && void 0 !== t.n && void 0 !== t.e && void 0 !== t.d) return (P = new u()).setPrivate(Ir(t.n), Ir(t.e), Ir(t.d)), P;\n\n        if (\"EC\" === t.kty && void 0 !== t.crv && void 0 !== t.x && void 0 !== t.y && void 0 === t.d) {\n          var l = (k = new s({\n            curve: t.crv\n          })).ecparams.keylen / 4,\n              f = \"04\" + (\"0000000000\" + Ir(t.x)).slice(-l) + (\"0000000000\" + Ir(t.y)).slice(-l);\n          return k.setPublicKeyHex(f), k;\n        }\n\n        if (\"EC\" === t.kty && void 0 !== t.crv && void 0 !== t.x && void 0 !== t.y && void 0 !== t.d) {\n          l = (k = new s({\n            curve: t.crv\n          })).ecparams.keylen / 4, f = \"04\" + (\"0000000000\" + Ir(t.x)).slice(-l) + (\"0000000000\" + Ir(t.y)).slice(-l);\n          var g = (\"0000000000\" + Ir(t.d)).slice(-l);\n          return k.setPublicKeyHex(f), k.setPrivateKeyHex(g), k;\n        }\n\n        if (\"pkcs5prv\" === r) {\n          var d,\n              p = t,\n              v = Er;\n          if (9 === (d = n(p, 0)).length) (P = new u()).readPKCS5PrvKeyHex(p);else if (6 === d.length) (P = new a()).readPKCS5PrvKeyHex(p);else {\n            if (!(d.length > 2 && \"04\" === p.substr(d[1], 2))) throw \"unsupported PKCS#1/5 hexadecimal key\";\n            (P = new s()).readPKCS5PrvKeyHex(p);\n          }\n          return P;\n        }\n\n        if (\"pkcs8prv\" === r) return P = h.getKeyFromPlainPrivatePKCS8Hex(t);\n        if (\"pkcs8pub\" === r) return h._getKeyFromPublicPKCS8Hex(t);\n        if (\"x509pub\" === r) return on.getPublicKeyFromCertHex(t);\n        if (-1 != t.indexOf(\"-END CERTIFICATE-\", 0) || -1 != t.indexOf(\"-END X509 CERTIFICATE-\", 0) || -1 != t.indexOf(\"-END TRUSTED CERTIFICATE-\", 0)) return on.getPublicKeyFromCertPEM(t);\n\n        if (-1 != t.indexOf(\"-END PUBLIC KEY-\")) {\n          var y = Hr(t, \"PUBLIC KEY\");\n          return h._getKeyFromPublicPKCS8Hex(y);\n        }\n\n        if (-1 != t.indexOf(\"-END RSA PRIVATE KEY-\") && -1 == t.indexOf(\"4,ENCRYPTED\")) {\n          var m = c(t, \"RSA PRIVATE KEY\");\n          return h.getKey(m, null, \"pkcs5prv\");\n        }\n\n        if (-1 != t.indexOf(\"-END DSA PRIVATE KEY-\") && -1 == t.indexOf(\"4,ENCRYPTED\")) {\n          var _ = i(R = c(t, \"DSA PRIVATE KEY\"), 0, [1], \"02\"),\n              S = i(R, 0, [2], \"02\"),\n              b = i(R, 0, [3], \"02\"),\n              w = i(R, 0, [4], \"02\"),\n              E = i(R, 0, [5], \"02\");\n\n          return (P = new a()).setPrivate(new F(_, 16), new F(S, 16), new F(b, 16), new F(w, 16), new F(E, 16)), P;\n        }\n\n        if (-1 != t.indexOf(\"-END EC PRIVATE KEY-\") && -1 == t.indexOf(\"4,ENCRYPTED\")) {\n          m = c(t, \"EC PRIVATE KEY\");\n          return h.getKey(m, null, \"pkcs5prv\");\n        }\n\n        if (-1 != t.indexOf(\"-END PRIVATE KEY-\")) return h.getKeyFromPlainPrivatePKCS8PEM(t);\n\n        if (-1 != t.indexOf(\"-END RSA PRIVATE KEY-\") && -1 != t.indexOf(\"4,ENCRYPTED\")) {\n          var x = h.getDecryptedKeyHex(t, e),\n              A = new He();\n          return A.readPKCS5PrvKeyHex(x), A;\n        }\n\n        if (-1 != t.indexOf(\"-END EC PRIVATE KEY-\") && -1 != t.indexOf(\"4,ENCRYPTED\")) {\n          var k,\n              P = i(R = h.getDecryptedKeyHex(t, e), 0, [1], \"04\"),\n              C = i(R, 0, [2, 0], \"06\"),\n              T = i(R, 0, [3, 0], \"03\").substr(2);\n          if (void 0 === br.crypto.OID.oidhex2name[C]) throw \"undefined OID(hex) in KJUR.crypto.OID: \" + C;\n          return (k = new s({\n            curve: br.crypto.OID.oidhex2name[C]\n          })).setPublicKeyHex(T), k.setPrivateKeyHex(P), k.isPublic = !1, k;\n        }\n\n        if (-1 != t.indexOf(\"-END DSA PRIVATE KEY-\") && -1 != t.indexOf(\"4,ENCRYPTED\")) {\n          var R;\n          _ = i(R = h.getDecryptedKeyHex(t, e), 0, [1], \"02\"), S = i(R, 0, [2], \"02\"), b = i(R, 0, [3], \"02\"), w = i(R, 0, [4], \"02\"), E = i(R, 0, [5], \"02\");\n          return (P = new a()).setPrivate(new F(_, 16), new F(S, 16), new F(b, 16), new F(w, 16), new F(E, 16)), P;\n        }\n\n        if (-1 != t.indexOf(\"-END ENCRYPTED PRIVATE KEY-\")) return h.getKeyFromEncryptedPKCS8PEM(t, e);\n        throw new Error(\"not supported argument\");\n      }, Zr.generateKeypair = function (t, e) {\n        if (\"RSA\" == t) {\n          var r = e;\n          (s = new He()).generate(r, \"10001\"), s.isPrivate = !0, s.isPublic = !0;\n          var n = new He(),\n              i = s.n.toString(16),\n              o = s.e.toString(16);\n          return n.setPublic(i, o), n.isPrivate = !1, n.isPublic = !0, (a = {}).prvKeyObj = s, a.pubKeyObj = n, a;\n        }\n\n        if (\"EC\" == t) {\n          var s,\n              a,\n              u = e,\n              c = new br.crypto.ECDSA({\n            curve: u\n          }).generateKeyPairHex();\n          return (s = new br.crypto.ECDSA({\n            curve: u\n          })).setPublicKeyHex(c.ecpubhex), s.setPrivateKeyHex(c.ecprvhex), s.isPrivate = !0, s.isPublic = !1, (n = new br.crypto.ECDSA({\n            curve: u\n          })).setPublicKeyHex(c.ecpubhex), n.isPrivate = !1, n.isPublic = !0, (a = {}).prvKeyObj = s, a.pubKeyObj = n, a;\n        }\n\n        throw \"unknown algorithm: \" + t;\n      }, Zr.getPEM = function (t, e, r, n, i, o) {\n        var s = br,\n            a = s.asn1,\n            u = a.DERObjectIdentifier,\n            c = a.DERInteger,\n            h = a.ASN1Util.newObject,\n            l = a.x509.SubjectPublicKeyInfo,\n            f = s.crypto,\n            g = f.DSA,\n            d = f.ECDSA,\n            p = He;\n\n        function v(t) {\n          return h({\n            seq: [{\n              int: 0\n            }, {\n              int: {\n                bigint: t.n\n              }\n            }, {\n              int: t.e\n            }, {\n              int: {\n                bigint: t.d\n              }\n            }, {\n              int: {\n                bigint: t.p\n              }\n            }, {\n              int: {\n                bigint: t.q\n              }\n            }, {\n              int: {\n                bigint: t.dmp1\n              }\n            }, {\n              int: {\n                bigint: t.dmq1\n              }\n            }, {\n              int: {\n                bigint: t.coeff\n              }\n            }]\n          });\n        }\n\n        function m(t) {\n          return h({\n            seq: [{\n              int: 1\n            }, {\n              octstr: {\n                hex: t.prvKeyHex\n              }\n            }, {\n              tag: [\"a0\", !0, {\n                oid: {\n                  name: t.curveName\n                }\n              }]\n            }, {\n              tag: [\"a1\", !0, {\n                bitstr: {\n                  hex: \"00\" + t.pubKeyHex\n                }\n              }]\n            }]\n          });\n        }\n\n        function _(t) {\n          return h({\n            seq: [{\n              int: 0\n            }, {\n              int: {\n                bigint: t.p\n              }\n            }, {\n              int: {\n                bigint: t.q\n              }\n            }, {\n              int: {\n                bigint: t.g\n              }\n            }, {\n              int: {\n                bigint: t.y\n              }\n            }, {\n              int: {\n                bigint: t.x\n              }\n            }]\n          });\n        }\n\n        if ((void 0 !== p && t instanceof p || void 0 !== g && t instanceof g || void 0 !== d && t instanceof d) && 1 == t.isPublic && (void 0 === e || \"PKCS8PUB\" == e)) return Mr(F = new l(t).getEncodedHex(), \"PUBLIC KEY\");\n        if (\"PKCS1PRV\" == e && void 0 !== p && t instanceof p && (void 0 === r || null == r) && 1 == t.isPrivate) return Mr(F = v(t).getEncodedHex(), \"RSA PRIVATE KEY\");\n\n        if (\"PKCS1PRV\" == e && void 0 !== d && t instanceof d && (void 0 === r || null == r) && 1 == t.isPrivate) {\n          var S = new u({\n            name: t.curveName\n          }).getEncodedHex(),\n              b = m(t).getEncodedHex(),\n              w = \"\";\n          return w += Mr(S, \"EC PARAMETERS\"), w += Mr(b, \"EC PRIVATE KEY\");\n        }\n\n        if (\"PKCS1PRV\" == e && void 0 !== g && t instanceof g && (void 0 === r || null == r) && 1 == t.isPrivate) return Mr(F = _(t).getEncodedHex(), \"DSA PRIVATE KEY\");\n\n        if (\"PKCS5PRV\" == e && void 0 !== p && t instanceof p && void 0 !== r && null != r && 1 == t.isPrivate) {\n          var F = v(t).getEncodedHex();\n          return void 0 === n && (n = \"DES-EDE3-CBC\"), this.getEncryptedPKCS5PEMFromPrvKeyHex(\"RSA\", F, r, n, o);\n        }\n\n        if (\"PKCS5PRV\" == e && void 0 !== d && t instanceof d && void 0 !== r && null != r && 1 == t.isPrivate) {\n          F = m(t).getEncodedHex();\n          return void 0 === n && (n = \"DES-EDE3-CBC\"), this.getEncryptedPKCS5PEMFromPrvKeyHex(\"EC\", F, r, n, o);\n        }\n\n        if (\"PKCS5PRV\" == e && void 0 !== g && t instanceof g && void 0 !== r && null != r && 1 == t.isPrivate) {\n          F = _(t).getEncodedHex();\n          return void 0 === n && (n = \"DES-EDE3-CBC\"), this.getEncryptedPKCS5PEMFromPrvKeyHex(\"DSA\", F, r, n, o);\n        }\n\n        var E = function t(e, r) {\n          var n = x(e, r);\n          return new h({\n            seq: [{\n              seq: [{\n                oid: {\n                  name: \"pkcs5PBES2\"\n                }\n              }, {\n                seq: [{\n                  seq: [{\n                    oid: {\n                      name: \"pkcs5PBKDF2\"\n                    }\n                  }, {\n                    seq: [{\n                      octstr: {\n                        hex: n.pbkdf2Salt\n                      }\n                    }, {\n                      int: n.pbkdf2Iter\n                    }]\n                  }]\n                }, {\n                  seq: [{\n                    oid: {\n                      name: \"des-EDE3-CBC\"\n                    }\n                  }, {\n                    octstr: {\n                      hex: n.encryptionSchemeIV\n                    }\n                  }]\n                }]\n              }]\n            }, {\n              octstr: {\n                hex: n.ciphertext\n              }\n            }]\n          }).getEncodedHex();\n        },\n            x = function t(e, r) {\n          var n = y.lib.WordArray.random(8),\n              i = y.lib.WordArray.random(8),\n              o = y.PBKDF2(r, n, {\n            keySize: 6,\n            iterations: 100\n          }),\n              s = y.enc.Hex.parse(e),\n              a = y.TripleDES.encrypt(s, o, {\n            iv: i\n          }) + \"\",\n              u = {};\n          return u.ciphertext = a, u.pbkdf2Salt = y.enc.Hex.stringify(n), u.pbkdf2Iter = 100, u.encryptionSchemeAlg = \"DES-EDE3-CBC\", u.encryptionSchemeIV = y.enc.Hex.stringify(i), u;\n        };\n\n        if (\"PKCS8PRV\" == e && null != p && t instanceof p && 1 == t.isPrivate) {\n          var A = v(t).getEncodedHex();\n          F = h({\n            seq: [{\n              int: 0\n            }, {\n              seq: [{\n                oid: {\n                  name: \"rsaEncryption\"\n                }\n              }, {\n                null: !0\n              }]\n            }, {\n              octstr: {\n                hex: A\n              }\n            }]\n          }).getEncodedHex();\n          return void 0 === r || null == r ? Mr(F, \"PRIVATE KEY\") : Mr(b = E(F, r), \"ENCRYPTED PRIVATE KEY\");\n        }\n\n        if (\"PKCS8PRV\" == e && void 0 !== d && t instanceof d && 1 == t.isPrivate) {\n          A = new h({\n            seq: [{\n              int: 1\n            }, {\n              octstr: {\n                hex: t.prvKeyHex\n              }\n            }, {\n              tag: [\"a1\", !0, {\n                bitstr: {\n                  hex: \"00\" + t.pubKeyHex\n                }\n              }]\n            }]\n          }).getEncodedHex(), F = h({\n            seq: [{\n              int: 0\n            }, {\n              seq: [{\n                oid: {\n                  name: \"ecPublicKey\"\n                }\n              }, {\n                oid: {\n                  name: t.curveName\n                }\n              }]\n            }, {\n              octstr: {\n                hex: A\n              }\n            }]\n          }).getEncodedHex();\n          return void 0 === r || null == r ? Mr(F, \"PRIVATE KEY\") : Mr(b = E(F, r), \"ENCRYPTED PRIVATE KEY\");\n        }\n\n        if (\"PKCS8PRV\" == e && void 0 !== g && t instanceof g && 1 == t.isPrivate) {\n          A = new c({\n            bigint: t.x\n          }).getEncodedHex(), F = h({\n            seq: [{\n              int: 0\n            }, {\n              seq: [{\n                oid: {\n                  name: \"dsa\"\n                }\n              }, {\n                seq: [{\n                  int: {\n                    bigint: t.p\n                  }\n                }, {\n                  int: {\n                    bigint: t.q\n                  }\n                }, {\n                  int: {\n                    bigint: t.g\n                  }\n                }]\n              }]\n            }, {\n              octstr: {\n                hex: A\n              }\n            }]\n          }).getEncodedHex();\n          return void 0 === r || null == r ? Mr(F, \"PRIVATE KEY\") : Mr(b = E(F, r), \"ENCRYPTED PRIVATE KEY\");\n        }\n\n        throw new Error(\"unsupported object nor format\");\n      }, Zr.getKeyFromCSRPEM = function (t) {\n        var e = Hr(t, \"CERTIFICATE REQUEST\");\n        return Zr.getKeyFromCSRHex(e);\n      }, Zr.getKeyFromCSRHex = function (t) {\n        var e = Zr.parseCSRHex(t);\n        return Zr.getKey(e.p8pubkeyhex, null, \"pkcs8pub\");\n      }, Zr.parseCSRHex = function (t) {\n        var e = Er,\n            r = e.getChildIdx,\n            n = e.getTLV,\n            i = {},\n            o = t;\n        if (\"30\" != o.substr(0, 2)) throw \"malformed CSR(code:001)\";\n        var s = r(o, 0);\n        if (s.length < 1) throw \"malformed CSR(code:002)\";\n        if (\"30\" != o.substr(s[0], 2)) throw \"malformed CSR(code:003)\";\n        var a = r(o, s[0]);\n        if (a.length < 3) throw \"malformed CSR(code:004)\";\n        return i.p8pubkeyhex = n(o, a[2]), i;\n      }, Zr.getKeyID = function (t) {\n        var e = Zr,\n            r = Er;\n        \"string\" == typeof t && -1 != t.indexOf(\"BEGIN \") && (t = e.getKey(t));\n        var n = Hr(e.getPEM(t)),\n            i = r.getIdxbyList(n, 0, [1]),\n            o = r.getV(n, i).substring(2);\n        return br.crypto.Util.hashHex(o, \"sha1\");\n      }, Zr.getJWKFromKey = function (t) {\n        var e = {};\n        if (t instanceof He && t.isPrivate) return e.kty = \"RSA\", e.n = Rr(t.n.toString(16)), e.e = Rr(t.e.toString(16)), e.d = Rr(t.d.toString(16)), e.p = Rr(t.p.toString(16)), e.q = Rr(t.q.toString(16)), e.dp = Rr(t.dmp1.toString(16)), e.dq = Rr(t.dmq1.toString(16)), e.qi = Rr(t.coeff.toString(16)), e;\n        if (t instanceof He && t.isPublic) return e.kty = \"RSA\", e.n = Rr(t.n.toString(16)), e.e = Rr(t.e.toString(16)), e;\n\n        if (t instanceof br.crypto.ECDSA && t.isPrivate) {\n          if (\"P-256\" !== (n = t.getShortNISTPCurveName()) && \"P-384\" !== n) throw \"unsupported curve name for JWT: \" + n;\n          var r = t.getPublicKeyXYHex();\n          return e.kty = \"EC\", e.crv = n, e.x = Rr(r.x), e.y = Rr(r.y), e.d = Rr(t.prvKeyHex), e;\n        }\n\n        if (t instanceof br.crypto.ECDSA && t.isPublic) {\n          var n;\n          if (\"P-256\" !== (n = t.getShortNISTPCurveName()) && \"P-384\" !== n) throw \"unsupported curve name for JWT: \" + n;\n          r = t.getPublicKeyXYHex();\n          return e.kty = \"EC\", e.crv = n, e.x = Rr(r.x), e.y = Rr(r.y), e;\n        }\n\n        throw \"not supported key object\";\n      }, He.getPosArrayOfChildrenFromHex = function (t) {\n        return Er.getChildIdx(t, 0);\n      }, He.getHexValueArrayOfChildrenFromHex = function (t) {\n        var e,\n            r = Er.getV,\n            n = r(t, (e = He.getPosArrayOfChildrenFromHex(t))[0]),\n            i = r(t, e[1]),\n            o = r(t, e[2]),\n            s = r(t, e[3]),\n            a = r(t, e[4]),\n            u = r(t, e[5]),\n            c = r(t, e[6]),\n            h = r(t, e[7]),\n            l = r(t, e[8]);\n        return (e = new Array()).push(n, i, o, s, a, u, c, h, l), e;\n      }, He.prototype.readPrivateKeyFromPEMString = function (t) {\n        var e = Hr(t),\n            r = He.getHexValueArrayOfChildrenFromHex(e);\n        this.setPrivateEx(r[1], r[2], r[3], r[4], r[5], r[6], r[7], r[8]);\n      }, He.prototype.readPKCS5PrvKeyHex = function (t) {\n        var e = He.getHexValueArrayOfChildrenFromHex(t);\n        this.setPrivateEx(e[1], e[2], e[3], e[4], e[5], e[6], e[7], e[8]);\n      }, He.prototype.readPKCS8PrvKeyHex = function (t) {\n        var e,\n            r,\n            n,\n            i,\n            o,\n            s,\n            a,\n            u,\n            c = Er,\n            h = c.getVbyListEx;\n        if (!1 === c.isASN1HEX(t)) throw new Error(\"not ASN.1 hex string\");\n\n        try {\n          e = h(t, 0, [2, 0, 1], \"02\"), r = h(t, 0, [2, 0, 2], \"02\"), n = h(t, 0, [2, 0, 3], \"02\"), i = h(t, 0, [2, 0, 4], \"02\"), o = h(t, 0, [2, 0, 5], \"02\"), s = h(t, 0, [2, 0, 6], \"02\"), a = h(t, 0, [2, 0, 7], \"02\"), u = h(t, 0, [2, 0, 8], \"02\");\n        } catch (t) {\n          throw new Error(\"malformed PKCS#8 plain RSA private key\");\n        }\n\n        this.setPrivateEx(e, r, n, i, o, s, a, u);\n      }, He.prototype.readPKCS5PubKeyHex = function (t) {\n        var e = Er,\n            r = e.getV;\n        if (!1 === e.isASN1HEX(t)) throw new Error(\"keyHex is not ASN.1 hex string\");\n        var n = e.getChildIdx(t, 0);\n        if (2 !== n.length || \"02\" !== t.substr(n[0], 2) || \"02\" !== t.substr(n[1], 2)) throw new Error(\"wrong hex for PKCS#5 public key\");\n        var i = r(t, n[0]),\n            o = r(t, n[1]);\n        this.setPublic(i, o);\n      }, He.prototype.readPKCS8PubKeyHex = function (t) {\n        var e = Er;\n        if (!1 === e.isASN1HEX(t)) throw new Error(\"not ASN.1 hex string\");\n        if (\"06092a864886f70d010101\" !== e.getTLVbyListEx(t, 0, [0, 0])) throw new Error(\"not PKCS8 RSA public key\");\n        var r = e.getTLVbyListEx(t, 0, [1, 0]);\n        this.readPKCS5PubKeyHex(r);\n      }, He.prototype.readCertPubKeyHex = function (t, e) {\n        var r, n;\n        (r = new on()).readCertHex(t), n = r.getPublicKeyHex(), this.readPKCS8PubKeyHex(n);\n      };\n      var tn = new RegExp(\"[^0-9a-f]\", \"gi\");\n\n      function en(t, e) {\n        for (var r = \"\", n = e / 4 - t.length, i = 0; i < n; i++) r += \"0\";\n\n        return r + t;\n      }\n\n      function rn(t, e, r) {\n        for (var n = \"\", i = 0; n.length < e;) n += Nr(r(Ur(t + String.fromCharCode.apply(String, [(4278190080 & i) >> 24, (16711680 & i) >> 16, (65280 & i) >> 8, 255 & i])))), i += 1;\n\n        return n;\n      }\n\n      function nn(t) {\n        for (var e in br.crypto.Util.DIGESTINFOHEAD) {\n          var r = br.crypto.Util.DIGESTINFOHEAD[e],\n              n = r.length;\n          if (t.substring(0, n) == r) return [e, t.substring(n)];\n        }\n\n        return [];\n      }\n\n      function on(t) {\n        var e,\n            r = Er,\n            n = r.getChildIdx,\n            i = r.getV,\n            o = r.getTLV,\n            s = r.getVbyList,\n            a = r.getVbyListEx,\n            u = r.getTLVbyList,\n            c = r.getTLVbyListEx,\n            h = r.getIdxbyList,\n            l = r.getIdxbyListEx,\n            f = r.getVidx,\n            g = r.oidname,\n            d = r.hextooidstr,\n            p = on,\n            v = Hr;\n\n        try {\n          e = br.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;\n        } catch (t) {}\n\n        this.HEX2STAG = {\n          \"0c\": \"utf8\",\n          13: \"prn\",\n          16: \"ia5\",\n          \"1a\": \"vis\",\n          \"1e\": \"bmp\"\n        }, this.hex = null, this.version = 0, this.foffset = 0, this.aExtInfo = null, this.getVersion = function () {\n          return null === this.hex || 0 !== this.version ? this.version : \"a003020102\" !== u(this.hex, 0, [0, 0]) ? (this.version = 1, this.foffset = -1, 1) : (this.version = 3, 3);\n        }, this.getSerialNumberHex = function () {\n          return a(this.hex, 0, [0, 0], \"02\");\n        }, this.getSignatureAlgorithmField = function () {\n          var t = c(this.hex, 0, [0, 1]);\n          return this.getAlgorithmIdentifierName(t);\n        }, this.getAlgorithmIdentifierName = function (t) {\n          for (var r in e) if (t === e[r]) return r;\n\n          return g(a(t, 0, [0], \"06\"));\n        }, this.getIssuer = function () {\n          return this.getX500Name(this.getIssuerHex());\n        }, this.getIssuerHex = function () {\n          return u(this.hex, 0, [0, 3 + this.foffset], \"30\");\n        }, this.getIssuerString = function () {\n          return p.hex2dn(this.getIssuerHex());\n        }, this.getSubject = function () {\n          return this.getX500Name(this.getSubjectHex());\n        }, this.getSubjectHex = function () {\n          return u(this.hex, 0, [0, 5 + this.foffset], \"30\");\n        }, this.getSubjectString = function () {\n          return p.hex2dn(this.getSubjectHex());\n        }, this.getNotBefore = function () {\n          var t = s(this.hex, 0, [0, 4 + this.foffset, 0]);\n          return t = t.replace(/(..)/g, \"%$1\"), t = decodeURIComponent(t);\n        }, this.getNotAfter = function () {\n          var t = s(this.hex, 0, [0, 4 + this.foffset, 1]);\n          return t = t.replace(/(..)/g, \"%$1\"), t = decodeURIComponent(t);\n        }, this.getPublicKeyHex = function () {\n          return r.getTLVbyList(this.hex, 0, [0, 6 + this.foffset], \"30\");\n        }, this.getPublicKeyIdx = function () {\n          return h(this.hex, 0, [0, 6 + this.foffset], \"30\");\n        }, this.getPublicKeyContentIdx = function () {\n          var t = this.getPublicKeyIdx();\n          return h(this.hex, t, [1, 0], \"30\");\n        }, this.getPublicKey = function () {\n          return Zr.getKey(this.getPublicKeyHex(), null, \"pkcs8pub\");\n        }, this.getSignatureAlgorithmName = function () {\n          var t = u(this.hex, 0, [1], \"30\");\n          return this.getAlgorithmIdentifierName(t);\n        }, this.getSignatureValueHex = function () {\n          return s(this.hex, 0, [2], \"03\", !0);\n        }, this.verifySignature = function (t) {\n          var e = this.getSignatureAlgorithmField(),\n              r = this.getSignatureValueHex(),\n              n = u(this.hex, 0, [0], \"30\"),\n              i = new br.crypto.Signature({\n            alg: e\n          });\n          return i.init(t), i.updateHex(n), i.verify(r);\n        }, this.parseExt = function (t) {\n          var e, o, a;\n\n          if (void 0 === t) {\n            if (a = this.hex, 3 !== this.version) return -1;\n            e = h(a, 0, [0, 7, 0], \"30\"), o = n(a, e);\n          } else {\n            a = Hr(t);\n            var u = h(a, 0, [0, 3, 0, 0], \"06\");\n            if (\"2a864886f70d01090e\" != i(a, u)) return void (this.aExtInfo = new Array());\n            e = h(a, 0, [0, 3, 0, 1, 0], \"30\"), o = n(a, e), this.hex = a;\n          }\n\n          this.aExtInfo = new Array();\n\n          for (var c = 0; c < o.length; c++) {\n            var l = {\n              critical: !1\n            },\n                g = 0;\n            3 === n(a, o[c]).length && (l.critical = !0, g = 1), l.oid = r.hextooidstr(s(a, o[c], [0], \"06\"));\n            var d = h(a, o[c], [1 + g]);\n            l.vidx = f(a, d), this.aExtInfo.push(l);\n          }\n        }, this.getExtInfo = function (t) {\n          var e = this.aExtInfo,\n              r = t;\n          if (t.match(/^[0-9.]+$/) || (r = br.asn1.x509.OID.name2oid(t)), \"\" !== r) for (var n = 0; n < e.length; n++) if (e[n].oid === r) return e[n];\n        }, this.getExtBasicConstraints = function (t, e) {\n          if (void 0 === t && void 0 === e) {\n            var r = this.getExtInfo(\"basicConstraints\");\n            if (void 0 === r) return;\n            t = o(this.hex, r.vidx), e = r.critical;\n          }\n\n          var n = {\n            extname: \"basicConstraints\"\n          };\n          if (e && (n.critical = !0), \"3000\" === t) return n;\n          if (\"30030101ff\" === t) return n.cA = !0, n;\n\n          if (\"30060101ff02\" === t.substr(0, 12)) {\n            var s = i(t, 10),\n                a = parseInt(s, 16);\n            return n.cA = !0, n.pathLen = a, n;\n          }\n\n          throw new Error(\"hExtV parse error: \" + t);\n        }, this.getExtKeyUsage = function (t, e) {\n          if (void 0 === t && void 0 === e) {\n            var r = this.getExtInfo(\"keyUsage\");\n            if (void 0 === r) return;\n            t = o(this.hex, r.vidx), e = r.critical;\n          }\n\n          var n = {\n            extname: \"keyUsage\"\n          };\n          return e && (n.critical = !0), n.names = this.getExtKeyUsageString(t).split(\",\"), n;\n        }, this.getExtKeyUsageBin = function (t) {\n          if (void 0 === t) {\n            var e = this.getExtInfo(\"keyUsage\");\n            if (void 0 === e) return \"\";\n            t = o(this.hex, e.vidx);\n          }\n\n          if (8 != t.length && 10 != t.length) throw new Error(\"malformed key usage value: \" + t);\n          var r = \"000000000000000\" + parseInt(t.substr(6), 16).toString(2);\n          return 8 == t.length && (r = r.slice(-8)), 10 == t.length && (r = r.slice(-16)), \"\" == (r = r.replace(/0+$/, \"\")) && (r = \"0\"), r;\n        }, this.getExtKeyUsageString = function (t) {\n          for (var e = this.getExtKeyUsageBin(t), r = new Array(), n = 0; n < e.length; n++) \"1\" == e.substr(n, 1) && r.push(on.KEYUSAGE_NAME[n]);\n\n          return r.join(\",\");\n        }, this.getExtSubjectKeyIdentifier = function (t, e) {\n          if (void 0 === t && void 0 === e) {\n            var r = this.getExtInfo(\"subjectKeyIdentifier\");\n            if (void 0 === r) return;\n            t = o(this.hex, r.vidx), e = r.critical;\n          }\n\n          var n = {\n            extname: \"subjectKeyIdentifier\"\n          };\n          e && (n.critical = !0);\n          var s = i(t, 0);\n          return n.kid = {\n            hex: s\n          }, n;\n        }, this.getExtAuthorityKeyIdentifier = function (t, e) {\n          if (void 0 === t && void 0 === e) {\n            var r = this.getExtInfo(\"authorityKeyIdentifier\");\n            if (void 0 === r) return;\n            t = o(this.hex, r.vidx), e = r.critical;\n          }\n\n          var s = {\n            extname: \"authorityKeyIdentifier\"\n          };\n          e && (s.critical = !0);\n\n          for (var a = n(t, 0), u = 0; u < a.length; u++) {\n            var c = t.substr(a[u], 2);\n\n            if (\"80\" === c && (s.kid = {\n              hex: i(t, a[u])\n            }), \"a1\" === c) {\n              var h = o(t, a[u]),\n                  l = this.getGeneralNames(h);\n              s.issuer = l[0].dn;\n            }\n\n            \"82\" === c && (s.sn = {\n              hex: i(t, a[u])\n            });\n          }\n\n          return s;\n        }, this.getExtExtKeyUsage = function (t, e) {\n          if (void 0 === t && void 0 === e) {\n            var r = this.getExtInfo(\"extKeyUsage\");\n            if (void 0 === r) return;\n            t = o(this.hex, r.vidx), e = r.critical;\n          }\n\n          var s = {\n            extname: \"extKeyUsage\",\n            array: []\n          };\n          e && (s.critical = !0);\n\n          for (var a = n(t, 0), u = 0; u < a.length; u++) s.array.push(g(i(t, a[u])));\n\n          return s;\n        }, this.getExtExtKeyUsageName = function () {\n          var t = this.getExtInfo(\"extKeyUsage\");\n          if (void 0 === t) return t;\n          var e = new Array(),\n              r = o(this.hex, t.vidx);\n          if (\"\" === r) return e;\n\n          for (var s = n(r, 0), a = 0; a < s.length; a++) e.push(g(i(r, s[a])));\n\n          return e;\n        }, this.getExtSubjectAltName = function (t, e) {\n          if (void 0 === t && void 0 === e) {\n            var r = this.getExtInfo(\"subjectAltName\");\n            if (void 0 === r) return;\n            t = o(this.hex, r.vidx), e = r.critical;\n          }\n\n          var n = {\n            extname: \"subjectAltName\",\n            array: []\n          };\n          return e && (n.critical = !0), n.array = this.getGeneralNames(t), n;\n        }, this.getExtIssuerAltName = function (t, e) {\n          if (void 0 === t && void 0 === e) {\n            var r = this.getExtInfo(\"issuerAltName\");\n            if (void 0 === r) return;\n            t = o(this.hex, r.vidx), e = r.critical;\n          }\n\n          var n = {\n            extname: \"issuerAltName\",\n            array: []\n          };\n          return e && (n.critical = !0), n.array = this.getGeneralNames(t), n;\n        }, this.getGeneralNames = function (t) {\n          for (var e = n(t, 0), r = [], i = 0; i < e.length; i++) {\n            var s = this.getGeneralName(o(t, e[i]));\n            void 0 !== s && r.push(s);\n          }\n\n          return r;\n        }, this.getGeneralName = function (t) {\n          var e = t.substr(0, 2),\n              r = i(t, 0),\n              n = Nr(r);\n          return \"81\" == e ? {\n            rfc822: n\n          } : \"82\" == e ? {\n            dns: n\n          } : \"86\" == e ? {\n            uri: n\n          } : \"87\" == e ? {\n            ip: Yr(r)\n          } : \"a4\" == e ? {\n            dn: this.getX500Name(r)\n          } : void 0;\n        }, this.getExtSubjectAltName2 = function () {\n          var t,\n              e,\n              r,\n              s = this.getExtInfo(\"subjectAltName\");\n          if (void 0 === s) return s;\n\n          for (var a = new Array(), u = o(this.hex, s.vidx), c = n(u, 0), h = 0; h < c.length; h++) r = u.substr(c[h], 2), t = i(u, c[h]), \"81\" === r && (e = Lr(t), a.push([\"MAIL\", e])), \"82\" === r && (e = Lr(t), a.push([\"DNS\", e])), \"84\" === r && (e = on.hex2dn(t, 0), a.push([\"DN\", e])), \"86\" === r && (e = Lr(t), a.push([\"URI\", e])), \"87\" === r && (e = Yr(t), a.push([\"IP\", e]));\n\n          return a;\n        }, this.getExtCRLDistributionPoints = function (t, e) {\n          if (void 0 === t && void 0 === e) {\n            var r = this.getExtInfo(\"cRLDistributionPoints\");\n            if (void 0 === r) return;\n            t = o(this.hex, r.vidx), e = r.critical;\n          }\n\n          var i = {\n            extname: \"cRLDistributionPoints\",\n            array: []\n          };\n          e && (i.critical = !0);\n\n          for (var s = n(t, 0), a = 0; a < s.length; a++) {\n            var u = o(t, s[a]);\n            i.array.push(this.getDistributionPoint(u));\n          }\n\n          return i;\n        }, this.getDistributionPoint = function (t) {\n          for (var e = {}, r = n(t, 0), i = 0; i < r.length; i++) {\n            var s = t.substr(r[i], 2),\n                a = o(t, r[i]);\n            \"a0\" == s && (e.dpname = this.getDistributionPointName(a));\n          }\n\n          return e;\n        }, this.getDistributionPointName = function (t) {\n          for (var e = {}, r = n(t, 0), i = 0; i < r.length; i++) {\n            var s = t.substr(r[i], 2),\n                a = o(t, r[i]);\n            \"a0\" == s && (e.full = this.getGeneralNames(a));\n          }\n\n          return e;\n        }, this.getExtCRLDistributionPointsURI = function () {\n          var t = this.getExtInfo(\"cRLDistributionPoints\");\n          if (void 0 === t) return t;\n\n          for (var e = new Array(), r = n(this.hex, t.vidx), i = 0; i < r.length; i++) try {\n            var o = Lr(s(this.hex, r[i], [0, 0, 0], \"86\"));\n            e.push(o);\n          } catch (t) {}\n\n          return e;\n        }, this.getExtAIAInfo = function () {\n          var t = this.getExtInfo(\"authorityInfoAccess\");\n          if (void 0 === t) return t;\n\n          for (var e = {\n            ocsp: [],\n            caissuer: []\n          }, r = n(this.hex, t.vidx), i = 0; i < r.length; i++) {\n            var o = s(this.hex, r[i], [0], \"06\"),\n                a = s(this.hex, r[i], [1], \"86\");\n            \"2b06010505073001\" === o && e.ocsp.push(Lr(a)), \"2b06010505073002\" === o && e.caissuer.push(Lr(a));\n          }\n\n          return e;\n        }, this.getExtAuthorityInfoAccess = function (t, e) {\n          if (void 0 === t && void 0 === e) {\n            var r = this.getExtInfo(\"authorityInfoAccess\");\n            if (void 0 === r) return;\n            t = o(this.hex, r.vidx), e = r.critical;\n          }\n\n          var i = {\n            extname: \"authorityInfoAccess\",\n            array: []\n          };\n          e && (i.critical = !0);\n\n          for (var u = n(t, 0), c = 0; c < u.length; c++) {\n            var h = a(t, u[c], [0], \"06\"),\n                l = Lr(s(t, u[c], [1], \"86\"));\n            if (\"2b06010505073001\" == h) i.array.push({\n              ocsp: l\n            });else {\n              if (\"2b06010505073002\" != h) throw new Error(\"unknown method: \" + h);\n              i.array.push({\n                caissuer: l\n              });\n            }\n          }\n\n          return i;\n        }, this.getExtCertificatePolicies = function (t, e) {\n          if (void 0 === t && void 0 === e) {\n            var r = this.getExtInfo(\"certificatePolicies\");\n            if (void 0 === r) return;\n            t = o(this.hex, r.vidx), e = r.critical;\n          }\n\n          var i = {\n            extname: \"certificatePolicies\",\n            array: []\n          };\n          e && (i.critical = !0);\n\n          for (var s = n(t, 0), a = 0; a < s.length; a++) {\n            var u = o(t, s[a]),\n                c = this.getPolicyInformation(u);\n            i.array.push(c);\n          }\n\n          return i;\n        }, this.getPolicyInformation = function (t) {\n          var e = {},\n              r = s(t, 0, [0], \"06\");\n          e.policyoid = g(r);\n          var i = l(t, 0, [1], \"30\");\n\n          if (-1 != i) {\n            e.array = [];\n\n            for (var a = n(t, i), u = 0; u < a.length; u++) {\n              var c = o(t, a[u]),\n                  h = this.getPolicyQualifierInfo(c);\n              e.array.push(h);\n            }\n          }\n\n          return e;\n        }, this.getPolicyQualifierInfo = function (t) {\n          var e = {},\n              r = s(t, 0, [0], \"06\");\n\n          if (\"2b06010505070201\" === r) {\n            var n = a(t, 0, [1], \"16\");\n            e.cps = Nr(n);\n          } else if (\"2b06010505070202\" === r) {\n            var i = u(t, 0, [1], \"30\");\n            e.unotice = this.getUserNotice(i);\n          }\n\n          return e;\n        }, this.getUserNotice = function (t) {\n          for (var e = {}, r = n(t, 0), i = 0; i < r.length; i++) {\n            var s = o(t, r[i]);\n            \"30\" != s.substr(0, 2) && (e.exptext = this.getDisplayText(s));\n          }\n\n          return e;\n        }, this.getDisplayText = function (t) {\n          var e = {};\n          return e.type = {\n            \"0c\": \"utf8\",\n            16: \"ia5\",\n            \"1a\": \"vis\",\n            \"1e\": \"bmp\"\n          }[t.substr(0, 2)], e.str = Nr(i(t, 0)), e;\n        }, this.getExtCRLNumber = function (t, e) {\n          var r = {\n            extname: \"cRLNumber\"\n          };\n          if (e && (r.critical = !0), \"02\" == t.substr(0, 2)) return r.num = {\n            hex: i(t, 0)\n          }, r;\n          throw new Error(\"hExtV parse error: \" + t);\n        }, this.getExtCRLReason = function (t, e) {\n          var r = {\n            extname: \"cRLReason\"\n          };\n          if (e && (r.critical = !0), \"0a\" == t.substr(0, 2)) return r.code = parseInt(i(t, 0), 16), r;\n          throw new Error(\"hExtV parse error: \" + t);\n        }, this.getExtOcspNonce = function (t, e) {\n          var r = {\n            extname: \"ocspNonce\"\n          };\n          e && (r.critical = !0);\n          var n = i(t, 0);\n          return r.hex = n, r;\n        }, this.getExtOcspNoCheck = function (t, e) {\n          var r = {\n            extname: \"ocspNoCheck\"\n          };\n          return e && (r.critical = !0), r;\n        }, this.getExtAdobeTimeStamp = function (t, e) {\n          if (void 0 === t && void 0 === e) {\n            var r = this.getExtInfo(\"adobeTimeStamp\");\n            if (void 0 === r) return;\n            t = o(this.hex, r.vidx), e = r.critical;\n          }\n\n          var i = {\n            extname: \"adobeTimeStamp\"\n          };\n          e && (i.critical = !0);\n          var s = n(t, 0);\n\n          if (s.length > 1) {\n            var a = o(t, s[1]),\n                u = this.getGeneralName(a);\n            null != u.uri && (i.uri = u.uri);\n          }\n\n          if (s.length > 2) {\n            var c = o(t, s[2]);\n            \"0101ff\" == c && (i.reqauth = !0), \"010100\" == c && (i.reqauth = !1);\n          }\n\n          return i;\n        }, this.getX500NameRule = function (t) {\n          for (var e = null, r = [], n = 0; n < t.length; n++) for (var i = t[n], o = 0; o < i.length; o++) r.push(i[o]);\n\n          for (n = 0; n < r.length; n++) {\n            var s = r[n],\n                a = s.ds,\n                u = s.value,\n                c = s.type;\n            if (\":\" + a, \"prn\" != a && \"utf8\" != a && \"ia5\" != a) return \"mixed\";\n\n            if (\"ia5\" == a) {\n              if (\"CN\" != c) return \"mixed\";\n              if (br.lang.String.isMail(u)) continue;\n              return \"mixed\";\n            }\n\n            if (\"C\" == c) {\n              if (\"prn\" == a) continue;\n              return \"mixed\";\n            }\n\n            if (\":\" + a, null == e) e = a;else if (e !== a) return \"mixed\";\n          }\n\n          return null == e ? \"prn\" : e;\n        }, this.getX500Name = function (t) {\n          var e = this.getX500NameArray(t);\n          return {\n            array: e,\n            str: this.dnarraytostr(e)\n          };\n        }, this.getX500NameArray = function (t) {\n          for (var e = [], r = n(t, 0), i = 0; i < r.length; i++) e.push(this.getRDN(o(t, r[i])));\n\n          return e;\n        }, this.getRDN = function (t) {\n          for (var e = [], r = n(t, 0), i = 0; i < r.length; i++) e.push(this.getAttrTypeAndValue(o(t, r[i])));\n\n          return e;\n        }, this.getAttrTypeAndValue = function (t) {\n          var e = {\n            type: null,\n            value: null,\n            ds: null\n          },\n              r = n(t, 0),\n              i = s(t, r[0], [], \"06\"),\n              o = s(t, r[1], []),\n              a = br.asn1.ASN1Util.oidHexToInt(i);\n          return e.type = br.asn1.x509.OID.oid2atype(a), e.value = Nr(o), e.ds = this.HEX2STAG[t.substr(r[1], 2)], e;\n        }, this.readCertPEM = function (t) {\n          this.readCertHex(v(t));\n        }, this.readCertHex = function (t) {\n          this.hex = t, this.getVersion();\n\n          try {\n            h(this.hex, 0, [0, 7], \"a3\"), this.parseExt();\n          } catch (t) {}\n        }, this.getParam = function () {\n          var t = {};\n          return t.version = this.getVersion(), t.serial = {\n            hex: this.getSerialNumberHex()\n          }, t.sigalg = this.getSignatureAlgorithmField(), t.issuer = this.getIssuer(), t.notbefore = this.getNotBefore(), t.notafter = this.getNotAfter(), t.subject = this.getSubject(), t.sbjpubkey = Mr(this.getPublicKeyHex(), \"PUBLIC KEY\"), this.aExtInfo.length > 0 && (t.ext = this.getExtParamArray()), t.sighex = this.getSignatureValueHex(), t;\n        }, this.getExtParamArray = function (t) {\n          null == t && -1 != l(this.hex, 0, [0, \"[3]\"]) && (t = c(this.hex, 0, [0, \"[3]\", 0], \"30\"));\n\n          for (var e = [], r = n(t, 0), i = 0; i < r.length; i++) {\n            var s = o(t, r[i]),\n                a = this.getExtParam(s);\n            null != a && e.push(a);\n          }\n\n          return e;\n        }, this.getExtParam = function (t) {\n          var e = n(t, 0).length;\n          if (2 != e && 3 != e) throw new Error(\"wrong number elements in Extension: \" + e + \" \" + t);\n          var r = d(s(t, 0, [0], \"06\")),\n              i = !1;\n          3 == e && \"0101ff\" == u(t, 0, [1]) && (i = !0);\n          var o = u(t, 0, [e - 1, 0]),\n              a = void 0;\n          if (\"2.5.29.14\" == r ? a = this.getExtSubjectKeyIdentifier(o, i) : \"2.5.29.15\" == r ? a = this.getExtKeyUsage(o, i) : \"2.5.29.17\" == r ? a = this.getExtSubjectAltName(o, i) : \"2.5.29.18\" == r ? a = this.getExtIssuerAltName(o, i) : \"2.5.29.19\" == r ? a = this.getExtBasicConstraints(o, i) : \"2.5.29.31\" == r ? a = this.getExtCRLDistributionPoints(o, i) : \"2.5.29.32\" == r ? a = this.getExtCertificatePolicies(o, i) : \"2.5.29.35\" == r ? a = this.getExtAuthorityKeyIdentifier(o, i) : \"2.5.29.37\" == r ? a = this.getExtExtKeyUsage(o, i) : \"1.3.6.1.5.5.7.1.1\" == r ? a = this.getExtAuthorityInfoAccess(o, i) : \"2.5.29.20\" == r ? a = this.getExtCRLNumber(o, i) : \"2.5.29.21\" == r ? a = this.getExtCRLReason(o, i) : \"1.3.6.1.5.5.7.48.1.2\" == r ? a = this.getExtOcspNonce(o, i) : \"1.3.6.1.5.5.7.48.1.5\" == r ? a = this.getExtOcspNoCheck(o, i) : \"1.2.840.113583.1.1.9.1\" == r && (a = this.getExtAdobeTimeStamp(o, i)), null != a) return a;\n          var c = {\n            extname: r,\n            extn: o\n          };\n          return i && (c.critical = !0), c;\n        }, this.findExt = function (t, e) {\n          for (var r = 0; r < t.length; r++) if (t[r].extname == e) return t[r];\n\n          return null;\n        }, this.updateExtCDPFullURI = function (t, e) {\n          var r = this.findExt(t, \"cRLDistributionPoints\");\n          if (null != r && null != r.array) for (var n = r.array, i = 0; i < n.length; i++) if (null != n[i].dpname && null != n[i].dpname.full) for (var o = n[i].dpname.full, s = 0; s < o.length; s++) {\n            var a = o[i];\n            null != a.uri && (a.uri = e);\n          }\n        }, this.updateExtAIAOCSP = function (t, e) {\n          var r = this.findExt(t, \"authorityInfoAccess\");\n          if (null != r && null != r.array) for (var n = r.array, i = 0; i < n.length; i++) null != n[i].ocsp && (n[i].ocsp = e);\n        }, this.updateExtAIACAIssuer = function (t, e) {\n          var r = this.findExt(t, \"authorityInfoAccess\");\n          if (null != r && null != r.array) for (var n = r.array, i = 0; i < n.length; i++) null != n[i].caissuer && (n[i].caissuer = e);\n        }, this.dnarraytostr = function (t) {\n          return \"/\" + t.map(function (t) {\n            return function e(t) {\n              return t.map(function (t) {\n                return function e(t) {\n                  return t.type + \"=\" + t.value;\n                }(t);\n              }).join(\"+\");\n            }(t);\n          }).join(\"/\");\n        }, this.getInfo = function () {\n          var t,\n              e,\n              r,\n              n = function t(e) {\n            return JSON.stringify(e.array).replace(/[\\[\\]\\{\\}\\\"]/g, \"\");\n          },\n              i = function t(e) {\n            for (var r = \"\", n = e.array, i = 0; i < n.length; i++) {\n              var o = n[i];\n              if (r += \"    policy oid: \" + o.policyoid + \"\\n\", void 0 !== o.array) for (var s = 0; s < o.array.length; s++) {\n                var a = o.array[s];\n                void 0 !== a.cps && (r += \"    cps: \" + a.cps + \"\\n\");\n              }\n            }\n\n            return r;\n          },\n              o = function t(e) {\n            for (var r = \"\", n = e.array, i = 0; i < n.length; i++) {\n              var o = n[i];\n\n              try {\n                void 0 !== o.dpname.full[0].uri && (r += \"    \" + o.dpname.full[0].uri + \"\\n\");\n              } catch (t) {}\n\n              try {\n                void 0 !== o.dname.full[0].dn.hex && (r += \"    \" + on.hex2dn(o.dpname.full[0].dn.hex) + \"\\n\");\n              } catch (t) {}\n            }\n\n            return r;\n          },\n              s = function t(e) {\n            for (var r = \"\", n = e.array, i = 0; i < n.length; i++) {\n              var o = n[i];\n              void 0 !== o.caissuer && (r += \"    caissuer: \" + o.caissuer + \"\\n\"), void 0 !== o.ocsp && (r += \"    ocsp: \" + o.ocsp + \"\\n\");\n            }\n\n            return r;\n          };\n\n          if (t = \"Basic Fields\\n\", t += \"  serial number: \" + this.getSerialNumberHex() + \"\\n\", t += \"  signature algorithm: \" + this.getSignatureAlgorithmField() + \"\\n\", t += \"  issuer: \" + this.getIssuerString() + \"\\n\", t += \"  notBefore: \" + this.getNotBefore() + \"\\n\", t += \"  notAfter: \" + this.getNotAfter() + \"\\n\", t += \"  subject: \" + this.getSubjectString() + \"\\n\", t += \"  subject public key info: \\n\", t += \"    key algorithm: \" + (e = this.getPublicKey()).type + \"\\n\", \"RSA\" === e.type && (t += \"    n=\" + $r(e.n.toString(16)).substr(0, 16) + \"...\\n\", t += \"    e=\" + $r(e.e.toString(16)) + \"\\n\"), null != (r = this.aExtInfo)) {\n            t += \"X509v3 Extensions:\\n\";\n\n            for (var a = 0; a < r.length; a++) {\n              var u = r[a],\n                  c = br.asn1.x509.OID.oid2name(u.oid);\n              \"\" === c && (c = u.oid);\n              var h = \"\";\n\n              if (!0 === u.critical && (h = \"CRITICAL\"), t += \"  \" + c + \" \" + h + \":\\n\", \"basicConstraints\" === c) {\n                var l = this.getExtBasicConstraints();\n                void 0 === l.cA ? t += \"    {}\\n\" : (t += \"    cA=true\", void 0 !== l.pathLen && (t += \", pathLen=\" + l.pathLen), t += \"\\n\");\n              } else if (\"keyUsage\" === c) t += \"    \" + this.getExtKeyUsageString() + \"\\n\";else if (\"subjectKeyIdentifier\" === c) t += \"    \" + this.getExtSubjectKeyIdentifier().kid.hex + \"\\n\";else if (\"authorityKeyIdentifier\" === c) {\n                var f = this.getExtAuthorityKeyIdentifier();\n                void 0 !== f.kid && (t += \"    kid=\" + f.kid.hex + \"\\n\");\n              } else {\n                if (\"extKeyUsage\" === c) t += \"    \" + this.getExtExtKeyUsage().array.join(\", \") + \"\\n\";else if (\"subjectAltName\" === c) t += \"    \" + n(this.getExtSubjectAltName()) + \"\\n\";else if (\"cRLDistributionPoints\" === c) t += o(this.getExtCRLDistributionPoints());else if (\"authorityInfoAccess\" === c) t += s(this.getExtAuthorityInfoAccess());else \"certificatePolicies\" === c && (t += i(this.getExtCertificatePolicies()));\n              }\n            }\n          }\n\n          return t += \"signature algorithm: \" + this.getSignatureAlgorithmName() + \"\\n\", t += \"signature: \" + this.getSignatureValueHex().substr(0, 16) + \"...\\n\";\n        }, \"string\" == typeof t && (-1 != t.indexOf(\"-----BEGIN\") ? this.readCertPEM(t) : br.lang.String.isHex(t) && this.readCertHex(t));\n      }\n\n      He.prototype.sign = function (t, e) {\n        var r = function t(r) {\n          return br.crypto.Util.hashString(r, e);\n        }(t);\n\n        return this.signWithMessageHash(r, e);\n      }, He.prototype.signWithMessageHash = function (t, e) {\n        var r = je(br.crypto.Util.getPaddedDigestInfoHex(t, e, this.n.bitLength()), 16);\n        return en(this.doPrivate(r).toString(16), this.n.bitLength());\n      }, He.prototype.signPSS = function (t, e, r) {\n        var n = function t(r) {\n          return br.crypto.Util.hashHex(r, e);\n        }(Ur(t));\n\n        return void 0 === r && (r = -1), this.signWithMessageHashPSS(n, e, r);\n      }, He.prototype.signWithMessageHashPSS = function (t, e, r) {\n        var n,\n            i = Nr(t),\n            o = i.length,\n            s = this.n.bitLength() - 1,\n            a = Math.ceil(s / 8),\n            u = function t(r) {\n          return br.crypto.Util.hashHex(r, e);\n        };\n\n        if (-1 === r || void 0 === r) r = o;else if (-2 === r) r = a - o - 2;else if (r < -2) throw new Error(\"invalid salt length\");\n        if (a < o + r + 2) throw new Error(\"data too long\");\n        var c = \"\";\n        r > 0 && (c = new Array(r), new Oe().nextBytes(c), c = String.fromCharCode.apply(String, c));\n        var h = Nr(u(Ur(\"\\0\\0\\0\\0\\0\\0\\0\\0\" + i + c))),\n            l = [];\n\n        for (n = 0; n < a - r - o - 2; n += 1) l[n] = 0;\n\n        var f = String.fromCharCode.apply(String, l) + \"\u0001\" + c,\n            g = rn(h, f.length, u),\n            d = [];\n\n        for (n = 0; n < f.length; n += 1) d[n] = f.charCodeAt(n) ^ g.charCodeAt(n);\n\n        var p = 65280 >> 8 * a - s & 255;\n\n        for (d[0] &= ~p, n = 0; n < o; n++) d.push(h.charCodeAt(n));\n\n        return d.push(188), en(this.doPrivate(new F(d)).toString(16), this.n.bitLength());\n      }, He.prototype.verify = function (t, e) {\n        var r = je(e = (e = e.replace(tn, \"\")).replace(/[ \\n]+/g, \"\"), 16);\n        if (r.bitLength() > this.n.bitLength()) return 0;\n        var n = nn(this.doPublic(r).toString(16).replace(/^1f+00/, \"\"));\n        if (0 == n.length) return !1;\n        var i = n[0];\n        return n[1] == function t(e) {\n          return br.crypto.Util.hashString(e, i);\n        }(t);\n      }, He.prototype.verifyWithMessageHash = function (t, e) {\n        if (e.length != Math.ceil(this.n.bitLength() / 4)) return !1;\n        var r = je(e, 16);\n        if (r.bitLength() > this.n.bitLength()) return 0;\n        var n = nn(this.doPublic(r).toString(16).replace(/^1f+00/, \"\"));\n        if (0 == n.length) return !1;\n        n[0];\n        return n[1] == t;\n      }, He.prototype.verifyPSS = function (t, e, r, n) {\n        var i = function t(e) {\n          return br.crypto.Util.hashHex(e, r);\n        }(Ur(t));\n\n        return void 0 === n && (n = -1), this.verifyWithMessageHashPSS(i, e, r, n);\n      }, He.prototype.verifyWithMessageHashPSS = function (t, e, r, n) {\n        if (e.length != Math.ceil(this.n.bitLength() / 4)) return !1;\n\n        var i,\n            o = new F(e, 16),\n            s = function t(e) {\n          return br.crypto.Util.hashHex(e, r);\n        },\n            a = Nr(t),\n            u = a.length,\n            c = this.n.bitLength() - 1,\n            h = Math.ceil(c / 8);\n\n        if (-1 === n || void 0 === n) n = u;else if (-2 === n) n = h - u - 2;else if (n < -2) throw new Error(\"invalid salt length\");\n        if (h < u + n + 2) throw new Error(\"data too long\");\n        var l = this.doPublic(o).toByteArray();\n\n        for (i = 0; i < l.length; i += 1) l[i] &= 255;\n\n        for (; l.length < h;) l.unshift(0);\n\n        if (188 !== l[h - 1]) throw new Error(\"encoded message does not end in 0xbc\");\n        var f = (l = String.fromCharCode.apply(String, l)).substr(0, h - u - 1),\n            g = l.substr(f.length, u),\n            d = 65280 >> 8 * h - c & 255;\n        if (0 != (f.charCodeAt(0) & d)) throw new Error(\"bits beyond keysize not zero\");\n        var p = rn(g, f.length, s),\n            v = [];\n\n        for (i = 0; i < f.length; i += 1) v[i] = f.charCodeAt(i) ^ p.charCodeAt(i);\n\n        v[0] &= ~d;\n        var y = h - u - n - 2;\n\n        for (i = 0; i < y; i += 1) if (0 !== v[i]) throw new Error(\"leftmost octets not zero\");\n\n        if (1 !== v[y]) throw new Error(\"0x01 marker not found\");\n        return g === Nr(s(Ur(\"\\0\\0\\0\\0\\0\\0\\0\\0\" + a + String.fromCharCode.apply(String, v.slice(-n)))));\n      }, He.SALT_LEN_HLEN = -1, He.SALT_LEN_MAX = -2, He.SALT_LEN_RECOVER = -2, on.hex2dn = function (t, e) {\n        if (void 0 === e && (e = 0), \"30\" !== t.substr(e, 2)) throw new Error(\"malformed DN\");\n\n        for (var r = new Array(), n = Er.getChildIdx(t, e), i = 0; i < n.length; i++) r.push(on.hex2rdn(t, n[i]));\n\n        return \"/\" + (r = r.map(function (t) {\n          return t.replace(\"/\", \"\\\\/\");\n        })).join(\"/\");\n      }, on.hex2rdn = function (t, e) {\n        if (void 0 === e && (e = 0), \"31\" !== t.substr(e, 2)) throw new Error(\"malformed RDN\");\n\n        for (var r = new Array(), n = Er.getChildIdx(t, e), i = 0; i < n.length; i++) r.push(on.hex2attrTypeValue(t, n[i]));\n\n        return (r = r.map(function (t) {\n          return t.replace(\"+\", \"\\\\+\");\n        })).join(\"+\");\n      }, on.hex2attrTypeValue = function (t, e) {\n        var r = Er,\n            n = r.getV;\n        if (void 0 === e && (e = 0), \"30\" !== t.substr(e, 2)) throw new Error(\"malformed attribute type and value\");\n        var i = r.getChildIdx(t, e);\n        2 !== i.length || t.substr(i[0], 2);\n        var o = n(t, i[0]),\n            s = br.asn1.ASN1Util.oidHexToInt(o);\n        return br.asn1.x509.OID.oid2atype(s) + \"=\" + Nr(n(t, i[1]));\n      }, on.getPublicKeyFromCertHex = function (t) {\n        var e = new on();\n        return e.readCertHex(t), e.getPublicKey();\n      }, on.getPublicKeyFromCertPEM = function (t) {\n        var e = new on();\n        return e.readCertPEM(t), e.getPublicKey();\n      }, on.getPublicKeyInfoPropOfCertPEM = function (t) {\n        var e,\n            r,\n            n = Er.getVbyList,\n            i = {};\n        return i.algparam = null, (e = new on()).readCertPEM(t), r = e.getPublicKeyHex(), i.keyhex = n(r, 0, [1], \"03\").substr(2), i.algoid = n(r, 0, [0, 0], \"06\"), \"2a8648ce3d0201\" === i.algoid && (i.algparam = n(r, 0, [0, 1], \"06\")), i;\n      }, on.KEYUSAGE_NAME = [\"digitalSignature\", \"nonRepudiation\", \"keyEncipherment\", \"dataEncipherment\", \"keyAgreement\", \"keyCertSign\", \"cRLSign\", \"encipherOnly\", \"decipherOnly\"], void 0 !== br && br || (e.KJUR = br = {}), void 0 !== br.jws && br.jws || (br.jws = {}), br.jws.JWS = function () {\n        var t = br.jws.JWS.isSafeJSONString;\n\n        this.parseJWS = function (e, r) {\n          if (void 0 === this.parsedJWS || !r && void 0 === this.parsedJWS.sigvalH) {\n            var n = e.match(/^([^.]+)\\.([^.]+)\\.([^.]+)$/);\n            if (null == n) throw \"JWS signature is not a form of 'Head.Payload.SigValue'.\";\n            var i = n[1],\n                o = n[2],\n                s = n[3],\n                a = i + \".\" + o;\n\n            if (this.parsedJWS = {}, this.parsedJWS.headB64U = i, this.parsedJWS.payloadB64U = o, this.parsedJWS.sigvalB64U = s, this.parsedJWS.si = a, !r) {\n              var u = Ir(s),\n                  c = je(u, 16);\n              this.parsedJWS.sigvalH = u, this.parsedJWS.sigvalBI = c;\n            }\n\n            var h = Fr(i),\n                l = Fr(o);\n            if (this.parsedJWS.headS = h, this.parsedJWS.payloadS = l, !t(h, this.parsedJWS, \"headP\")) throw \"malformed JSON string for JWS Head: \" + h;\n          }\n        };\n      }, br.jws.JWS.sign = function (t, e, n, i, o) {\n        var s,\n            a,\n            u,\n            c = br,\n            h = c.jws.JWS,\n            l = h.readSafeJSONString,\n            f = h.isSafeJSONString,\n            g = c.crypto,\n            d = (g.ECDSA, g.Mac),\n            p = g.Signature,\n            v = JSON;\n        if (\"string\" != typeof e && \"object\" != (void 0 === e ? \"undefined\" : r(e))) throw \"spHeader must be JSON string or object: \" + e;\n\n        if (\"object\" == (void 0 === e ? \"undefined\" : r(e)) && (a = e, s = v.stringify(a)), \"string\" == typeof e) {\n          if (!f(s = e)) throw \"JWS Head is not safe JSON string: \" + s;\n          a = l(s);\n        }\n\n        if (u = n, \"object\" == (void 0 === n ? \"undefined\" : r(n)) && (u = v.stringify(n)), \"\" != t && null != t || void 0 === a.alg || (t = a.alg), \"\" != t && null != t && void 0 === a.alg && (a.alg = t, s = v.stringify(a)), t !== a.alg) throw \"alg and sHeader.alg doesn't match: \" + t + \"!=\" + a.alg;\n        var y = null;\n        if (void 0 === h.jwsalg2sigalg[t]) throw \"unsupported alg name: \" + t;\n        y = h.jwsalg2sigalg[t];\n        var m = wr(s) + \".\" + wr(u),\n            _ = \"\";\n\n        if (\"Hmac\" == y.substr(0, 4)) {\n          if (void 0 === i) throw \"mac key shall be specified for HS* alg\";\n          var S = new d({\n            alg: y,\n            prov: \"cryptojs\",\n            pass: i\n          });\n          S.updateString(m), _ = S.doFinal();\n        } else if (-1 != y.indexOf(\"withECDSA\")) {\n          (w = new p({\n            alg: y\n          })).init(i, o), w.updateString(m);\n          var b = w.sign();\n          _ = br.crypto.ECDSA.asn1SigToConcatSig(b);\n        } else {\n          var w;\n          if (\"none\" != y) (w = new p({\n            alg: y\n          })).init(i, o), w.updateString(m), _ = w.sign();\n        }\n\n        return m + \".\" + Rr(_);\n      }, br.jws.JWS.verify = function (t, e, n) {\n        var i,\n            o = br,\n            s = o.jws.JWS,\n            a = s.readSafeJSONString,\n            u = o.crypto,\n            c = u.ECDSA,\n            h = u.Mac,\n            l = u.Signature;\n        void 0 !== r(He) && (i = He);\n        var f = t.split(\".\");\n        if (3 !== f.length) return !1;\n        var g = f[0] + \".\" + f[1],\n            d = Ir(f[2]),\n            p = a(Fr(f[0])),\n            v = null,\n            y = null;\n        if (void 0 === p.alg) throw \"algorithm not specified in header\";\n        if ((y = (v = p.alg).substr(0, 2), null != n && \"[object Array]\" === Object.prototype.toString.call(n) && n.length > 0) && -1 == (\":\" + n.join(\":\") + \":\").indexOf(\":\" + v + \":\")) throw \"algorithm '\" + v + \"' not accepted in the list\";\n        if (\"none\" != v && null === e) throw \"key shall be specified to verify.\";\n        if (\"string\" == typeof e && -1 != e.indexOf(\"-----BEGIN \") && (e = Zr.getKey(e)), !(\"RS\" != y && \"PS\" != y || e instanceof i)) throw \"key shall be a RSAKey obj for RS* and PS* algs\";\n        if (\"ES\" == y && !(e instanceof c)) throw \"key shall be a ECDSA obj for ES* algs\";\n        var m = null;\n        if (void 0 === s.jwsalg2sigalg[p.alg]) throw \"unsupported alg name: \" + v;\n        if (\"none\" == (m = s.jwsalg2sigalg[v])) throw \"not supported\";\n\n        if (\"Hmac\" == m.substr(0, 4)) {\n          if (void 0 === e) throw \"hexadecimal key shall be specified for HMAC\";\n\n          var _ = new h({\n            alg: m,\n            pass: e\n          });\n\n          return _.updateString(g), d == _.doFinal();\n        }\n\n        if (-1 != m.indexOf(\"withECDSA\")) {\n          var S,\n              b = null;\n\n          try {\n            b = c.concatSigToASN1Sig(d);\n          } catch (t) {\n            return !1;\n          }\n\n          return (S = new l({\n            alg: m\n          })).init(e), S.updateString(g), S.verify(b);\n        }\n\n        return (S = new l({\n          alg: m\n        })).init(e), S.updateString(g), S.verify(d);\n      }, br.jws.JWS.parse = function (t) {\n        var e,\n            r,\n            n,\n            i = t.split(\".\"),\n            o = {};\n        if (2 != i.length && 3 != i.length) throw \"malformed sJWS: wrong number of '.' splitted elements\";\n        return e = i[0], r = i[1], 3 == i.length && (n = i[2]), o.headerObj = br.jws.JWS.readSafeJSONString(Fr(e)), o.payloadObj = br.jws.JWS.readSafeJSONString(Fr(r)), o.headerPP = JSON.stringify(o.headerObj, null, \"  \"), null == o.payloadObj ? o.payloadPP = Fr(r) : o.payloadPP = JSON.stringify(o.payloadObj, null, \"  \"), void 0 !== n && (o.sigHex = Ir(n)), o;\n      }, br.jws.JWS.verifyJWT = function (t, e, n) {\n        var i = br.jws,\n            o = i.JWS,\n            s = o.readSafeJSONString,\n            a = o.inArray,\n            u = o.includedArray,\n            c = t.split(\".\"),\n            h = c[0],\n            l = c[1],\n            f = (Ir(c[2]), s(Fr(h))),\n            g = s(Fr(l));\n        if (void 0 === f.alg) return !1;\n        if (void 0 === n.alg) throw \"acceptField.alg shall be specified\";\n        if (!a(f.alg, n.alg)) return !1;\n        if (void 0 !== g.iss && \"object\" === r(n.iss) && !a(g.iss, n.iss)) return !1;\n        if (void 0 !== g.sub && \"object\" === r(n.sub) && !a(g.sub, n.sub)) return !1;\n        if (void 0 !== g.aud && \"object\" === r(n.aud)) if (\"string\" == typeof g.aud) {\n          if (!a(g.aud, n.aud)) return !1;\n        } else if (\"object\" == r(g.aud) && !u(g.aud, n.aud)) return !1;\n        var d = i.IntDate.getNow();\n        return void 0 !== n.verifyAt && \"number\" == typeof n.verifyAt && (d = n.verifyAt), void 0 !== n.gracePeriod && \"number\" == typeof n.gracePeriod || (n.gracePeriod = 0), !(void 0 !== g.exp && \"number\" == typeof g.exp && g.exp + n.gracePeriod < d) && !(void 0 !== g.nbf && \"number\" == typeof g.nbf && d < g.nbf - n.gracePeriod) && !(void 0 !== g.iat && \"number\" == typeof g.iat && d < g.iat - n.gracePeriod) && (void 0 === g.jti || void 0 === n.jti || g.jti === n.jti) && !!o.verify(t, e, n.alg);\n      }, br.jws.JWS.includedArray = function (t, e) {\n        var n = br.jws.JWS.inArray;\n        if (null === t) return !1;\n        if (\"object\" !== (void 0 === t ? \"undefined\" : r(t))) return !1;\n        if (\"number\" != typeof t.length) return !1;\n\n        for (var i = 0; i < t.length; i++) if (!n(t[i], e)) return !1;\n\n        return !0;\n      }, br.jws.JWS.inArray = function (t, e) {\n        if (null === e) return !1;\n        if (\"object\" !== (void 0 === e ? \"undefined\" : r(e))) return !1;\n        if (\"number\" != typeof e.length) return !1;\n\n        for (var n = 0; n < e.length; n++) if (e[n] == t) return !0;\n\n        return !1;\n      }, br.jws.JWS.jwsalg2sigalg = {\n        HS256: \"HmacSHA256\",\n        HS384: \"HmacSHA384\",\n        HS512: \"HmacSHA512\",\n        RS256: \"SHA256withRSA\",\n        RS384: \"SHA384withRSA\",\n        RS512: \"SHA512withRSA\",\n        ES256: \"SHA256withECDSA\",\n        ES384: \"SHA384withECDSA\",\n        PS256: \"SHA256withRSAandMGF1\",\n        PS384: \"SHA384withRSAandMGF1\",\n        PS512: \"SHA512withRSAandMGF1\",\n        none: \"none\"\n      }, br.jws.JWS.isSafeJSONString = function (t, e, n) {\n        var i = null;\n\n        try {\n          return \"object\" != (void 0 === (i = Sr(t)) ? \"undefined\" : r(i)) || i.constructor === Array ? 0 : (e && (e[n] = i), 1);\n        } catch (t) {\n          return 0;\n        }\n      }, br.jws.JWS.readSafeJSONString = function (t) {\n        var e = null;\n\n        try {\n          return \"object\" != (void 0 === (e = Sr(t)) ? \"undefined\" : r(e)) || e.constructor === Array ? null : e;\n        } catch (t) {\n          return null;\n        }\n      }, br.jws.JWS.getEncodedSignatureValueFromJWS = function (t) {\n        var e = t.match(/^[^.]+\\.[^.]+\\.([^.]+)$/);\n        if (null == e) throw \"JWS signature is not a form of 'Head.Payload.SigValue'.\";\n        return e[1];\n      }, br.jws.JWS.getJWKthumbprint = function (t) {\n        if (\"RSA\" !== t.kty && \"EC\" !== t.kty && \"oct\" !== t.kty) throw \"unsupported algorithm for JWK Thumprint\";\n        var e = \"{\";\n\n        if (\"RSA\" === t.kty) {\n          if (\"string\" != typeof t.n || \"string\" != typeof t.e) throw \"wrong n and e value for RSA key\";\n          e += '\"e\":\"' + t.e + '\",', e += '\"kty\":\"' + t.kty + '\",', e += '\"n\":\"' + t.n + '\"}';\n        } else if (\"EC\" === t.kty) {\n          if (\"string\" != typeof t.crv || \"string\" != typeof t.x || \"string\" != typeof t.y) throw \"wrong crv, x and y value for EC key\";\n          e += '\"crv\":\"' + t.crv + '\",', e += '\"kty\":\"' + t.kty + '\",', e += '\"x\":\"' + t.x + '\",', e += '\"y\":\"' + t.y + '\"}';\n        } else if (\"oct\" === t.kty) {\n          if (\"string\" != typeof t.k) throw \"wrong k value for oct(symmetric) key\";\n          e += '\"kty\":\"' + t.kty + '\",', e += '\"k\":\"' + t.k + '\"}';\n        }\n\n        var r = Ur(e);\n        return Rr(br.crypto.Util.hashHex(r, \"sha256\"));\n      }, br.jws.IntDate = {}, br.jws.IntDate.get = function (t) {\n        var e = br.jws.IntDate,\n            r = e.getNow,\n            n = e.getZulu;\n        if (\"now\" == t) return r();\n        if (\"now + 1hour\" == t) return r() + 3600;\n        if (\"now + 1day\" == t) return r() + 86400;\n        if (\"now + 1month\" == t) return r() + 2592e3;\n        if (\"now + 1year\" == t) return r() + 31536e3;\n        if (t.match(/Z$/)) return n(t);\n        if (t.match(/^[0-9]+$/)) return parseInt(t);\n        throw \"unsupported format: \" + t;\n      }, br.jws.IntDate.getZulu = function (t) {\n        return Kr(t);\n      }, br.jws.IntDate.getNow = function () {\n        return ~~(new Date() / 1e3);\n      }, br.jws.IntDate.intDate2UTCString = function (t) {\n        return new Date(1e3 * t).toUTCString();\n      }, br.jws.IntDate.intDate2Zulu = function (t) {\n        var e = new Date(1e3 * t);\n        return (\"0000\" + e.getUTCFullYear()).slice(-4) + (\"00\" + (e.getUTCMonth() + 1)).slice(-2) + (\"00\" + e.getUTCDate()).slice(-2) + (\"00\" + e.getUTCHours()).slice(-2) + (\"00\" + e.getUTCMinutes()).slice(-2) + (\"00\" + e.getUTCSeconds()).slice(-2) + \"Z\";\n      }, e.SecureRandom = Oe, e.rng_seed_time = Ie, e.BigInteger = F, e.RSAKey = He;\n      var sn = br.crypto.EDSA;\n      e.EDSA = sn;\n      var an = br.crypto.DSA;\n      e.DSA = an;\n      var un = br.crypto.Signature;\n      e.Signature = un;\n      var cn = br.crypto.MessageDigest;\n      e.MessageDigest = cn;\n      var hn = br.crypto.Mac;\n      e.Mac = hn;\n      var ln = br.crypto.Cipher;\n      e.Cipher = ln, e.KEYUTIL = Zr, e.ASN1HEX = Er, e.X509 = on, e.CryptoJS = y, e.b64tohex = b, e.b64toBA = w, e.stoBA = xr, e.BAtos = Ar, e.BAtohex = kr, e.stohex = Pr, e.stob64 = function fn(t) {\n        return S(Pr(t));\n      }, e.stob64u = function gn(t) {\n        return Cr(S(Pr(t)));\n      }, e.b64utos = function dn(t) {\n        return Ar(w(Tr(t)));\n      }, e.b64tob64u = Cr, e.b64utob64 = Tr, e.hex2b64 = S, e.hextob64u = Rr, e.b64utohex = Ir, e.utf8tob64u = wr, e.b64utoutf8 = Fr, e.utf8tob64 = function pn(t) {\n        return S(qr(Gr(t)));\n      }, e.b64toutf8 = function vn(t) {\n        return decodeURIComponent(Jr(b(t)));\n      }, e.utf8tohex = Dr, e.hextoutf8 = Lr, e.hextorstr = Nr, e.rstrtohex = Ur, e.hextob64 = Br, e.hextob64nl = Or, e.b64nltohex = jr, e.hextopem = Mr, e.pemtohex = Hr, e.hextoArrayBuffer = function yn(t) {\n        if (t.length % 2 != 0) throw \"input is not even length\";\n        if (null == t.match(/^[0-9A-Fa-f]+$/)) throw \"input is not hexadecimal\";\n\n        for (var e = new ArrayBuffer(t.length / 2), r = new DataView(e), n = 0; n < t.length / 2; n++) r.setUint8(n, parseInt(t.substr(2 * n, 2), 16));\n\n        return e;\n      }, e.ArrayBuffertohex = function mn(t) {\n        for (var e = \"\", r = new DataView(t), n = 0; n < t.byteLength; n++) e += (\"00\" + r.getUint8(n).toString(16)).slice(-2);\n\n        return e;\n      }, e.zulutomsec = Vr, e.zulutosec = Kr, e.zulutodate = function _n(t) {\n        return new Date(Vr(t));\n      }, e.datetozulu = function Sn(t, e, r) {\n        var n,\n            i = t.getUTCFullYear();\n\n        if (e) {\n          if (i < 1950 || 2049 < i) throw \"not proper year for UTCTime: \" + i;\n          n = (\"\" + i).slice(-2);\n        } else n = (\"000\" + i).slice(-4);\n\n        if (n += (\"0\" + (t.getUTCMonth() + 1)).slice(-2), n += (\"0\" + t.getUTCDate()).slice(-2), n += (\"0\" + t.getUTCHours()).slice(-2), n += (\"0\" + t.getUTCMinutes()).slice(-2), n += (\"0\" + t.getUTCSeconds()).slice(-2), r) {\n          var o = t.getUTCMilliseconds();\n          0 !== o && (n += \".\" + (o = (o = (\"00\" + o).slice(-3)).replace(/0+$/g, \"\")));\n        }\n\n        return n += \"Z\";\n      }, e.uricmptohex = qr, e.hextouricmp = Jr, e.ipv6tohex = Wr, e.hextoipv6 = zr, e.hextoip = Yr, e.iptohex = function bn(t) {\n        var e = \"malformed IP address\";\n\n        if (!(t = t.toLowerCase(t)).match(/^[0-9.]+$/)) {\n          if (t.match(/^[0-9a-f:]+$/) && -1 !== t.indexOf(\":\")) return Wr(t);\n          throw e;\n        }\n\n        var r = t.split(\".\");\n        if (4 !== r.length) throw e;\n        var n = \"\";\n\n        try {\n          for (var i = 0; i < 4; i++) {\n            n += (\"0\" + parseInt(r[i]).toString(16)).slice(-2);\n          }\n\n          return n;\n        } catch (t) {\n          throw e;\n        }\n      }, e.encodeURIComponentAll = Gr, e.newline_toUnix = function wn(t) {\n        return t = t.replace(/\\r\\n/gm, \"\\n\");\n      }, e.newline_toDos = function Fn(t) {\n        return t = (t = t.replace(/\\r\\n/gm, \"\\n\")).replace(/\\n/gm, \"\\r\\n\");\n      }, e.hextoposhex = $r, e.intarystrtohex = function En(t) {\n        t = (t = (t = t.replace(/^\\s*\\[\\s*/, \"\")).replace(/\\s*\\]\\s*$/, \"\")).replace(/\\s*/g, \"\");\n\n        try {\n          return t.split(/,/).map(function (t, e, r) {\n            var n = parseInt(t);\n            if (n < 0 || 255 < n) throw \"integer not in range 0-255\";\n            return (\"00\" + n.toString(16)).slice(-2);\n          }).join(\"\");\n        } catch (t) {\n          throw \"malformed integer array string: \" + t;\n        }\n      }, e.strdiffidx = function t(e, r) {\n        var n = e.length;\n        e.length > r.length && (n = r.length);\n\n        for (var i = 0; i < n; i++) if (e.charCodeAt(i) != r.charCodeAt(i)) return i;\n\n        return e.length != r.length ? n : -1;\n      }, e.KJUR = br;\n      var xn = br.crypto;\n      e.crypto = xn;\n      var An = br.asn1;\n      e.asn1 = An;\n      var kn = br.jws;\n      e.jws = kn;\n      var Pn = br.lang;\n      e.lang = Pn;\n    }).call(this, r(28).Buffer);\n  }, function (t, e, r) {\n    \"use strict\";\n\n    (function (t) {\n      /*!\n       * The buffer module from node.js, for the browser.\n       *\n       * @author   Feross Aboukhadijeh <http://feross.org>\n       * @license  MIT\n       */\n      var n = r(30),\n          i = r(31),\n          o = r(32);\n\n      function s() {\n        return u.TYPED_ARRAY_SUPPORT ? 2147483647 : 1073741823;\n      }\n\n      function a(t, e) {\n        if (s() < e) throw new RangeError(\"Invalid typed array length\");\n        return u.TYPED_ARRAY_SUPPORT ? (t = new Uint8Array(e)).__proto__ = u.prototype : (null === t && (t = new u(e)), t.length = e), t;\n      }\n\n      function u(t, e, r) {\n        if (!(u.TYPED_ARRAY_SUPPORT || this instanceof u)) return new u(t, e, r);\n\n        if (\"number\" == typeof t) {\n          if (\"string\" == typeof e) throw new Error(\"If encoding is specified then the first argument must be a string\");\n          return l(this, t);\n        }\n\n        return c(this, t, e, r);\n      }\n\n      function c(t, e, r, n) {\n        if (\"number\" == typeof e) throw new TypeError('\"value\" argument must not be a number');\n        return \"undefined\" != typeof ArrayBuffer && e instanceof ArrayBuffer ? function i(t, e, r, n) {\n          if (e.byteLength, r < 0 || e.byteLength < r) throw new RangeError(\"'offset' is out of bounds\");\n          if (e.byteLength < r + (n || 0)) throw new RangeError(\"'length' is out of bounds\");\n          e = void 0 === r && void 0 === n ? new Uint8Array(e) : void 0 === n ? new Uint8Array(e, r) : new Uint8Array(e, r, n);\n          u.TYPED_ARRAY_SUPPORT ? (t = e).__proto__ = u.prototype : t = f(t, e);\n          return t;\n        }(t, e, r, n) : \"string\" == typeof e ? function s(t, e, r) {\n          \"string\" == typeof r && \"\" !== r || (r = \"utf8\");\n          if (!u.isEncoding(r)) throw new TypeError('\"encoding\" must be a valid string encoding');\n          var n = 0 | d(e, r),\n              i = (t = a(t, n)).write(e, r);\n          i !== n && (t = t.slice(0, i));\n          return t;\n        }(t, e, r) : function c(t, e) {\n          if (u.isBuffer(e)) {\n            var r = 0 | g(e.length);\n            return 0 === (t = a(t, r)).length || e.copy(t, 0, 0, r), t;\n          }\n\n          if (e) {\n            if (\"undefined\" != typeof ArrayBuffer && e.buffer instanceof ArrayBuffer || \"length\" in e) return \"number\" != typeof e.length || function n(t) {\n              return t != t;\n            }(e.length) ? a(t, 0) : f(t, e);\n            if (\"Buffer\" === e.type && o(e.data)) return f(t, e.data);\n          }\n\n          throw new TypeError(\"First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.\");\n        }(t, e);\n      }\n\n      function h(t) {\n        if (\"number\" != typeof t) throw new TypeError('\"size\" argument must be a number');\n        if (t < 0) throw new RangeError('\"size\" argument must not be negative');\n      }\n\n      function l(t, e) {\n        if (h(e), t = a(t, e < 0 ? 0 : 0 | g(e)), !u.TYPED_ARRAY_SUPPORT) for (var r = 0; r < e; ++r) t[r] = 0;\n        return t;\n      }\n\n      function f(t, e) {\n        var r = e.length < 0 ? 0 : 0 | g(e.length);\n        t = a(t, r);\n\n        for (var n = 0; n < r; n += 1) t[n] = 255 & e[n];\n\n        return t;\n      }\n\n      function g(t) {\n        if (t >= s()) throw new RangeError(\"Attempt to allocate Buffer larger than maximum size: 0x\" + s().toString(16) + \" bytes\");\n        return 0 | t;\n      }\n\n      function d(t, e) {\n        if (u.isBuffer(t)) return t.length;\n        if (\"undefined\" != typeof ArrayBuffer && \"function\" == typeof ArrayBuffer.isView && (ArrayBuffer.isView(t) || t instanceof ArrayBuffer)) return t.byteLength;\n        \"string\" != typeof t && (t = \"\" + t);\n        var r = t.length;\n        if (0 === r) return 0;\n\n        for (var n = !1;;) switch (e) {\n          case \"ascii\":\n          case \"latin1\":\n          case \"binary\":\n            return r;\n\n          case \"utf8\":\n          case \"utf-8\":\n          case void 0:\n            return K(t).length;\n\n          case \"ucs2\":\n          case \"ucs-2\":\n          case \"utf16le\":\n          case \"utf-16le\":\n            return 2 * r;\n\n          case \"hex\":\n            return r >>> 1;\n\n          case \"base64\":\n            return q(t).length;\n\n          default:\n            if (n) return K(t).length;\n            e = (\"\" + e).toLowerCase(), n = !0;\n        }\n      }\n\n      function p(t, e, r) {\n        var n = !1;\n        if ((void 0 === e || e < 0) && (e = 0), e > this.length) return \"\";\n        if ((void 0 === r || r > this.length) && (r = this.length), r <= 0) return \"\";\n        if ((r >>>= 0) <= (e >>>= 0)) return \"\";\n\n        for (t || (t = \"utf8\");;) switch (t) {\n          case \"hex\":\n            return I(this, e, r);\n\n          case \"utf8\":\n          case \"utf-8\":\n            return A(this, e, r);\n\n          case \"ascii\":\n            return T(this, e, r);\n\n          case \"latin1\":\n          case \"binary\":\n            return R(this, e, r);\n\n          case \"base64\":\n            return x(this, e, r);\n\n          case \"ucs2\":\n          case \"ucs-2\":\n          case \"utf16le\":\n          case \"utf-16le\":\n            return D(this, e, r);\n\n          default:\n            if (n) throw new TypeError(\"Unknown encoding: \" + t);\n            t = (t + \"\").toLowerCase(), n = !0;\n        }\n      }\n\n      function v(t, e, r) {\n        var n = t[e];\n        t[e] = t[r], t[r] = n;\n      }\n\n      function y(t, e, r, n, i) {\n        if (0 === t.length) return -1;\n\n        if (\"string\" == typeof r ? (n = r, r = 0) : r > 2147483647 ? r = 2147483647 : r < -2147483648 && (r = -2147483648), r = +r, isNaN(r) && (r = i ? 0 : t.length - 1), r < 0 && (r = t.length + r), r >= t.length) {\n          if (i) return -1;\n          r = t.length - 1;\n        } else if (r < 0) {\n          if (!i) return -1;\n          r = 0;\n        }\n\n        if (\"string\" == typeof e && (e = u.from(e, n)), u.isBuffer(e)) return 0 === e.length ? -1 : m(t, e, r, n, i);\n        if (\"number\" == typeof e) return e &= 255, u.TYPED_ARRAY_SUPPORT && \"function\" == typeof Uint8Array.prototype.indexOf ? i ? Uint8Array.prototype.indexOf.call(t, e, r) : Uint8Array.prototype.lastIndexOf.call(t, e, r) : m(t, [e], r, n, i);\n        throw new TypeError(\"val must be string, number or Buffer\");\n      }\n\n      function m(t, e, r, n, i) {\n        var o,\n            s = 1,\n            a = t.length,\n            u = e.length;\n\n        if (void 0 !== n && (\"ucs2\" === (n = String(n).toLowerCase()) || \"ucs-2\" === n || \"utf16le\" === n || \"utf-16le\" === n)) {\n          if (t.length < 2 || e.length < 2) return -1;\n          s = 2, a /= 2, u /= 2, r /= 2;\n        }\n\n        function c(t, e) {\n          return 1 === s ? t[e] : t.readUInt16BE(e * s);\n        }\n\n        if (i) {\n          var h = -1;\n\n          for (o = r; o < a; o++) if (c(t, o) === c(e, -1 === h ? 0 : o - h)) {\n            if (-1 === h && (h = o), o - h + 1 === u) return h * s;\n          } else -1 !== h && (o -= o - h), h = -1;\n        } else for (r + u > a && (r = a - u), o = r; o >= 0; o--) {\n          for (var l = !0, f = 0; f < u; f++) if (c(t, o + f) !== c(e, f)) {\n            l = !1;\n            break;\n          }\n\n          if (l) return o;\n        }\n\n        return -1;\n      }\n\n      function _(t, e, r, n) {\n        r = Number(r) || 0;\n        var i = t.length - r;\n        n ? (n = Number(n)) > i && (n = i) : n = i;\n        var o = e.length;\n        if (o % 2 != 0) throw new TypeError(\"Invalid hex string\");\n        n > o / 2 && (n = o / 2);\n\n        for (var s = 0; s < n; ++s) {\n          var a = parseInt(e.substr(2 * s, 2), 16);\n          if (isNaN(a)) return s;\n          t[r + s] = a;\n        }\n\n        return s;\n      }\n\n      function S(t, e, r, n) {\n        return J(K(e, t.length - r), t, r, n);\n      }\n\n      function b(t, e, r, n) {\n        return J(function i(t) {\n          for (var e = [], r = 0; r < t.length; ++r) e.push(255 & t.charCodeAt(r));\n\n          return e;\n        }(e), t, r, n);\n      }\n\n      function w(t, e, r, n) {\n        return b(t, e, r, n);\n      }\n\n      function F(t, e, r, n) {\n        return J(q(e), t, r, n);\n      }\n\n      function E(t, e, r, n) {\n        return J(function i(t, e) {\n          for (var r, n, i, o = [], s = 0; s < t.length && !((e -= 2) < 0); ++s) n = (r = t.charCodeAt(s)) >> 8, i = r % 256, o.push(i), o.push(n);\n\n          return o;\n        }(e, t.length - r), t, r, n);\n      }\n\n      function x(t, e, r) {\n        return 0 === e && r === t.length ? n.fromByteArray(t) : n.fromByteArray(t.slice(e, r));\n      }\n\n      function A(t, e, r) {\n        r = Math.min(t.length, r);\n\n        for (var n = [], i = e; i < r;) {\n          var o,\n              s,\n              a,\n              u,\n              c = t[i],\n              h = null,\n              l = c > 239 ? 4 : c > 223 ? 3 : c > 191 ? 2 : 1;\n          if (i + l <= r) switch (l) {\n            case 1:\n              c < 128 && (h = c);\n              break;\n\n            case 2:\n              128 == (192 & (o = t[i + 1])) && (u = (31 & c) << 6 | 63 & o) > 127 && (h = u);\n              break;\n\n            case 3:\n              o = t[i + 1], s = t[i + 2], 128 == (192 & o) && 128 == (192 & s) && (u = (15 & c) << 12 | (63 & o) << 6 | 63 & s) > 2047 && (u < 55296 || u > 57343) && (h = u);\n              break;\n\n            case 4:\n              o = t[i + 1], s = t[i + 2], a = t[i + 3], 128 == (192 & o) && 128 == (192 & s) && 128 == (192 & a) && (u = (15 & c) << 18 | (63 & o) << 12 | (63 & s) << 6 | 63 & a) > 65535 && u < 1114112 && (h = u);\n          }\n          null === h ? (h = 65533, l = 1) : h > 65535 && (h -= 65536, n.push(h >>> 10 & 1023 | 55296), h = 56320 | 1023 & h), n.push(h), i += l;\n        }\n\n        return function f(t) {\n          var e = t.length;\n          if (e <= C) return String.fromCharCode.apply(String, t);\n          var r = \"\",\n              n = 0;\n\n          for (; n < e;) r += String.fromCharCode.apply(String, t.slice(n, n += C));\n\n          return r;\n        }(n);\n      }\n\n      e.Buffer = u, e.SlowBuffer = function k(t) {\n        +t != t && (t = 0);\n        return u.alloc(+t);\n      }, e.INSPECT_MAX_BYTES = 50, u.TYPED_ARRAY_SUPPORT = void 0 !== t.TYPED_ARRAY_SUPPORT ? t.TYPED_ARRAY_SUPPORT : function P() {\n        try {\n          var t = new Uint8Array(1);\n          return t.__proto__ = {\n            __proto__: Uint8Array.prototype,\n            foo: function () {\n              return 42;\n            }\n          }, 42 === t.foo() && \"function\" == typeof t.subarray && 0 === t.subarray(1, 1).byteLength;\n        } catch (t) {\n          return !1;\n        }\n      }(), e.kMaxLength = s(), u.poolSize = 8192, u._augment = function (t) {\n        return t.__proto__ = u.prototype, t;\n      }, u.from = function (t, e, r) {\n        return c(null, t, e, r);\n      }, u.TYPED_ARRAY_SUPPORT && (u.prototype.__proto__ = Uint8Array.prototype, u.__proto__ = Uint8Array, \"undefined\" != typeof Symbol && Symbol.species && u[Symbol.species] === u && Object.defineProperty(u, Symbol.species, {\n        value: null,\n        configurable: !0\n      })), u.alloc = function (t, e, r) {\n        return function n(t, e, r, i) {\n          return h(e), e <= 0 ? a(t, e) : void 0 !== r ? \"string\" == typeof i ? a(t, e).fill(r, i) : a(t, e).fill(r) : a(t, e);\n        }(null, t, e, r);\n      }, u.allocUnsafe = function (t) {\n        return l(null, t);\n      }, u.allocUnsafeSlow = function (t) {\n        return l(null, t);\n      }, u.isBuffer = function t(e) {\n        return !(null == e || !e._isBuffer);\n      }, u.compare = function t(e, r) {\n        if (!u.isBuffer(e) || !u.isBuffer(r)) throw new TypeError(\"Arguments must be Buffers\");\n        if (e === r) return 0;\n\n        for (var n = e.length, i = r.length, o = 0, s = Math.min(n, i); o < s; ++o) if (e[o] !== r[o]) {\n          n = e[o], i = r[o];\n          break;\n        }\n\n        return n < i ? -1 : i < n ? 1 : 0;\n      }, u.isEncoding = function t(e) {\n        switch (String(e).toLowerCase()) {\n          case \"hex\":\n          case \"utf8\":\n          case \"utf-8\":\n          case \"ascii\":\n          case \"latin1\":\n          case \"binary\":\n          case \"base64\":\n          case \"ucs2\":\n          case \"ucs-2\":\n          case \"utf16le\":\n          case \"utf-16le\":\n            return !0;\n\n          default:\n            return !1;\n        }\n      }, u.concat = function t(e, r) {\n        if (!o(e)) throw new TypeError('\"list\" argument must be an Array of Buffers');\n        if (0 === e.length) return u.alloc(0);\n        var n;\n        if (void 0 === r) for (r = 0, n = 0; n < e.length; ++n) r += e[n].length;\n        var i = u.allocUnsafe(r),\n            s = 0;\n\n        for (n = 0; n < e.length; ++n) {\n          var a = e[n];\n          if (!u.isBuffer(a)) throw new TypeError('\"list\" argument must be an Array of Buffers');\n          a.copy(i, s), s += a.length;\n        }\n\n        return i;\n      }, u.byteLength = d, u.prototype._isBuffer = !0, u.prototype.swap16 = function t() {\n        var e = this.length;\n        if (e % 2 != 0) throw new RangeError(\"Buffer size must be a multiple of 16-bits\");\n\n        for (var r = 0; r < e; r += 2) v(this, r, r + 1);\n\n        return this;\n      }, u.prototype.swap32 = function t() {\n        var e = this.length;\n        if (e % 4 != 0) throw new RangeError(\"Buffer size must be a multiple of 32-bits\");\n\n        for (var r = 0; r < e; r += 4) v(this, r, r + 3), v(this, r + 1, r + 2);\n\n        return this;\n      }, u.prototype.swap64 = function t() {\n        var e = this.length;\n        if (e % 8 != 0) throw new RangeError(\"Buffer size must be a multiple of 64-bits\");\n\n        for (var r = 0; r < e; r += 8) v(this, r, r + 7), v(this, r + 1, r + 6), v(this, r + 2, r + 5), v(this, r + 3, r + 4);\n\n        return this;\n      }, u.prototype.toString = function t() {\n        var e = 0 | this.length;\n        return 0 === e ? \"\" : 0 === arguments.length ? A(this, 0, e) : p.apply(this, arguments);\n      }, u.prototype.equals = function t(e) {\n        if (!u.isBuffer(e)) throw new TypeError(\"Argument must be a Buffer\");\n        return this === e || 0 === u.compare(this, e);\n      }, u.prototype.inspect = function t() {\n        var r = \"\",\n            n = e.INSPECT_MAX_BYTES;\n        return this.length > 0 && (r = this.toString(\"hex\", 0, n).match(/.{2}/g).join(\" \"), this.length > n && (r += \" ... \")), \"<Buffer \" + r + \">\";\n      }, u.prototype.compare = function t(e, r, n, i, o) {\n        if (!u.isBuffer(e)) throw new TypeError(\"Argument must be a Buffer\");\n        if (void 0 === r && (r = 0), void 0 === n && (n = e ? e.length : 0), void 0 === i && (i = 0), void 0 === o && (o = this.length), r < 0 || n > e.length || i < 0 || o > this.length) throw new RangeError(\"out of range index\");\n        if (i >= o && r >= n) return 0;\n        if (i >= o) return -1;\n        if (r >= n) return 1;\n        if (this === e) return 0;\n\n        for (var s = (o >>>= 0) - (i >>>= 0), a = (n >>>= 0) - (r >>>= 0), c = Math.min(s, a), h = this.slice(i, o), l = e.slice(r, n), f = 0; f < c; ++f) if (h[f] !== l[f]) {\n          s = h[f], a = l[f];\n          break;\n        }\n\n        return s < a ? -1 : a < s ? 1 : 0;\n      }, u.prototype.includes = function t(e, r, n) {\n        return -1 !== this.indexOf(e, r, n);\n      }, u.prototype.indexOf = function t(e, r, n) {\n        return y(this, e, r, n, !0);\n      }, u.prototype.lastIndexOf = function t(e, r, n) {\n        return y(this, e, r, n, !1);\n      }, u.prototype.write = function t(e, r, n, i) {\n        if (void 0 === r) i = \"utf8\", n = this.length, r = 0;else if (void 0 === n && \"string\" == typeof r) i = r, n = this.length, r = 0;else {\n          if (!isFinite(r)) throw new Error(\"Buffer.write(string, encoding, offset[, length]) is no longer supported\");\n          r |= 0, isFinite(n) ? (n |= 0, void 0 === i && (i = \"utf8\")) : (i = n, n = void 0);\n        }\n        var o = this.length - r;\n        if ((void 0 === n || n > o) && (n = o), e.length > 0 && (n < 0 || r < 0) || r > this.length) throw new RangeError(\"Attempt to write outside buffer bounds\");\n        i || (i = \"utf8\");\n\n        for (var s = !1;;) switch (i) {\n          case \"hex\":\n            return _(this, e, r, n);\n\n          case \"utf8\":\n          case \"utf-8\":\n            return S(this, e, r, n);\n\n          case \"ascii\":\n            return b(this, e, r, n);\n\n          case \"latin1\":\n          case \"binary\":\n            return w(this, e, r, n);\n\n          case \"base64\":\n            return F(this, e, r, n);\n\n          case \"ucs2\":\n          case \"ucs-2\":\n          case \"utf16le\":\n          case \"utf-16le\":\n            return E(this, e, r, n);\n\n          default:\n            if (s) throw new TypeError(\"Unknown encoding: \" + i);\n            i = (\"\" + i).toLowerCase(), s = !0;\n        }\n      }, u.prototype.toJSON = function t() {\n        return {\n          type: \"Buffer\",\n          data: Array.prototype.slice.call(this._arr || this, 0)\n        };\n      };\n      var C = 4096;\n\n      function T(t, e, r) {\n        var n = \"\";\n        r = Math.min(t.length, r);\n\n        for (var i = e; i < r; ++i) n += String.fromCharCode(127 & t[i]);\n\n        return n;\n      }\n\n      function R(t, e, r) {\n        var n = \"\";\n        r = Math.min(t.length, r);\n\n        for (var i = e; i < r; ++i) n += String.fromCharCode(t[i]);\n\n        return n;\n      }\n\n      function I(t, e, r) {\n        var n = t.length;\n        (!e || e < 0) && (e = 0), (!r || r < 0 || r > n) && (r = n);\n\n        for (var i = \"\", o = e; o < r; ++o) i += V(t[o]);\n\n        return i;\n      }\n\n      function D(t, e, r) {\n        for (var n = t.slice(e, r), i = \"\", o = 0; o < n.length; o += 2) i += String.fromCharCode(n[o] + 256 * n[o + 1]);\n\n        return i;\n      }\n\n      function L(t, e, r) {\n        if (t % 1 != 0 || t < 0) throw new RangeError(\"offset is not uint\");\n        if (t + e > r) throw new RangeError(\"Trying to access beyond buffer length\");\n      }\n\n      function N(t, e, r, n, i, o) {\n        if (!u.isBuffer(t)) throw new TypeError('\"buffer\" argument must be a Buffer instance');\n        if (e > i || e < o) throw new RangeError('\"value\" argument is out of bounds');\n        if (r + n > t.length) throw new RangeError(\"Index out of range\");\n      }\n\n      function U(t, e, r, n) {\n        e < 0 && (e = 65535 + e + 1);\n\n        for (var i = 0, o = Math.min(t.length - r, 2); i < o; ++i) t[r + i] = (e & 255 << 8 * (n ? i : 1 - i)) >>> 8 * (n ? i : 1 - i);\n      }\n\n      function B(t, e, r, n) {\n        e < 0 && (e = 4294967295 + e + 1);\n\n        for (var i = 0, o = Math.min(t.length - r, 4); i < o; ++i) t[r + i] = e >>> 8 * (n ? i : 3 - i) & 255;\n      }\n\n      function O(t, e, r, n, i, o) {\n        if (r + n > t.length) throw new RangeError(\"Index out of range\");\n        if (r < 0) throw new RangeError(\"Index out of range\");\n      }\n\n      function j(t, e, r, n, o) {\n        return o || O(t, 0, r, 4), i.write(t, e, r, n, 23, 4), r + 4;\n      }\n\n      function M(t, e, r, n, o) {\n        return o || O(t, 0, r, 8), i.write(t, e, r, n, 52, 8), r + 8;\n      }\n\n      u.prototype.slice = function t(e, r) {\n        var n,\n            i = this.length;\n        if ((e = ~~e) < 0 ? (e += i) < 0 && (e = 0) : e > i && (e = i), (r = void 0 === r ? i : ~~r) < 0 ? (r += i) < 0 && (r = 0) : r > i && (r = i), r < e && (r = e), u.TYPED_ARRAY_SUPPORT) (n = this.subarray(e, r)).__proto__ = u.prototype;else {\n          var o = r - e;\n          n = new u(o, void 0);\n\n          for (var s = 0; s < o; ++s) n[s] = this[s + e];\n        }\n        return n;\n      }, u.prototype.readUIntLE = function t(e, r, n) {\n        e |= 0, r |= 0, n || L(e, r, this.length);\n\n        for (var i = this[e], o = 1, s = 0; ++s < r && (o *= 256);) i += this[e + s] * o;\n\n        return i;\n      }, u.prototype.readUIntBE = function t(e, r, n) {\n        e |= 0, r |= 0, n || L(e, r, this.length);\n\n        for (var i = this[e + --r], o = 1; r > 0 && (o *= 256);) i += this[e + --r] * o;\n\n        return i;\n      }, u.prototype.readUInt8 = function t(e, r) {\n        return r || L(e, 1, this.length), this[e];\n      }, u.prototype.readUInt16LE = function t(e, r) {\n        return r || L(e, 2, this.length), this[e] | this[e + 1] << 8;\n      }, u.prototype.readUInt16BE = function t(e, r) {\n        return r || L(e, 2, this.length), this[e] << 8 | this[e + 1];\n      }, u.prototype.readUInt32LE = function t(e, r) {\n        return r || L(e, 4, this.length), (this[e] | this[e + 1] << 8 | this[e + 2] << 16) + 16777216 * this[e + 3];\n      }, u.prototype.readUInt32BE = function t(e, r) {\n        return r || L(e, 4, this.length), 16777216 * this[e] + (this[e + 1] << 16 | this[e + 2] << 8 | this[e + 3]);\n      }, u.prototype.readIntLE = function t(e, r, n) {\n        e |= 0, r |= 0, n || L(e, r, this.length);\n\n        for (var i = this[e], o = 1, s = 0; ++s < r && (o *= 256);) i += this[e + s] * o;\n\n        return i >= (o *= 128) && (i -= Math.pow(2, 8 * r)), i;\n      }, u.prototype.readIntBE = function t(e, r, n) {\n        e |= 0, r |= 0, n || L(e, r, this.length);\n\n        for (var i = r, o = 1, s = this[e + --i]; i > 0 && (o *= 256);) s += this[e + --i] * o;\n\n        return s >= (o *= 128) && (s -= Math.pow(2, 8 * r)), s;\n      }, u.prototype.readInt8 = function t(e, r) {\n        return r || L(e, 1, this.length), 128 & this[e] ? -1 * (255 - this[e] + 1) : this[e];\n      }, u.prototype.readInt16LE = function t(e, r) {\n        r || L(e, 2, this.length);\n        var n = this[e] | this[e + 1] << 8;\n        return 32768 & n ? 4294901760 | n : n;\n      }, u.prototype.readInt16BE = function t(e, r) {\n        r || L(e, 2, this.length);\n        var n = this[e + 1] | this[e] << 8;\n        return 32768 & n ? 4294901760 | n : n;\n      }, u.prototype.readInt32LE = function t(e, r) {\n        return r || L(e, 4, this.length), this[e] | this[e + 1] << 8 | this[e + 2] << 16 | this[e + 3] << 24;\n      }, u.prototype.readInt32BE = function t(e, r) {\n        return r || L(e, 4, this.length), this[e] << 24 | this[e + 1] << 16 | this[e + 2] << 8 | this[e + 3];\n      }, u.prototype.readFloatLE = function t(e, r) {\n        return r || L(e, 4, this.length), i.read(this, e, !0, 23, 4);\n      }, u.prototype.readFloatBE = function t(e, r) {\n        return r || L(e, 4, this.length), i.read(this, e, !1, 23, 4);\n      }, u.prototype.readDoubleLE = function t(e, r) {\n        return r || L(e, 8, this.length), i.read(this, e, !0, 52, 8);\n      }, u.prototype.readDoubleBE = function t(e, r) {\n        return r || L(e, 8, this.length), i.read(this, e, !1, 52, 8);\n      }, u.prototype.writeUIntLE = function t(e, r, n, i) {\n        (e = +e, r |= 0, n |= 0, i) || N(this, e, r, n, Math.pow(2, 8 * n) - 1, 0);\n        var o = 1,\n            s = 0;\n\n        for (this[r] = 255 & e; ++s < n && (o *= 256);) this[r + s] = e / o & 255;\n\n        return r + n;\n      }, u.prototype.writeUIntBE = function t(e, r, n, i) {\n        (e = +e, r |= 0, n |= 0, i) || N(this, e, r, n, Math.pow(2, 8 * n) - 1, 0);\n        var o = n - 1,\n            s = 1;\n\n        for (this[r + o] = 255 & e; --o >= 0 && (s *= 256);) this[r + o] = e / s & 255;\n\n        return r + n;\n      }, u.prototype.writeUInt8 = function t(e, r, n) {\n        return e = +e, r |= 0, n || N(this, e, r, 1, 255, 0), u.TYPED_ARRAY_SUPPORT || (e = Math.floor(e)), this[r] = 255 & e, r + 1;\n      }, u.prototype.writeUInt16LE = function t(e, r, n) {\n        return e = +e, r |= 0, n || N(this, e, r, 2, 65535, 0), u.TYPED_ARRAY_SUPPORT ? (this[r] = 255 & e, this[r + 1] = e >>> 8) : U(this, e, r, !0), r + 2;\n      }, u.prototype.writeUInt16BE = function t(e, r, n) {\n        return e = +e, r |= 0, n || N(this, e, r, 2, 65535, 0), u.TYPED_ARRAY_SUPPORT ? (this[r] = e >>> 8, this[r + 1] = 255 & e) : U(this, e, r, !1), r + 2;\n      }, u.prototype.writeUInt32LE = function t(e, r, n) {\n        return e = +e, r |= 0, n || N(this, e, r, 4, 4294967295, 0), u.TYPED_ARRAY_SUPPORT ? (this[r + 3] = e >>> 24, this[r + 2] = e >>> 16, this[r + 1] = e >>> 8, this[r] = 255 & e) : B(this, e, r, !0), r + 4;\n      }, u.prototype.writeUInt32BE = function t(e, r, n) {\n        return e = +e, r |= 0, n || N(this, e, r, 4, 4294967295, 0), u.TYPED_ARRAY_SUPPORT ? (this[r] = e >>> 24, this[r + 1] = e >>> 16, this[r + 2] = e >>> 8, this[r + 3] = 255 & e) : B(this, e, r, !1), r + 4;\n      }, u.prototype.writeIntLE = function t(e, r, n, i) {\n        if (e = +e, r |= 0, !i) {\n          var o = Math.pow(2, 8 * n - 1);\n          N(this, e, r, n, o - 1, -o);\n        }\n\n        var s = 0,\n            a = 1,\n            u = 0;\n\n        for (this[r] = 255 & e; ++s < n && (a *= 256);) e < 0 && 0 === u && 0 !== this[r + s - 1] && (u = 1), this[r + s] = (e / a >> 0) - u & 255;\n\n        return r + n;\n      }, u.prototype.writeIntBE = function t(e, r, n, i) {\n        if (e = +e, r |= 0, !i) {\n          var o = Math.pow(2, 8 * n - 1);\n          N(this, e, r, n, o - 1, -o);\n        }\n\n        var s = n - 1,\n            a = 1,\n            u = 0;\n\n        for (this[r + s] = 255 & e; --s >= 0 && (a *= 256);) e < 0 && 0 === u && 0 !== this[r + s + 1] && (u = 1), this[r + s] = (e / a >> 0) - u & 255;\n\n        return r + n;\n      }, u.prototype.writeInt8 = function t(e, r, n) {\n        return e = +e, r |= 0, n || N(this, e, r, 1, 127, -128), u.TYPED_ARRAY_SUPPORT || (e = Math.floor(e)), e < 0 && (e = 255 + e + 1), this[r] = 255 & e, r + 1;\n      }, u.prototype.writeInt16LE = function t(e, r, n) {\n        return e = +e, r |= 0, n || N(this, e, r, 2, 32767, -32768), u.TYPED_ARRAY_SUPPORT ? (this[r] = 255 & e, this[r + 1] = e >>> 8) : U(this, e, r, !0), r + 2;\n      }, u.prototype.writeInt16BE = function t(e, r, n) {\n        return e = +e, r |= 0, n || N(this, e, r, 2, 32767, -32768), u.TYPED_ARRAY_SUPPORT ? (this[r] = e >>> 8, this[r + 1] = 255 & e) : U(this, e, r, !1), r + 2;\n      }, u.prototype.writeInt32LE = function t(e, r, n) {\n        return e = +e, r |= 0, n || N(this, e, r, 4, 2147483647, -2147483648), u.TYPED_ARRAY_SUPPORT ? (this[r] = 255 & e, this[r + 1] = e >>> 8, this[r + 2] = e >>> 16, this[r + 3] = e >>> 24) : B(this, e, r, !0), r + 4;\n      }, u.prototype.writeInt32BE = function t(e, r, n) {\n        return e = +e, r |= 0, n || N(this, e, r, 4, 2147483647, -2147483648), e < 0 && (e = 4294967295 + e + 1), u.TYPED_ARRAY_SUPPORT ? (this[r] = e >>> 24, this[r + 1] = e >>> 16, this[r + 2] = e >>> 8, this[r + 3] = 255 & e) : B(this, e, r, !1), r + 4;\n      }, u.prototype.writeFloatLE = function t(e, r, n) {\n        return j(this, e, r, !0, n);\n      }, u.prototype.writeFloatBE = function t(e, r, n) {\n        return j(this, e, r, !1, n);\n      }, u.prototype.writeDoubleLE = function t(e, r, n) {\n        return M(this, e, r, !0, n);\n      }, u.prototype.writeDoubleBE = function t(e, r, n) {\n        return M(this, e, r, !1, n);\n      }, u.prototype.copy = function t(e, r, n, i) {\n        if (n || (n = 0), i || 0 === i || (i = this.length), r >= e.length && (r = e.length), r || (r = 0), i > 0 && i < n && (i = n), i === n) return 0;\n        if (0 === e.length || 0 === this.length) return 0;\n        if (r < 0) throw new RangeError(\"targetStart out of bounds\");\n        if (n < 0 || n >= this.length) throw new RangeError(\"sourceStart out of bounds\");\n        if (i < 0) throw new RangeError(\"sourceEnd out of bounds\");\n        i > this.length && (i = this.length), e.length - r < i - n && (i = e.length - r + n);\n        var o,\n            s = i - n;\n        if (this === e && n < r && r < i) for (o = s - 1; o >= 0; --o) e[o + r] = this[o + n];else if (s < 1e3 || !u.TYPED_ARRAY_SUPPORT) for (o = 0; o < s; ++o) e[o + r] = this[o + n];else Uint8Array.prototype.set.call(e, this.subarray(n, n + s), r);\n        return s;\n      }, u.prototype.fill = function t(e, r, n, i) {\n        if (\"string\" == typeof e) {\n          if (\"string\" == typeof r ? (i = r, r = 0, n = this.length) : \"string\" == typeof n && (i = n, n = this.length), 1 === e.length) {\n            var o = e.charCodeAt(0);\n            o < 256 && (e = o);\n          }\n\n          if (void 0 !== i && \"string\" != typeof i) throw new TypeError(\"encoding must be a string\");\n          if (\"string\" == typeof i && !u.isEncoding(i)) throw new TypeError(\"Unknown encoding: \" + i);\n        } else \"number\" == typeof e && (e &= 255);\n\n        if (r < 0 || this.length < r || this.length < n) throw new RangeError(\"Out of range index\");\n        if (n <= r) return this;\n        var s;\n        if (r >>>= 0, n = void 0 === n ? this.length : n >>> 0, e || (e = 0), \"number\" == typeof e) for (s = r; s < n; ++s) this[s] = e;else {\n          var a = u.isBuffer(e) ? e : K(new u(e, i).toString()),\n              c = a.length;\n\n          for (s = 0; s < n - r; ++s) this[s + r] = a[s % c];\n        }\n        return this;\n      };\n      var H = /[^+\\/0-9A-Za-z-_]/g;\n\n      function V(t) {\n        return t < 16 ? \"0\" + t.toString(16) : t.toString(16);\n      }\n\n      function K(t, e) {\n        var r;\n        e = e || 1 / 0;\n\n        for (var n = t.length, i = null, o = [], s = 0; s < n; ++s) {\n          if ((r = t.charCodeAt(s)) > 55295 && r < 57344) {\n            if (!i) {\n              if (r > 56319) {\n                (e -= 3) > -1 && o.push(239, 191, 189);\n                continue;\n              }\n\n              if (s + 1 === n) {\n                (e -= 3) > -1 && o.push(239, 191, 189);\n                continue;\n              }\n\n              i = r;\n              continue;\n            }\n\n            if (r < 56320) {\n              (e -= 3) > -1 && o.push(239, 191, 189), i = r;\n              continue;\n            }\n\n            r = 65536 + (i - 55296 << 10 | r - 56320);\n          } else i && (e -= 3) > -1 && o.push(239, 191, 189);\n\n          if (i = null, r < 128) {\n            if ((e -= 1) < 0) break;\n            o.push(r);\n          } else if (r < 2048) {\n            if ((e -= 2) < 0) break;\n            o.push(r >> 6 | 192, 63 & r | 128);\n          } else if (r < 65536) {\n            if ((e -= 3) < 0) break;\n            o.push(r >> 12 | 224, r >> 6 & 63 | 128, 63 & r | 128);\n          } else {\n            if (!(r < 1114112)) throw new Error(\"Invalid code point\");\n            if ((e -= 4) < 0) break;\n            o.push(r >> 18 | 240, r >> 12 & 63 | 128, r >> 6 & 63 | 128, 63 & r | 128);\n          }\n        }\n\n        return o;\n      }\n\n      function q(t) {\n        return n.toByteArray(function e(t) {\n          if ((t = function e(t) {\n            return t.trim ? t.trim() : t.replace(/^\\s+|\\s+$/g, \"\");\n          }(t).replace(H, \"\")).length < 2) return \"\";\n\n          for (; t.length % 4 != 0;) t += \"=\";\n\n          return t;\n        }(t));\n      }\n\n      function J(t, e, r, n) {\n        for (var i = 0; i < n && !(i + r >= e.length || i >= t.length); ++i) e[i + r] = t[i];\n\n        return i;\n      }\n    }).call(this, r(29));\n  }, function (t, e) {\n    var r;\n\n    r = function () {\n      return this;\n    }();\n\n    try {\n      r = r || new Function(\"return this\")();\n    } catch (t) {\n      \"object\" == typeof window && (r = window);\n    }\n\n    t.exports = r;\n  }, function (t, e, r) {\n    \"use strict\";\n\n    e.byteLength = function n(t) {\n      var e = f(t),\n          r = e[0],\n          n = e[1];\n      return 3 * (r + n) / 4 - n;\n    }, e.toByteArray = function i(t) {\n      var e,\n          r,\n          n = f(t),\n          i = n[0],\n          o = n[1],\n          s = new u(function c(t, e, r) {\n        return 3 * (e + r) / 4 - r;\n      }(0, i, o)),\n          h = 0,\n          l = o > 0 ? i - 4 : i;\n\n      for (r = 0; r < l; r += 4) e = a[t.charCodeAt(r)] << 18 | a[t.charCodeAt(r + 1)] << 12 | a[t.charCodeAt(r + 2)] << 6 | a[t.charCodeAt(r + 3)], s[h++] = e >> 16 & 255, s[h++] = e >> 8 & 255, s[h++] = 255 & e;\n\n      2 === o && (e = a[t.charCodeAt(r)] << 2 | a[t.charCodeAt(r + 1)] >> 4, s[h++] = 255 & e);\n      1 === o && (e = a[t.charCodeAt(r)] << 10 | a[t.charCodeAt(r + 1)] << 4 | a[t.charCodeAt(r + 2)] >> 2, s[h++] = e >> 8 & 255, s[h++] = 255 & e);\n      return s;\n    }, e.fromByteArray = function o(t) {\n      for (var e, r = t.length, n = r % 3, i = [], o = 16383, a = 0, u = r - n; a < u; a += o) i.push(g(t, a, a + o > u ? u : a + o));\n\n      1 === n ? (e = t[r - 1], i.push(s[e >> 2] + s[e << 4 & 63] + \"==\")) : 2 === n && (e = (t[r - 2] << 8) + t[r - 1], i.push(s[e >> 10] + s[e >> 4 & 63] + s[e << 2 & 63] + \"=\"));\n      return i.join(\"\");\n    };\n\n    for (var s = [], a = [], u = \"undefined\" != typeof Uint8Array ? Uint8Array : Array, c = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\", h = 0, l = c.length; h < l; ++h) s[h] = c[h], a[c.charCodeAt(h)] = h;\n\n    function f(t) {\n      var e = t.length;\n      if (e % 4 > 0) throw new Error(\"Invalid string. Length must be a multiple of 4\");\n      var r = t.indexOf(\"=\");\n      return -1 === r && (r = e), [r, r === e ? 0 : 4 - r % 4];\n    }\n\n    function g(t, e, r) {\n      for (var n, i, o = [], a = e; a < r; a += 3) n = (t[a] << 16 & 16711680) + (t[a + 1] << 8 & 65280) + (255 & t[a + 2]), o.push(s[(i = n) >> 18 & 63] + s[i >> 12 & 63] + s[i >> 6 & 63] + s[63 & i]);\n\n      return o.join(\"\");\n    }\n\n    a[\"-\".charCodeAt(0)] = 62, a[\"_\".charCodeAt(0)] = 63;\n  }, function (t, e) {\n    /*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\n    e.read = function (t, e, r, n, i) {\n      var o,\n          s,\n          a = 8 * i - n - 1,\n          u = (1 << a) - 1,\n          c = u >> 1,\n          h = -7,\n          l = r ? i - 1 : 0,\n          f = r ? -1 : 1,\n          g = t[e + l];\n\n      for (l += f, o = g & (1 << -h) - 1, g >>= -h, h += a; h > 0; o = 256 * o + t[e + l], l += f, h -= 8);\n\n      for (s = o & (1 << -h) - 1, o >>= -h, h += n; h > 0; s = 256 * s + t[e + l], l += f, h -= 8);\n\n      if (0 === o) o = 1 - c;else {\n        if (o === u) return s ? NaN : 1 / 0 * (g ? -1 : 1);\n        s += Math.pow(2, n), o -= c;\n      }\n      return (g ? -1 : 1) * s * Math.pow(2, o - n);\n    }, e.write = function (t, e, r, n, i, o) {\n      var s,\n          a,\n          u,\n          c = 8 * o - i - 1,\n          h = (1 << c) - 1,\n          l = h >> 1,\n          f = 23 === i ? Math.pow(2, -24) - Math.pow(2, -77) : 0,\n          g = n ? 0 : o - 1,\n          d = n ? 1 : -1,\n          p = e < 0 || 0 === e && 1 / e < 0 ? 1 : 0;\n\n      for (e = Math.abs(e), isNaN(e) || e === 1 / 0 ? (a = isNaN(e) ? 1 : 0, s = h) : (s = Math.floor(Math.log(e) / Math.LN2), e * (u = Math.pow(2, -s)) < 1 && (s--, u *= 2), (e += s + l >= 1 ? f / u : f * Math.pow(2, 1 - l)) * u >= 2 && (s++, u /= 2), s + l >= h ? (a = 0, s = h) : s + l >= 1 ? (a = (e * u - 1) * Math.pow(2, i), s += l) : (a = e * Math.pow(2, l - 1) * Math.pow(2, i), s = 0)); i >= 8; t[r + g] = 255 & a, g += d, a /= 256, i -= 8);\n\n      for (s = s << i | a, c += i; c > 0; t[r + g] = 255 & s, g += d, s /= 256, c -= 8);\n\n      t[r + g - d] |= 128 * p;\n    };\n  }, function (t, e) {\n    var r = {}.toString;\n\n    t.exports = Array.isArray || function (t) {\n      return \"[object Array]\" == r.call(t);\n    };\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.default = function n(t) {\n      var e = t.jws,\n          r = t.KeyUtil,\n          n = t.X509,\n          o = t.crypto,\n          s = t.hextob64u,\n          a = t.b64tohex,\n          u = t.AllowedSigningAlgs;\n      return function () {\n        function t() {\n          !function e(t, r) {\n            if (!(t instanceof r)) throw new TypeError(\"Cannot call a class as a function\");\n          }(this, t);\n        }\n\n        return t.parseJwt = function t(r) {\n          i.Log.debug(\"JoseUtil.parseJwt\");\n\n          try {\n            var n = e.JWS.parse(r);\n            return {\n              header: n.headerObj,\n              payload: n.payloadObj\n            };\n          } catch (t) {\n            i.Log.error(t);\n          }\n        }, t.validateJwt = function e(o, s, u, c, h, l, f) {\n          i.Log.debug(\"JoseUtil.validateJwt\");\n\n          try {\n            if (\"RSA\" === s.kty) {\n              if (s.e && s.n) s = r.getKey(s);else {\n                if (!s.x5c || !s.x5c.length) return i.Log.error(\"JoseUtil.validateJwt: RSA key missing key material\", s), Promise.reject(new Error(\"RSA key missing key material\"));\n                var g = a(s.x5c[0]);\n                s = n.getPublicKeyFromCertHex(g);\n              }\n            } else {\n              if (\"EC\" !== s.kty) return i.Log.error(\"JoseUtil.validateJwt: Unsupported key type\", s && s.kty), Promise.reject(new Error(s.kty));\n              if (!(s.crv && s.x && s.y)) return i.Log.error(\"JoseUtil.validateJwt: EC key missing key material\", s), Promise.reject(new Error(\"EC key missing key material\"));\n              s = r.getKey(s);\n            }\n            return t._validateJwt(o, s, u, c, h, l, f);\n          } catch (t) {\n            return i.Log.error(t && t.message || t), Promise.reject(\"JWT validation failed\");\n          }\n        }, t.validateJwtAttributes = function e(r, n, o, s, a, u) {\n          s || (s = 0), a || (a = parseInt(Date.now() / 1e3));\n          var c = t.parseJwt(r).payload;\n          if (!c.iss) return i.Log.error(\"JoseUtil._validateJwt: issuer was not provided\"), Promise.reject(new Error(\"issuer was not provided\"));\n          if (c.iss !== n) return i.Log.error(\"JoseUtil._validateJwt: Invalid issuer in token\", c.iss), Promise.reject(new Error(\"Invalid issuer in token: \" + c.iss));\n          if (!c.aud) return i.Log.error(\"JoseUtil._validateJwt: aud was not provided\"), Promise.reject(new Error(\"aud was not provided\"));\n          if (!(c.aud === o || Array.isArray(c.aud) && c.aud.indexOf(o) >= 0)) return i.Log.error(\"JoseUtil._validateJwt: Invalid audience in token\", c.aud), Promise.reject(new Error(\"Invalid audience in token: \" + c.aud));\n          if (c.azp && c.azp !== o) return i.Log.error(\"JoseUtil._validateJwt: Invalid azp in token\", c.azp), Promise.reject(new Error(\"Invalid azp in token: \" + c.azp));\n\n          if (!u) {\n            var h = a + s,\n                l = a - s;\n            if (!c.iat) return i.Log.error(\"JoseUtil._validateJwt: iat was not provided\"), Promise.reject(new Error(\"iat was not provided\"));\n            if (h < c.iat) return i.Log.error(\"JoseUtil._validateJwt: iat is in the future\", c.iat), Promise.reject(new Error(\"iat is in the future: \" + c.iat));\n            if (c.nbf && h < c.nbf) return i.Log.error(\"JoseUtil._validateJwt: nbf is in the future\", c.nbf), Promise.reject(new Error(\"nbf is in the future: \" + c.nbf));\n            if (!c.exp) return i.Log.error(\"JoseUtil._validateJwt: exp was not provided\"), Promise.reject(new Error(\"exp was not provided\"));\n            if (c.exp < l) return i.Log.error(\"JoseUtil._validateJwt: exp is in the past\", c.exp), Promise.reject(new Error(\"exp is in the past:\" + c.exp));\n          }\n\n          return Promise.resolve(c);\n        }, t._validateJwt = function r(n, o, s, a, c, h, l) {\n          return t.validateJwtAttributes(n, s, a, c, h, l).then(function (t) {\n            try {\n              return e.JWS.verify(n, o, u) ? t : (i.Log.error(\"JoseUtil._validateJwt: signature validation failed\"), Promise.reject(new Error(\"signature validation failed\")));\n            } catch (t) {\n              return i.Log.error(t && t.message || t), Promise.reject(new Error(\"signature validation failed\"));\n            }\n          });\n        }, t.hashString = function t(e, r) {\n          try {\n            return o.Util.hashString(e, r);\n          } catch (t) {\n            i.Log.error(t);\n          }\n        }, t.hexToBase64Url = function t(e) {\n          try {\n            return s(e);\n          } catch (t) {\n            i.Log.error(t);\n          }\n        }, t;\n      }();\n    };\n    var i = r(0);\n    t.exports = e.default;\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.SigninResponse = void 0;\n\n    var n = function () {\n      function t(t, e) {\n        for (var r = 0; r < e.length; r++) {\n          var n = e[r];\n          n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(t, n.key, n);\n        }\n      }\n\n      return function (e, r, n) {\n        return r && t(e.prototype, r), n && t(e, n), e;\n      };\n    }(),\n        i = r(3);\n\n    function o(t, e) {\n      if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n    }\n\n    e.SigninResponse = function () {\n      function t(e) {\n        var r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : \"#\";\n        o(this, t);\n        var n = i.UrlUtility.parseUrlFragment(e, r);\n        this.error = n.error, this.error_description = n.error_description, this.error_uri = n.error_uri, this.code = n.code, this.state = n.state, this.id_token = n.id_token, this.session_state = n.session_state, this.access_token = n.access_token, this.token_type = n.token_type, this.scope = n.scope, this.profile = void 0, this.expires_in = n.expires_in;\n      }\n\n      return n(t, [{\n        key: \"expires_in\",\n        get: function t() {\n          if (this.expires_at) {\n            var e = parseInt(Date.now() / 1e3);\n            return this.expires_at - e;\n          }\n        },\n        set: function t(e) {\n          var r = parseInt(e);\n\n          if (\"number\" == typeof r && r > 0) {\n            var n = parseInt(Date.now() / 1e3);\n            this.expires_at = n + r;\n          }\n        }\n      }, {\n        key: \"expired\",\n        get: function t() {\n          var e = this.expires_in;\n          if (void 0 !== e) return e <= 0;\n        }\n      }, {\n        key: \"scopes\",\n        get: function t() {\n          return (this.scope || \"\").split(\" \");\n        }\n      }, {\n        key: \"isOpenIdConnect\",\n        get: function t() {\n          return this.scopes.indexOf(\"openid\") >= 0 || !!this.id_token;\n        }\n      }]), t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.SignoutRequest = void 0;\n    var n = r(0),\n        i = r(3),\n        o = r(9);\n\n    e.SignoutRequest = function t(e) {\n      var r = e.url,\n          s = e.id_token_hint,\n          a = e.post_logout_redirect_uri,\n          u = e.data,\n          c = e.extraQueryParams,\n          h = e.request_type;\n      if (function l(t, e) {\n        if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n      }(this, t), !r) throw n.Log.error(\"SignoutRequest.ctor: No url passed\"), new Error(\"url\");\n\n      for (var f in s && (r = i.UrlUtility.addQueryParam(r, \"id_token_hint\", s)), a && (r = i.UrlUtility.addQueryParam(r, \"post_logout_redirect_uri\", a), u && (this.state = new o.State({\n        data: u,\n        request_type: h\n      }), r = i.UrlUtility.addQueryParam(r, \"state\", this.state.id))), c) r = i.UrlUtility.addQueryParam(r, f, c[f]);\n\n      this.url = r;\n    };\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.SignoutResponse = void 0;\n    var n = r(3);\n\n    e.SignoutResponse = function t(e) {\n      !function r(t, e) {\n        if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n      }(this, t);\n      var i = n.UrlUtility.parseUrlFragment(e, \"?\");\n      this.error = i.error, this.error_description = i.error_description, this.error_uri = i.error_uri, this.state = i.state;\n    };\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.InMemoryWebStorage = void 0;\n\n    var n = function () {\n      function t(t, e) {\n        for (var r = 0; r < e.length; r++) {\n          var n = e[r];\n          n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(t, n.key, n);\n        }\n      }\n\n      return function (e, r, n) {\n        return r && t(e.prototype, r), n && t(e, n), e;\n      };\n    }(),\n        i = r(0);\n\n    e.InMemoryWebStorage = function () {\n      function t() {\n        !function e(t, r) {\n          if (!(t instanceof r)) throw new TypeError(\"Cannot call a class as a function\");\n        }(this, t), this._data = {};\n      }\n\n      return t.prototype.getItem = function t(e) {\n        return i.Log.debug(\"InMemoryWebStorage.getItem\", e), this._data[e];\n      }, t.prototype.setItem = function t(e, r) {\n        i.Log.debug(\"InMemoryWebStorage.setItem\", e), this._data[e] = r;\n      }, t.prototype.removeItem = function t(e) {\n        i.Log.debug(\"InMemoryWebStorage.removeItem\", e), delete this._data[e];\n      }, t.prototype.key = function t(e) {\n        return Object.getOwnPropertyNames(this._data)[e];\n      }, n(t, [{\n        key: \"length\",\n        get: function t() {\n          return Object.getOwnPropertyNames(this._data).length;\n        }\n      }]), t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.UserManager = void 0;\n\n    var n = function () {\n      function t(t, e) {\n        for (var r = 0; r < e.length; r++) {\n          var n = e[r];\n          n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(t, n.key, n);\n        }\n      }\n\n      return function (e, r, n) {\n        return r && t(e.prototype, r), n && t(e, n), e;\n      };\n    }(),\n        i = r(0),\n        o = r(10),\n        s = r(39),\n        a = r(15),\n        u = r(45),\n        c = r(47),\n        h = r(18),\n        l = r(8),\n        f = r(20),\n        g = r(11),\n        d = r(4);\n\n    function p(t, e) {\n      if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n    }\n\n    function v(t, e) {\n      if (!t) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      return !e || \"object\" != typeof e && \"function\" != typeof e ? t : e;\n    }\n\n    e.UserManager = function (t) {\n      function e() {\n        var r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n            n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : c.SilentRenewService,\n            o = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : h.SessionMonitor,\n            a = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : f.TokenRevocationClient,\n            l = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : g.TokenClient,\n            y = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : d.JoseUtil;\n        p(this, e), r instanceof s.UserManagerSettings || (r = new s.UserManagerSettings(r));\n        var m = v(this, t.call(this, r));\n        return m._events = new u.UserManagerEvents(r), m._silentRenewService = new n(m), m.settings.automaticSilentRenew && (i.Log.debug(\"UserManager.ctor: automaticSilentRenew is configured, setting up silent renew\"), m.startSilentRenew()), m.settings.monitorSession && (i.Log.debug(\"UserManager.ctor: monitorSession is configured, setting up session monitor\"), m._sessionMonitor = new o(m)), m._tokenRevocationClient = new a(m._settings), m._tokenClient = new l(m._settings), m._joseUtil = y, m;\n      }\n\n      return function r(t, e) {\n        if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof e);\n        t.prototype = Object.create(e && e.prototype, {\n          constructor: {\n            value: t,\n            enumerable: !1,\n            writable: !0,\n            configurable: !0\n          }\n        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);\n      }(e, t), e.prototype.getUser = function t() {\n        var e = this;\n        return this._loadUser().then(function (t) {\n          return t ? (i.Log.info(\"UserManager.getUser: user loaded\"), e._events.load(t, !1), t) : (i.Log.info(\"UserManager.getUser: user not found in storage\"), null);\n        });\n      }, e.prototype.removeUser = function t() {\n        var e = this;\n        return this.storeUser(null).then(function () {\n          i.Log.info(\"UserManager.removeUser: user removed from storage\"), e._events.unload();\n        });\n      }, e.prototype.signinRedirect = function t() {\n        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};\n        (e = Object.assign({}, e)).request_type = \"si:r\";\n        var r = {\n          useReplaceToNavigate: e.useReplaceToNavigate\n        };\n        return this._signinStart(e, this._redirectNavigator, r).then(function () {\n          i.Log.info(\"UserManager.signinRedirect: successful\");\n        });\n      }, e.prototype.signinRedirectCallback = function t(e) {\n        return this._signinEnd(e || this._redirectNavigator.url).then(function (t) {\n          return t.profile && t.profile.sub ? i.Log.info(\"UserManager.signinRedirectCallback: successful, signed in sub: \", t.profile.sub) : i.Log.info(\"UserManager.signinRedirectCallback: no sub\"), t;\n        });\n      }, e.prototype.signinPopup = function t() {\n        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};\n        (e = Object.assign({}, e)).request_type = \"si:p\";\n        var r = e.redirect_uri || this.settings.popup_redirect_uri || this.settings.redirect_uri;\n        return r ? (e.redirect_uri = r, e.display = \"popup\", this._signin(e, this._popupNavigator, {\n          startUrl: r,\n          popupWindowFeatures: e.popupWindowFeatures || this.settings.popupWindowFeatures,\n          popupWindowTarget: e.popupWindowTarget || this.settings.popupWindowTarget\n        }).then(function (t) {\n          return t && (t.profile && t.profile.sub ? i.Log.info(\"UserManager.signinPopup: signinPopup successful, signed in sub: \", t.profile.sub) : i.Log.info(\"UserManager.signinPopup: no sub\")), t;\n        })) : (i.Log.error(\"UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured\"), Promise.reject(new Error(\"No popup_redirect_uri or redirect_uri configured\")));\n      }, e.prototype.signinPopupCallback = function t(e) {\n        return this._signinCallback(e, this._popupNavigator).then(function (t) {\n          return t && (t.profile && t.profile.sub ? i.Log.info(\"UserManager.signinPopupCallback: successful, signed in sub: \", t.profile.sub) : i.Log.info(\"UserManager.signinPopupCallback: no sub\")), t;\n        }).catch(function (t) {\n          i.Log.error(t.message);\n        });\n      }, e.prototype.signinSilent = function t() {\n        var e = this,\n            r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};\n        return r = Object.assign({}, r), this._loadUser().then(function (t) {\n          return t && t.refresh_token ? (r.refresh_token = t.refresh_token, e._useRefreshToken(r)) : (r.request_type = \"si:s\", r.id_token_hint = r.id_token_hint || e.settings.includeIdTokenInSilentRenew && t && t.id_token, t && e._settings.validateSubOnSilentRenew && (i.Log.debug(\"UserManager.signinSilent, subject prior to silent renew: \", t.profile.sub), r.current_sub = t.profile.sub), e._signinSilentIframe(r));\n        });\n      }, e.prototype._useRefreshToken = function t() {\n        var e = this,\n            r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};\n        return this._tokenClient.exchangeRefreshToken(r).then(function (t) {\n          return t ? t.access_token ? e._loadUser().then(function (r) {\n            if (r) {\n              var n = Promise.resolve();\n              return t.id_token && (n = e._validateIdTokenFromTokenRefreshToken(r.profile, t.id_token)), n.then(function () {\n                return i.Log.debug(\"UserManager._useRefreshToken: refresh token response success\"), r.id_token = t.id_token || r.id_token, r.access_token = t.access_token, r.refresh_token = t.refresh_token || r.refresh_token, r.expires_in = t.expires_in, e.storeUser(r).then(function () {\n                  return e._events.load(r), r;\n                });\n              });\n            }\n\n            return null;\n          }) : (i.Log.error(\"UserManager._useRefreshToken: No access token returned from token endpoint\"), Promise.reject(\"No access token returned from token endpoint\")) : (i.Log.error(\"UserManager._useRefreshToken: No response returned from token endpoint\"), Promise.reject(\"No response returned from token endpoint\"));\n        });\n      }, e.prototype._validateIdTokenFromTokenRefreshToken = function t(e, r) {\n        var n = this;\n        return this._metadataService.getIssuer().then(function (t) {\n          return n.settings.getEpochTime().then(function (o) {\n            return n._joseUtil.validateJwtAttributes(r, t, n._settings.client_id, n._settings.clockSkew, o).then(function (t) {\n              return t ? t.sub !== e.sub ? (i.Log.error(\"UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub\"), Promise.reject(new Error(\"sub in id_token does not match current sub\"))) : t.auth_time && t.auth_time !== e.auth_time ? (i.Log.error(\"UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time\"), Promise.reject(new Error(\"auth_time in id_token does not match original auth_time\"))) : t.azp && t.azp !== e.azp ? (i.Log.error(\"UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp\"), Promise.reject(new Error(\"azp in id_token does not match original azp\"))) : !t.azp && e.azp ? (i.Log.error(\"UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token\"), Promise.reject(new Error(\"azp not in id_token, but present in original id_token\"))) : void 0 : (i.Log.error(\"UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token\"), Promise.reject(new Error(\"Failed to validate id_token\")));\n            });\n          });\n        });\n      }, e.prototype._signinSilentIframe = function t() {\n        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n            r = e.redirect_uri || this.settings.silent_redirect_uri || this.settings.redirect_uri;\n        return r ? (e.redirect_uri = r, e.prompt = e.prompt || \"none\", this._signin(e, this._iframeNavigator, {\n          startUrl: r,\n          silentRequestTimeout: e.silentRequestTimeout || this.settings.silentRequestTimeout\n        }).then(function (t) {\n          return t && (t.profile && t.profile.sub ? i.Log.info(\"UserManager.signinSilent: successful, signed in sub: \", t.profile.sub) : i.Log.info(\"UserManager.signinSilent: no sub\")), t;\n        })) : (i.Log.error(\"UserManager.signinSilent: No silent_redirect_uri configured\"), Promise.reject(new Error(\"No silent_redirect_uri configured\")));\n      }, e.prototype.signinSilentCallback = function t(e) {\n        return this._signinCallback(e, this._iframeNavigator).then(function (t) {\n          return t && (t.profile && t.profile.sub ? i.Log.info(\"UserManager.signinSilentCallback: successful, signed in sub: \", t.profile.sub) : i.Log.info(\"UserManager.signinSilentCallback: no sub\")), t;\n        });\n      }, e.prototype.signinCallback = function t(e) {\n        var r = this;\n        return this.readSigninResponseState(e).then(function (t) {\n          var n = t.state;\n          t.response;\n          return \"si:r\" === n.request_type ? r.signinRedirectCallback(e) : \"si:p\" === n.request_type ? r.signinPopupCallback(e) : \"si:s\" === n.request_type ? r.signinSilentCallback(e) : Promise.reject(new Error(\"invalid response_type in state\"));\n        });\n      }, e.prototype.signoutCallback = function t(e, r) {\n        var n = this;\n        return this.readSignoutResponseState(e).then(function (t) {\n          var i = t.state,\n              o = t.response;\n          return i ? \"so:r\" === i.request_type ? n.signoutRedirectCallback(e) : \"so:p\" === i.request_type ? n.signoutPopupCallback(e, r) : Promise.reject(new Error(\"invalid response_type in state\")) : o;\n        });\n      }, e.prototype.querySessionStatus = function t() {\n        var e = this,\n            r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};\n        (r = Object.assign({}, r)).request_type = \"si:s\";\n        var n = r.redirect_uri || this.settings.silent_redirect_uri || this.settings.redirect_uri;\n        return n ? (r.redirect_uri = n, r.prompt = \"none\", r.response_type = r.response_type || this.settings.query_status_response_type, r.scope = r.scope || \"openid\", r.skipUserInfo = !0, this._signinStart(r, this._iframeNavigator, {\n          startUrl: n,\n          silentRequestTimeout: r.silentRequestTimeout || this.settings.silentRequestTimeout\n        }).then(function (t) {\n          return e.processSigninResponse(t.url).then(function (t) {\n            if (i.Log.debug(\"UserManager.querySessionStatus: got signin response\"), t.session_state && t.profile.sub) return i.Log.info(\"UserManager.querySessionStatus: querySessionStatus success for sub: \", t.profile.sub), {\n              session_state: t.session_state,\n              sub: t.profile.sub,\n              sid: t.profile.sid\n            };\n            i.Log.info(\"querySessionStatus successful, user not authenticated\");\n          }).catch(function (t) {\n            if (t.session_state && e.settings.monitorAnonymousSession && (\"login_required\" == t.message || \"consent_required\" == t.message || \"interaction_required\" == t.message || \"account_selection_required\" == t.message)) return i.Log.info(\"UserManager.querySessionStatus: querySessionStatus success for anonymous user\"), {\n              session_state: t.session_state\n            };\n            throw t;\n          });\n        })) : (i.Log.error(\"UserManager.querySessionStatus: No silent_redirect_uri configured\"), Promise.reject(new Error(\"No silent_redirect_uri configured\")));\n      }, e.prototype._signin = function t(e, r) {\n        var n = this,\n            i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};\n        return this._signinStart(e, r, i).then(function (t) {\n          return n._signinEnd(t.url, e);\n        });\n      }, e.prototype._signinStart = function t(e, r) {\n        var n = this,\n            o = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};\n        return r.prepare(o).then(function (t) {\n          return i.Log.debug(\"UserManager._signinStart: got navigator window handle\"), n.createSigninRequest(e).then(function (e) {\n            return i.Log.debug(\"UserManager._signinStart: got signin request\"), o.url = e.url, o.id = e.state.id, t.navigate(o);\n          }).catch(function (e) {\n            throw t.close && (i.Log.debug(\"UserManager._signinStart: Error after preparing navigator, closing navigator window\"), t.close()), e;\n          });\n        });\n      }, e.prototype._signinEnd = function t(e) {\n        var r = this,\n            n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};\n        return this.processSigninResponse(e).then(function (t) {\n          i.Log.debug(\"UserManager._signinEnd: got signin response\");\n          var e = new a.User(t);\n\n          if (n.current_sub) {\n            if (n.current_sub !== e.profile.sub) return i.Log.debug(\"UserManager._signinEnd: current user does not match user returned from signin. sub from signin: \", e.profile.sub), Promise.reject(new Error(\"login_required\"));\n            i.Log.debug(\"UserManager._signinEnd: current user matches user returned from signin\");\n          }\n\n          return r.storeUser(e).then(function () {\n            return i.Log.debug(\"UserManager._signinEnd: user stored\"), r._events.load(e), e;\n          });\n        });\n      }, e.prototype._signinCallback = function t(e, r) {\n        i.Log.debug(\"UserManager._signinCallback\");\n        var n = \"query\" === this._settings.response_mode || !this._settings.response_mode && l.SigninRequest.isCode(this._settings.response_type) ? \"?\" : \"#\";\n        return r.callback(e, void 0, n);\n      }, e.prototype.signoutRedirect = function t() {\n        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};\n        (e = Object.assign({}, e)).request_type = \"so:r\";\n        var r = e.post_logout_redirect_uri || this.settings.post_logout_redirect_uri;\n        r && (e.post_logout_redirect_uri = r);\n        var n = {\n          useReplaceToNavigate: e.useReplaceToNavigate\n        };\n        return this._signoutStart(e, this._redirectNavigator, n).then(function () {\n          i.Log.info(\"UserManager.signoutRedirect: successful\");\n        });\n      }, e.prototype.signoutRedirectCallback = function t(e) {\n        return this._signoutEnd(e || this._redirectNavigator.url).then(function (t) {\n          return i.Log.info(\"UserManager.signoutRedirectCallback: successful\"), t;\n        });\n      }, e.prototype.signoutPopup = function t() {\n        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};\n        (e = Object.assign({}, e)).request_type = \"so:p\";\n        var r = e.post_logout_redirect_uri || this.settings.popup_post_logout_redirect_uri || this.settings.post_logout_redirect_uri;\n        return e.post_logout_redirect_uri = r, e.display = \"popup\", e.post_logout_redirect_uri && (e.state = e.state || {}), this._signout(e, this._popupNavigator, {\n          startUrl: r,\n          popupWindowFeatures: e.popupWindowFeatures || this.settings.popupWindowFeatures,\n          popupWindowTarget: e.popupWindowTarget || this.settings.popupWindowTarget\n        }).then(function () {\n          i.Log.info(\"UserManager.signoutPopup: successful\");\n        });\n      }, e.prototype.signoutPopupCallback = function t(e, r) {\n        void 0 === r && \"boolean\" == typeof e && (r = e, e = null);\n        return this._popupNavigator.callback(e, r, \"?\").then(function () {\n          i.Log.info(\"UserManager.signoutPopupCallback: successful\");\n        });\n      }, e.prototype._signout = function t(e, r) {\n        var n = this,\n            i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};\n        return this._signoutStart(e, r, i).then(function (t) {\n          return n._signoutEnd(t.url);\n        });\n      }, e.prototype._signoutStart = function t() {\n        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n            r = this,\n            n = arguments[1],\n            o = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};\n        return n.prepare(o).then(function (t) {\n          return i.Log.debug(\"UserManager._signoutStart: got navigator window handle\"), r._loadUser().then(function (n) {\n            return i.Log.debug(\"UserManager._signoutStart: loaded current user from storage\"), (r._settings.revokeAccessTokenOnSignout ? r._revokeInternal(n) : Promise.resolve()).then(function () {\n              var s = e.id_token_hint || n && n.id_token;\n              return s && (i.Log.debug(\"UserManager._signoutStart: Setting id_token into signout request\"), e.id_token_hint = s), r.removeUser().then(function () {\n                return i.Log.debug(\"UserManager._signoutStart: user removed, creating signout request\"), r.createSignoutRequest(e).then(function (e) {\n                  return i.Log.debug(\"UserManager._signoutStart: got signout request\"), o.url = e.url, e.state && (o.id = e.state.id), t.navigate(o);\n                });\n              });\n            });\n          }).catch(function (e) {\n            throw t.close && (i.Log.debug(\"UserManager._signoutStart: Error after preparing navigator, closing navigator window\"), t.close()), e;\n          });\n        });\n      }, e.prototype._signoutEnd = function t(e) {\n        return this.processSignoutResponse(e).then(function (t) {\n          return i.Log.debug(\"UserManager._signoutEnd: got signout response\"), t;\n        });\n      }, e.prototype.revokeAccessToken = function t() {\n        var e = this;\n        return this._loadUser().then(function (t) {\n          return e._revokeInternal(t, !0).then(function (r) {\n            if (r) return i.Log.debug(\"UserManager.revokeAccessToken: removing token properties from user and re-storing\"), t.access_token = null, t.refresh_token = null, t.expires_at = null, t.token_type = null, e.storeUser(t).then(function () {\n              i.Log.debug(\"UserManager.revokeAccessToken: user stored\"), e._events.load(t);\n            });\n          });\n        }).then(function () {\n          i.Log.info(\"UserManager.revokeAccessToken: access token revoked successfully\");\n        });\n      }, e.prototype._revokeInternal = function t(e, r) {\n        var n = this;\n\n        if (e) {\n          var o = e.access_token,\n              s = e.refresh_token;\n          return this._revokeAccessTokenInternal(o, r).then(function (t) {\n            return n._revokeRefreshTokenInternal(s, r).then(function (e) {\n              return t || e || i.Log.debug(\"UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format\"), t || e;\n            });\n          });\n        }\n\n        return Promise.resolve(!1);\n      }, e.prototype._revokeAccessTokenInternal = function t(e, r) {\n        return !e || e.indexOf(\".\") >= 0 ? Promise.resolve(!1) : this._tokenRevocationClient.revoke(e, r).then(function () {\n          return !0;\n        });\n      }, e.prototype._revokeRefreshTokenInternal = function t(e, r) {\n        return e ? this._tokenRevocationClient.revoke(e, r, \"refresh_token\").then(function () {\n          return !0;\n        }) : Promise.resolve(!1);\n      }, e.prototype.startSilentRenew = function t() {\n        this._silentRenewService.start();\n      }, e.prototype.stopSilentRenew = function t() {\n        this._silentRenewService.stop();\n      }, e.prototype._loadUser = function t() {\n        return this._userStore.get(this._userStoreKey).then(function (t) {\n          return t ? (i.Log.debug(\"UserManager._loadUser: user storageString loaded\"), a.User.fromStorageString(t)) : (i.Log.debug(\"UserManager._loadUser: no user storageString\"), null);\n        });\n      }, e.prototype.storeUser = function t(e) {\n        if (e) {\n          i.Log.debug(\"UserManager.storeUser: storing user\");\n          var r = e.toStorageString();\n          return this._userStore.set(this._userStoreKey, r);\n        }\n\n        return i.Log.debug(\"storeUser.storeUser: removing user\"), this._userStore.remove(this._userStoreKey);\n      }, n(e, [{\n        key: \"_redirectNavigator\",\n        get: function t() {\n          return this.settings.redirectNavigator;\n        }\n      }, {\n        key: \"_popupNavigator\",\n        get: function t() {\n          return this.settings.popupNavigator;\n        }\n      }, {\n        key: \"_iframeNavigator\",\n        get: function t() {\n          return this.settings.iframeNavigator;\n        }\n      }, {\n        key: \"_userStore\",\n        get: function t() {\n          return this.settings.userStore;\n        }\n      }, {\n        key: \"events\",\n        get: function t() {\n          return this._events;\n        }\n      }, {\n        key: \"_userStoreKey\",\n        get: function t() {\n          return \"user:\" + this.settings.authority + \":\" + this.settings.client_id;\n        }\n      }]), e;\n    }(o.OidcClient);\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.UserManagerSettings = void 0;\n\n    var n = function () {\n      function t(t, e) {\n        for (var r = 0; r < e.length; r++) {\n          var n = e[r];\n          n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(t, n.key, n);\n        }\n      }\n\n      return function (e, r, n) {\n        return r && t(e.prototype, r), n && t(e, n), e;\n      };\n    }(),\n        i = (r(0), r(5)),\n        o = r(40),\n        s = r(41),\n        a = r(43),\n        u = r(6),\n        c = r(1),\n        h = r(8);\n\n    function l(t, e) {\n      if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n    }\n\n    function f(t, e) {\n      if (!t) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      return !e || \"object\" != typeof e && \"function\" != typeof e ? t : e;\n    }\n\n    e.UserManagerSettings = function (t) {\n      function e() {\n        var r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n            n = r.popup_redirect_uri,\n            i = r.popup_post_logout_redirect_uri,\n            g = r.popupWindowFeatures,\n            d = r.popupWindowTarget,\n            p = r.silent_redirect_uri,\n            v = r.silentRequestTimeout,\n            y = r.automaticSilentRenew,\n            m = void 0 !== y && y,\n            _ = r.validateSubOnSilentRenew,\n            S = void 0 !== _ && _,\n            b = r.includeIdTokenInSilentRenew,\n            w = void 0 === b || b,\n            F = r.monitorSession,\n            E = void 0 === F || F,\n            x = r.monitorAnonymousSession,\n            A = void 0 !== x && x,\n            k = r.checkSessionInterval,\n            P = void 0 === k ? 2e3 : k,\n            C = r.stopCheckSessionOnError,\n            T = void 0 === C || C,\n            R = r.query_status_response_type,\n            I = r.revokeAccessTokenOnSignout,\n            D = void 0 !== I && I,\n            L = r.accessTokenExpiringNotificationTime,\n            N = void 0 === L ? 60 : L,\n            U = r.redirectNavigator,\n            B = void 0 === U ? new o.RedirectNavigator() : U,\n            O = r.popupNavigator,\n            j = void 0 === O ? new s.PopupNavigator() : O,\n            M = r.iframeNavigator,\n            H = void 0 === M ? new a.IFrameNavigator() : M,\n            V = r.userStore,\n            K = void 0 === V ? new u.WebStorageStateStore({\n          store: c.Global.sessionStorage\n        }) : V;\n        l(this, e);\n        var q = f(this, t.call(this, arguments[0]));\n        return q._popup_redirect_uri = n, q._popup_post_logout_redirect_uri = i, q._popupWindowFeatures = g, q._popupWindowTarget = d, q._silent_redirect_uri = p, q._silentRequestTimeout = v, q._automaticSilentRenew = m, q._validateSubOnSilentRenew = S, q._includeIdTokenInSilentRenew = w, q._accessTokenExpiringNotificationTime = N, q._monitorSession = E, q._monitorAnonymousSession = A, q._checkSessionInterval = P, q._stopCheckSessionOnError = T, R ? q._query_status_response_type = R : arguments[0] && arguments[0].response_type ? q._query_status_response_type = h.SigninRequest.isOidc(arguments[0].response_type) ? \"id_token\" : \"code\" : q._query_status_response_type = \"id_token\", q._revokeAccessTokenOnSignout = D, q._redirectNavigator = B, q._popupNavigator = j, q._iframeNavigator = H, q._userStore = K, q;\n      }\n\n      return function r(t, e) {\n        if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof e);\n        t.prototype = Object.create(e && e.prototype, {\n          constructor: {\n            value: t,\n            enumerable: !1,\n            writable: !0,\n            configurable: !0\n          }\n        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);\n      }(e, t), n(e, [{\n        key: \"popup_redirect_uri\",\n        get: function t() {\n          return this._popup_redirect_uri;\n        }\n      }, {\n        key: \"popup_post_logout_redirect_uri\",\n        get: function t() {\n          return this._popup_post_logout_redirect_uri;\n        }\n      }, {\n        key: \"popupWindowFeatures\",\n        get: function t() {\n          return this._popupWindowFeatures;\n        }\n      }, {\n        key: \"popupWindowTarget\",\n        get: function t() {\n          return this._popupWindowTarget;\n        }\n      }, {\n        key: \"silent_redirect_uri\",\n        get: function t() {\n          return this._silent_redirect_uri;\n        }\n      }, {\n        key: \"silentRequestTimeout\",\n        get: function t() {\n          return this._silentRequestTimeout;\n        }\n      }, {\n        key: \"automaticSilentRenew\",\n        get: function t() {\n          return this._automaticSilentRenew;\n        }\n      }, {\n        key: \"validateSubOnSilentRenew\",\n        get: function t() {\n          return this._validateSubOnSilentRenew;\n        }\n      }, {\n        key: \"includeIdTokenInSilentRenew\",\n        get: function t() {\n          return this._includeIdTokenInSilentRenew;\n        }\n      }, {\n        key: \"accessTokenExpiringNotificationTime\",\n        get: function t() {\n          return this._accessTokenExpiringNotificationTime;\n        }\n      }, {\n        key: \"monitorSession\",\n        get: function t() {\n          return this._monitorSession;\n        }\n      }, {\n        key: \"monitorAnonymousSession\",\n        get: function t() {\n          return this._monitorAnonymousSession;\n        }\n      }, {\n        key: \"checkSessionInterval\",\n        get: function t() {\n          return this._checkSessionInterval;\n        }\n      }, {\n        key: \"stopCheckSessionOnError\",\n        get: function t() {\n          return this._stopCheckSessionOnError;\n        }\n      }, {\n        key: \"query_status_response_type\",\n        get: function t() {\n          return this._query_status_response_type;\n        }\n      }, {\n        key: \"revokeAccessTokenOnSignout\",\n        get: function t() {\n          return this._revokeAccessTokenOnSignout;\n        }\n      }, {\n        key: \"redirectNavigator\",\n        get: function t() {\n          return this._redirectNavigator;\n        }\n      }, {\n        key: \"popupNavigator\",\n        get: function t() {\n          return this._popupNavigator;\n        }\n      }, {\n        key: \"iframeNavigator\",\n        get: function t() {\n          return this._iframeNavigator;\n        }\n      }, {\n        key: \"userStore\",\n        get: function t() {\n          return this._userStore;\n        }\n      }]), e;\n    }(i.OidcClientSettings);\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.RedirectNavigator = void 0;\n\n    var n = function () {\n      function t(t, e) {\n        for (var r = 0; r < e.length; r++) {\n          var n = e[r];\n          n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(t, n.key, n);\n        }\n      }\n\n      return function (e, r, n) {\n        return r && t(e.prototype, r), n && t(e, n), e;\n      };\n    }(),\n        i = r(0);\n\n    e.RedirectNavigator = function () {\n      function t() {\n        !function e(t, r) {\n          if (!(t instanceof r)) throw new TypeError(\"Cannot call a class as a function\");\n        }(this, t);\n      }\n\n      return t.prototype.prepare = function t() {\n        return Promise.resolve(this);\n      }, t.prototype.navigate = function t(e) {\n        return e && e.url ? (e.useReplaceToNavigate ? window.location.replace(e.url) : window.location = e.url, Promise.resolve()) : (i.Log.error(\"RedirectNavigator.navigate: No url provided\"), Promise.reject(new Error(\"No url provided\")));\n      }, n(t, [{\n        key: \"url\",\n        get: function t() {\n          return window.location.href;\n        }\n      }]), t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.PopupNavigator = void 0;\n    var n = r(0),\n        i = r(42);\n\n    e.PopupNavigator = function () {\n      function t() {\n        !function e(t, r) {\n          if (!(t instanceof r)) throw new TypeError(\"Cannot call a class as a function\");\n        }(this, t);\n      }\n\n      return t.prototype.prepare = function t(e) {\n        var r = new i.PopupWindow(e);\n        return Promise.resolve(r);\n      }, t.prototype.callback = function t(e, r, o) {\n        n.Log.debug(\"PopupNavigator.callback\");\n\n        try {\n          return i.PopupWindow.notifyOpener(e, r, o), Promise.resolve();\n        } catch (t) {\n          return Promise.reject(t);\n        }\n      }, t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.PopupWindow = void 0;\n\n    var n = function () {\n      function t(t, e) {\n        for (var r = 0; r < e.length; r++) {\n          var n = e[r];\n          n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(t, n.key, n);\n        }\n      }\n\n      return function (e, r, n) {\n        return r && t(e.prototype, r), n && t(e, n), e;\n      };\n    }(),\n        i = r(0),\n        o = r(3);\n\n    e.PopupWindow = function () {\n      function t(e) {\n        var r = this;\n        !function n(t, e) {\n          if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n        }(this, t), this._promise = new Promise(function (t, e) {\n          r._resolve = t, r._reject = e;\n        });\n        var o = e.popupWindowTarget || \"_blank\",\n            s = e.popupWindowFeatures || \"location=no,toolbar=no,width=500,height=500,left=100,top=100;\";\n        this._popup = window.open(\"\", o, s), this._popup && (i.Log.debug(\"PopupWindow.ctor: popup successfully created\"), this._checkForPopupClosedTimer = window.setInterval(this._checkForPopupClosed.bind(this), 500));\n      }\n\n      return t.prototype.navigate = function t(e) {\n        return this._popup ? e && e.url ? (i.Log.debug(\"PopupWindow.navigate: Setting URL in popup\"), this._id = e.id, this._id && (window[\"popupCallback_\" + e.id] = this._callback.bind(this)), this._popup.focus(), this._popup.window.location = e.url) : (this._error(\"PopupWindow.navigate: no url provided\"), this._error(\"No url provided\")) : this._error(\"PopupWindow.navigate: Error opening popup window\"), this.promise;\n      }, t.prototype._success = function t(e) {\n        i.Log.debug(\"PopupWindow.callback: Successful response from popup window\"), this._cleanup(), this._resolve(e);\n      }, t.prototype._error = function t(e) {\n        i.Log.error(\"PopupWindow.error: \", e), this._cleanup(), this._reject(new Error(e));\n      }, t.prototype.close = function t() {\n        this._cleanup(!1);\n      }, t.prototype._cleanup = function t(e) {\n        i.Log.debug(\"PopupWindow.cleanup\"), window.clearInterval(this._checkForPopupClosedTimer), this._checkForPopupClosedTimer = null, delete window[\"popupCallback_\" + this._id], this._popup && !e && this._popup.close(), this._popup = null;\n      }, t.prototype._checkForPopupClosed = function t() {\n        this._popup && !this._popup.closed || this._error(\"Popup window closed\");\n      }, t.prototype._callback = function t(e, r) {\n        this._cleanup(r), e ? (i.Log.debug(\"PopupWindow.callback success\"), this._success({\n          url: e\n        })) : (i.Log.debug(\"PopupWindow.callback: Invalid response from popup\"), this._error(\"Invalid response from popup\"));\n      }, t.notifyOpener = function t(e, r, n) {\n        if (window.opener) {\n          if (e = e || window.location.href) {\n            var s = o.UrlUtility.parseUrlFragment(e, n);\n\n            if (s.state) {\n              var a = \"popupCallback_\" + s.state,\n                  u = window.opener[a];\n              u ? (i.Log.debug(\"PopupWindow.notifyOpener: passing url message to opener\"), u(e, r)) : i.Log.warn(\"PopupWindow.notifyOpener: no matching callback found on opener\");\n            } else i.Log.warn(\"PopupWindow.notifyOpener: no state found in response url\");\n          }\n        } else i.Log.warn(\"PopupWindow.notifyOpener: no window.opener. Can't complete notification.\");\n      }, n(t, [{\n        key: \"promise\",\n        get: function t() {\n          return this._promise;\n        }\n      }]), t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.IFrameNavigator = void 0;\n    var n = r(0),\n        i = r(44);\n\n    e.IFrameNavigator = function () {\n      function t() {\n        !function e(t, r) {\n          if (!(t instanceof r)) throw new TypeError(\"Cannot call a class as a function\");\n        }(this, t);\n      }\n\n      return t.prototype.prepare = function t(e) {\n        var r = new i.IFrameWindow(e);\n        return Promise.resolve(r);\n      }, t.prototype.callback = function t(e) {\n        n.Log.debug(\"IFrameNavigator.callback\");\n\n        try {\n          return i.IFrameWindow.notifyParent(e), Promise.resolve();\n        } catch (t) {\n          return Promise.reject(t);\n        }\n      }, t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.IFrameWindow = void 0;\n\n    var n = function () {\n      function t(t, e) {\n        for (var r = 0; r < e.length; r++) {\n          var n = e[r];\n          n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(t, n.key, n);\n        }\n      }\n\n      return function (e, r, n) {\n        return r && t(e.prototype, r), n && t(e, n), e;\n      };\n    }(),\n        i = r(0);\n\n    e.IFrameWindow = function () {\n      function t(e) {\n        var r = this;\n        !function n(t, e) {\n          if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n        }(this, t), this._promise = new Promise(function (t, e) {\n          r._resolve = t, r._reject = e;\n        }), this._boundMessageEvent = this._message.bind(this), window.addEventListener(\"message\", this._boundMessageEvent, !1), this._frame = window.document.createElement(\"iframe\"), this._frame.style.visibility = \"hidden\", this._frame.style.position = \"absolute\", this._frame.width = 0, this._frame.height = 0, window.document.body.appendChild(this._frame);\n      }\n\n      return t.prototype.navigate = function t(e) {\n        if (e && e.url) {\n          var r = e.silentRequestTimeout || 1e4;\n          i.Log.debug(\"IFrameWindow.navigate: Using timeout of:\", r), this._timer = window.setTimeout(this._timeout.bind(this), r), this._frame.src = e.url;\n        } else this._error(\"No url provided\");\n\n        return this.promise;\n      }, t.prototype._success = function t(e) {\n        this._cleanup(), i.Log.debug(\"IFrameWindow: Successful response from frame window\"), this._resolve(e);\n      }, t.prototype._error = function t(e) {\n        this._cleanup(), i.Log.error(e), this._reject(new Error(e));\n      }, t.prototype.close = function t() {\n        this._cleanup();\n      }, t.prototype._cleanup = function t() {\n        this._frame && (i.Log.debug(\"IFrameWindow: cleanup\"), window.removeEventListener(\"message\", this._boundMessageEvent, !1), window.clearTimeout(this._timer), window.document.body.removeChild(this._frame), this._timer = null, this._frame = null, this._boundMessageEvent = null);\n      }, t.prototype._timeout = function t() {\n        i.Log.debug(\"IFrameWindow.timeout\"), this._error(\"Frame window timed out\");\n      }, t.prototype._message = function t(e) {\n        if (i.Log.debug(\"IFrameWindow.message\"), this._timer && e.origin === this._origin && e.source === this._frame.contentWindow && \"string\" == typeof e.data && (e.data.startsWith(\"http://\") || e.data.startsWith(\"https://\"))) {\n          var r = e.data;\n          r ? this._success({\n            url: r\n          }) : this._error(\"Invalid response from frame\");\n        }\n      }, t.notifyParent = function t(e) {\n        i.Log.debug(\"IFrameWindow.notifyParent\"), (e = e || window.location.href) && (i.Log.debug(\"IFrameWindow.notifyParent: posting url message to parent\"), window.parent.postMessage(e, location.protocol + \"//\" + location.host));\n      }, n(t, [{\n        key: \"promise\",\n        get: function t() {\n          return this._promise;\n        }\n      }, {\n        key: \"_origin\",\n        get: function t() {\n          return location.protocol + \"//\" + location.host;\n        }\n      }]), t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.UserManagerEvents = void 0;\n    var n = r(0),\n        i = r(16),\n        o = r(17);\n\n    e.UserManagerEvents = function (t) {\n      function e(r) {\n        !function n(t, e) {\n          if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n        }(this, e);\n\n        var i = function s(t, e) {\n          if (!t) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n          return !e || \"object\" != typeof e && \"function\" != typeof e ? t : e;\n        }(this, t.call(this, r));\n\n        return i._userLoaded = new o.Event(\"User loaded\"), i._userUnloaded = new o.Event(\"User unloaded\"), i._silentRenewError = new o.Event(\"Silent renew error\"), i._userSignedIn = new o.Event(\"User signed in\"), i._userSignedOut = new o.Event(\"User signed out\"), i._userSessionChanged = new o.Event(\"User session changed\"), i;\n      }\n\n      return function r(t, e) {\n        if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof e);\n        t.prototype = Object.create(e && e.prototype, {\n          constructor: {\n            value: t,\n            enumerable: !1,\n            writable: !0,\n            configurable: !0\n          }\n        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);\n      }(e, t), e.prototype.load = function e(r) {\n        var i = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];\n        n.Log.debug(\"UserManagerEvents.load\"), t.prototype.load.call(this, r), i && this._userLoaded.raise(r);\n      }, e.prototype.unload = function e() {\n        n.Log.debug(\"UserManagerEvents.unload\"), t.prototype.unload.call(this), this._userUnloaded.raise();\n      }, e.prototype.addUserLoaded = function t(e) {\n        this._userLoaded.addHandler(e);\n      }, e.prototype.removeUserLoaded = function t(e) {\n        this._userLoaded.removeHandler(e);\n      }, e.prototype.addUserUnloaded = function t(e) {\n        this._userUnloaded.addHandler(e);\n      }, e.prototype.removeUserUnloaded = function t(e) {\n        this._userUnloaded.removeHandler(e);\n      }, e.prototype.addSilentRenewError = function t(e) {\n        this._silentRenewError.addHandler(e);\n      }, e.prototype.removeSilentRenewError = function t(e) {\n        this._silentRenewError.removeHandler(e);\n      }, e.prototype._raiseSilentRenewError = function t(e) {\n        n.Log.debug(\"UserManagerEvents._raiseSilentRenewError\", e.message), this._silentRenewError.raise(e);\n      }, e.prototype.addUserSignedIn = function t(e) {\n        this._userSignedIn.addHandler(e);\n      }, e.prototype.removeUserSignedIn = function t(e) {\n        this._userSignedIn.removeHandler(e);\n      }, e.prototype._raiseUserSignedIn = function t() {\n        n.Log.debug(\"UserManagerEvents._raiseUserSignedIn\"), this._userSignedIn.raise();\n      }, e.prototype.addUserSignedOut = function t(e) {\n        this._userSignedOut.addHandler(e);\n      }, e.prototype.removeUserSignedOut = function t(e) {\n        this._userSignedOut.removeHandler(e);\n      }, e.prototype._raiseUserSignedOut = function t() {\n        n.Log.debug(\"UserManagerEvents._raiseUserSignedOut\"), this._userSignedOut.raise();\n      }, e.prototype.addUserSessionChanged = function t(e) {\n        this._userSessionChanged.addHandler(e);\n      }, e.prototype.removeUserSessionChanged = function t(e) {\n        this._userSessionChanged.removeHandler(e);\n      }, e.prototype._raiseUserSessionChanged = function t() {\n        n.Log.debug(\"UserManagerEvents._raiseUserSessionChanged\"), this._userSessionChanged.raise();\n      }, e;\n    }(i.AccessTokenEvents);\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.Timer = void 0;\n\n    var n = function () {\n      function t(t, e) {\n        for (var r = 0; r < e.length; r++) {\n          var n = e[r];\n          n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(t, n.key, n);\n        }\n      }\n\n      return function (e, r, n) {\n        return r && t(e.prototype, r), n && t(e, n), e;\n      };\n    }(),\n        i = r(0),\n        o = r(1),\n        s = r(17);\n\n    function a(t, e) {\n      if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n    }\n\n    function u(t, e) {\n      if (!t) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      return !e || \"object\" != typeof e && \"function\" != typeof e ? t : e;\n    }\n\n    e.Timer = function (t) {\n      function e(r) {\n        var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : o.Global.timer,\n            i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : void 0;\n        a(this, e);\n        var s = u(this, t.call(this, r));\n        return s._timer = n, s._nowFunc = i || function () {\n          return Date.now() / 1e3;\n        }, s;\n      }\n\n      return function r(t, e) {\n        if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof e);\n        t.prototype = Object.create(e && e.prototype, {\n          constructor: {\n            value: t,\n            enumerable: !1,\n            writable: !0,\n            configurable: !0\n          }\n        }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);\n      }(e, t), e.prototype.init = function t(e) {\n        e <= 0 && (e = 1), e = parseInt(e);\n        var r = this.now + e;\n        if (this.expiration === r && this._timerHandle) i.Log.debug(\"Timer.init timer \" + this._name + \" skipping initialization since already initialized for expiration:\", this.expiration);else {\n          this.cancel(), i.Log.debug(\"Timer.init timer \" + this._name + \" for duration:\", e), this._expiration = r;\n          var n = 5;\n          e < n && (n = e), this._timerHandle = this._timer.setInterval(this._callback.bind(this), 1e3 * n);\n        }\n      }, e.prototype.cancel = function t() {\n        this._timerHandle && (i.Log.debug(\"Timer.cancel: \", this._name), this._timer.clearInterval(this._timerHandle), this._timerHandle = null);\n      }, e.prototype._callback = function e() {\n        var r = this._expiration - this.now;\n        i.Log.debug(\"Timer.callback; \" + this._name + \" timer expires in:\", r), this._expiration <= this.now && (this.cancel(), t.prototype.raise.call(this));\n      }, n(e, [{\n        key: \"now\",\n        get: function t() {\n          return parseInt(this._nowFunc());\n        }\n      }, {\n        key: \"expiration\",\n        get: function t() {\n          return this._expiration;\n        }\n      }]), e;\n    }(s.Event);\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.SilentRenewService = void 0;\n    var n = r(0);\n\n    e.SilentRenewService = function () {\n      function t(e) {\n        !function r(t, e) {\n          if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n        }(this, t), this._userManager = e;\n      }\n\n      return t.prototype.start = function t() {\n        this._callback || (this._callback = this._tokenExpiring.bind(this), this._userManager.events.addAccessTokenExpiring(this._callback), this._userManager.getUser().then(function (t) {}).catch(function (t) {\n          n.Log.error(\"SilentRenewService.start: Error from getUser:\", t.message);\n        }));\n      }, t.prototype.stop = function t() {\n        this._callback && (this._userManager.events.removeAccessTokenExpiring(this._callback), delete this._callback);\n      }, t.prototype._tokenExpiring = function t() {\n        var e = this;\n\n        this._userManager.signinSilent().then(function (t) {\n          n.Log.debug(\"SilentRenewService._tokenExpiring: Silent token renewal successful\");\n        }, function (t) {\n          n.Log.error(\"SilentRenewService._tokenExpiring: Error from signinSilent:\", t.message), e._userManager.events._raiseSilentRenewError(t);\n        });\n      }, t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.CordovaPopupNavigator = void 0;\n    var n = r(21);\n\n    e.CordovaPopupNavigator = function () {\n      function t() {\n        !function e(t, r) {\n          if (!(t instanceof r)) throw new TypeError(\"Cannot call a class as a function\");\n        }(this, t);\n      }\n\n      return t.prototype.prepare = function t(e) {\n        var r = new n.CordovaPopupWindow(e);\n        return Promise.resolve(r);\n      }, t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    }), e.CordovaIFrameNavigator = void 0;\n    var n = r(21);\n\n    e.CordovaIFrameNavigator = function () {\n      function t() {\n        !function e(t, r) {\n          if (!(t instanceof r)) throw new TypeError(\"Cannot call a class as a function\");\n        }(this, t);\n      }\n\n      return t.prototype.prepare = function t(e) {\n        e.popupWindowFeatures = \"hidden=yes\";\n        var r = new n.CordovaPopupWindow(e);\n        return Promise.resolve(r);\n      }, t;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    });\n    e.Version = \"1.11.5\";\n  }]);\n});","map":null,"metadata":{},"sourceType":"script"}